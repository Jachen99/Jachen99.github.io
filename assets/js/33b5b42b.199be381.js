"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[1976],{674:(r,e,n)=>{n.r(e),n.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>t,toc:()=>p});var t=n(2186),i=n(4848),s=n(8453);const o={slug:"product-spring-security-microservices",title:"spring-security\u6574\u5408\u5fae\u670d\u52a1\u5b9e\u8df5",authors:["jiguanchen"],tags:["spring-security"]},a=void 0,c={authorsImageUrls:[void 0]},p=[{value:"\u6280\u672f\u9009\u578b",id:"\u6280\u672f\u9009\u578b",level:2},{value:"\u5c0f\u7ed3\uff1a",id:"\u5c0f\u7ed3",level:3},{value:"\u4ecb\u7ecd",id:"\u4ecb\u7ecd",level:2},{value:"Spring Security\u7b80\u4ecb",id:"spring-security\u7b80\u4ecb",level:3},{value:"\u5386\u53f2",id:"\u5386\u53f2",level:3},{value:"\u6d41\u7a0b\u4ecb\u7ecd",id:"\u6d41\u7a0b\u4ecb\u7ecd",level:2},{value:"\u5feb\u901f\u5b9e\u8df5",id:"\u5feb\u901f\u5b9e\u8df5",level:2},{value:"\u642d\u5efa\u6743\u9650\u6846\u67b6\u57fa\u672c\u9aa8\u67b6",id:"\u642d\u5efa\u6743\u9650\u6846\u67b6\u57fa\u672c\u9aa8\u67b6",level:3},{value:"\u5b9e\u73b0\u7528\u6237\u8ba4\u8bc1\u529f\u80fd",id:"\u5b9e\u73b0\u7528\u6237\u8ba4\u8bc1\u529f\u80fd",level:3}];function l(r){const e={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...r.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u8d77\u56e0"}),"\uff1a",(0,i.jsx)(e.em,{children:"\u968f\u7740\u8d8a\u6765\u8d8a\u591a\u7684\u4e1a\u52a1\u8f6c\u79fb\u5230\u4e92\u8054\u7f51\u4e0a\uff0c\u5b89\u5168\u6027\u5df2\u7ecf\u6210\u4e3a\u4efb\u4f55\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u7684\u91cd\u8981\u8003\u8651\u56e0\u7d20\u3002\u800c\u5728 Java \u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u4e2d\uff0cSpring Security \u662f\u4e00\u4e2a\u975e\u5e38\u6d41\u884c\u7684\u5b89\u5168\u6846\u67b6\uff0c\u53ef\u4ee5\u63d0\u4f9b\u53ef\u9760\u7684\u8eab\u4efd\u9a8c\u8bc1\u3001\u6388\u6743\u548c\u4f1a\u8bdd\u7ba1\u7406\u7b49\u5b89\u5168\u7279\u6027\u3002\u65e0\u8bba\u662f\u5f00\u53d1 Web \u5e94\u7528\u7a0b\u5e8f\u3001RESTful \u670d\u52a1\u3001\u5355\u9875\u5e94\u7528\u7a0b\u5e8f\u6216\u8005\u5176\u4ed6\u7c7b\u578b\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528 Spring Security \u6765\u4fdd\u62a4\u5e94\u7528\u7a0b\u5e8f\u7684\u5b89\u5168\u6027\u3002\u540c\u65f6\uff0cSpring Security \u8fd8\u5177\u6709\u975e\u5e38\u597d\u7684\u53ef\u6269\u5c55\u6027\uff0c\u53ef\u4ee5\u4e0e Spring \u751f\u6001\u7cfb\u7edf\u4e2d\u7684\u5176\u4ed6\u6846\u67b6\u548c\u5e93\u8fdb\u884c\u65e0\u7f1d\u96c6\u6210\uff0c\u4f7f\u5f00\u53d1\u4eba\u5458\u80fd\u591f\u6784\u5efa\u51fa\u590d\u6742\u7684\u3001\u9ad8\u5ea6\u53ef\u5b9a\u5236\u7684\u5b89\u5168\u89e3\u51b3\u65b9\u6848\u3002\u56e0\u6b64\uff0c\u4f7f\u7528 Spring Security \u662f\u4fdd\u969c\u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u7684\u4e0d\u4e8c\u9009\u62e9\u3002"})]}),"\n",(0,i.jsx)(e.h2,{id:"\u6280\u672f\u9009\u578b",children:"\u6280\u672f\u9009\u578b"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{}),(0,i.jsx)(e.th,{children:"Spring Security"}),(0,i.jsx)(e.th,{children:"Apache Shiro"}),(0,i.jsx)(e.th,{children:"Apache Knox"}),(0,i.jsx)(e.th,{children:"Keycloak"}),(0,i.jsx)(e.th,{children:"Stormpath"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u6982\u8ff0"}),(0,i.jsx)(e.td,{children:"Spring Security \u662f\u4e00\u4e2a\u975e\u5e38\u6d41\u884c\u7684 Java \u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u6846\u67b6\uff0c\u63d0\u4f9b\u4e86\u5b8c\u6574\u7684\u8eab\u4efd\u9a8c\u8bc1\u3001\u6388\u6743\u548c\u4f1a\u8bdd\u7ba1\u7406\u529f\u80fd\u3002\u5b83\u5177\u6709\u826f\u597d\u7684\u53ef\u6269\u5c55\u6027\u548c\u7075\u6d3b\u6027\uff0c\u80fd\u591f\u4e0e Spring \u751f\u6001\u7cfb\u7edf\u4e2d\u7684\u5176\u4ed6\u6846\u67b6\u548c\u5e93\u65e0\u7f1d\u96c6\u6210"}),(0,i.jsx)(e.td,{children:"Apache Shiro \u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u7684\u5b89\u5168\u6846\u67b6\uff0c\u63d0\u4f9b\u4e86\u8eab\u4efd\u9a8c\u8bc1\u3001\u6388\u6743\u3001\u52a0\u5bc6\u548c\u4f1a\u8bdd\u7ba1\u7406\u7b49\u529f\u80fd\u3002\u5b83\u6613\u4e8e\u4f7f\u7528\u548c\u96c6\u6210\uff0c\u80fd\u591f\u4e0e\u4efb\u4f55\u5e94\u7528\u7a0b\u5e8f\u6846\u67b6\u4e00\u8d77\u4f7f\u7528\uff0c\u652f\u6301\u591a\u79cd\u6570\u636e\u6e90\uff0c\u5982 LDAP\u3001JDBC \u548c Active Directory"}),(0,i.jsx)(e.td,{children:"Apache Knox \u662f\u4e00\u4e2a\u5f00\u6e90\u7f51\u5173\uff0c\u63d0\u4f9b\u4e86 REST API \u7684\u8ba4\u8bc1\u3001\u6388\u6743\u548c\u5ba1\u8ba1\u529f\u80fd\u3002\u5b83\u53ef\u4ee5\u4fdd\u62a4 Hadoop \u96c6\u7fa4\u7684 REST API\uff0c\u63d0\u4f9b\u4e86\u5355\u70b9\u767b\u5f55\u548c OAuth2 \u652f\u6301"}),(0,i.jsx)(e.td,{children:"Keycloak \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u8eab\u4efd\u8ba4\u8bc1\u548c\u8bbf\u95ee\u7ba1\u7406\u89e3\u51b3\u65b9\u6848\uff0c\u57fa\u4e8e OpenID Connect \u548c OAuth2 \u534f\u8bae\u3002\u5b83\u63d0\u4f9b\u4e86\u53ef\u6269\u5c55\u7684\u8eab\u4efd\u9a8c\u8bc1\u548c\u6388\u6743\u529f\u80fd\uff0c\u5305\u62ec\u5355\u70b9\u767b\u5f55\u3001\u591a\u56e0\u7d20\u8eab\u4efd\u9a8c\u8bc1\u548c\u57fa\u4e8e\u89d2\u8272\u7684\u8bbf\u95ee\u63a7\u5236\u7b49"}),(0,i.jsx)(e.td,{children:"Stormpath \u662f\u4e00\u4e2a\u4e91\u8eab\u4efd\u8ba4\u8bc1\u548c\u8bbf\u95ee\u7ba1\u7406\u670d\u52a1\uff0c\u63d0\u4f9b\u4e86\u5b8c\u6574\u7684\u8eab\u4efd\u9a8c\u8bc1\u3001\u6388\u6743\u548c\u7528\u6237\u7ba1\u7406\u529f\u80fd\u3002\u5b83\u53ef\u4ee5\u4e0e\u4efb\u4f55\u5e94\u7528\u7a0b\u5e8f\u6846\u67b6\u4e00\u8d77\u4f7f\u7528\uff0c\u5305\u62ec Java\u3001Node.js \u548c .NET"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u4f18\u70b9"}),(0,i.jsx)(e.td,{children:"\u5b8c\u6574\u7684\u5b89\u5168\u7279\u6027\u3001\u4e0e Spring \u6846\u67b6\u65e0\u7f1d\u96c6\u6210\u3001\u4e30\u5bcc\u7684\u63d2\u4ef6\u548c\u6269\u5c55\u3001\u826f\u597d\u7684\u6587\u6863\u548c\u793e\u533a\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u62ec\u8f7b\u91cf\u7ea7\u3001\u6613\u4e8e\u4f7f\u7528\u548c\u96c6\u6210\u3001\u652f\u6301\u591a\u79cd\u6570\u636e\u6e90\u3001\u4f18\u79c0\u7684\u6587\u6863"}),(0,i.jsx)(e.td,{children:"\u4fdd\u62a4 Hadoop \u96c6\u7fa4\u7684 REST API\u3001\u652f\u6301\u5355\u70b9\u767b\u5f55\u548c OAuth2\u3001\u6613\u4e8e\u914d\u7f6e\u548c\u4f7f\u7528"}),(0,i.jsx)(e.td,{children:"\u53ef\u6269\u5c55\u7684\u8eab\u4efd\u9a8c\u8bc1\u548c\u6388\u6743\u529f\u80fd\u3001\u591a\u79cd\u8eab\u4efd\u9a8c\u8bc1\u65b9\u5f0f\u3001\u57fa\u4e8e\u89d2\u8272\u7684\u8bbf\u95ee\u63a7\u5236\u3001\u6613\u4e8e\u4f7f\u7528\u548c\u90e8\u7f72"}),(0,i.jsx)(e.td,{children:"\u4e91\u8eab\u4efd\u8ba4\u8bc1\u548c\u8bbf\u95ee\u7ba1\u7406\u670d\u52a1\u3001\u6613\u4e8e\u4f7f\u7528\u548c\u96c6\u6210\u3001\u63d0\u4f9b\u5b8c\u6574\u7684\u8eab\u4efd\u9a8c\u8bc1\u3001\u6388\u6743\u548c\u7528\u6237\u7ba1\u7406\u529f\u80fd"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u7f3a\u70b9"}),(0,i.jsx)(e.td,{children:"\u914d\u7f6e\u590d\u6742\u3001\u4e0a\u624b\u8f83\u96be"}),(0,i.jsx)(e.td,{children:"\u4e0e Spring \u6846\u67b6\u7684\u6df1\u5ea6\u96c6\u6210\u3001\u4e0d\u591f\u5b8c\u6574\u7684\u5b89\u5168\u7279\u6027"}),(0,i.jsx)(e.td,{children:"\u4ec5\u9002\u7528\u4e8e\u4fdd\u62a4 Hadoop \u96c6\u7fa4\u7684 REST API"}),(0,i.jsx)(e.td,{children:"\u914d\u7f6e\u590d\u6742\u3001\u6027\u80fd\u8f83\u5dee"}),(0,i.jsx)(e.td,{children:"\u9700\u8981\u4f7f\u7528\u4e91\u670d\u52a1\u3001\u9700\u8981\u652f\u4ed8\u670d\u52a1\u8d39\u7528\uff0c\u6210\u672c\u9ad8"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u9002\u7528\u573a\u666f"}),(0,i.jsx)(e.td,{children:"\u9002\u7528\u4e8e\u57fa\u4e8e Spring \u6846\u67b6\u6784\u5efa\u7684\u5e94\u7528\u7a0b\u5e8f"}),(0,i.jsx)(e.td,{children:"\u9002\u7528\u4e8e\u4e0d\u4f9d\u8d56\u4e8e Spring \u6846\u67b6\u7684\u5e94\u7528\u7a0b\u5e8f"}),(0,i.jsx)(e.td,{children:"\u9002\u7528\u4e8e\u9700\u8981\u4fdd\u62a4 Hadoop \u96c6\u7fa4\u7684 REST API \u7684\u573a\u666f"}),(0,i.jsx)(e.td,{children:"\u9002\u7528\u4e8e\u9700\u8981\u5355\u72ec\u90e8\u7f72\u4e00\u4e2a\u8eab\u4efd\u8ba4\u8bc1\u548c\u8bbf\u95ee\u7ba1\u7406\u7cfb\u7edf\u7684\u573a\u666f"}),(0,i.jsx)(e.td,{children:"\u9002\u7528\u4e8e\u9700\u8981\u4f7f\u7528\u4e91\u8eab\u4efd\u8ba4\u8bc1\u548c\u8bbf\u95ee\u7ba1\u7406\u670d\u52a1\u7684\u573a\u666f\u3002"})]})]})]}),"\n",(0,i.jsx)(e.h3,{id:"\u5c0f\u7ed3",children:"\u5c0f\u7ed3\uff1a"}),"\n",(0,i.jsx)(e.p,{children:"\u56fd\u5185\u76ee\u524d\u975e\u5e38\u6d41\u884c\u7684\u5c31\u662fSpring Security\u548cApache Shiro \u3002"}),"\n",(0,i.jsx)(e.p,{children:"Spring Security\u51fa\u73b0\u7684\u65f6\u95f4\u8f83\u65e9\uff0c\u5728springboot\u6ca1\u706b\u8d77\u6765\u4e4b\u524d\u4e00\u76f4\u90fd\u662fShiro \u7684\u5929\u4e0b\uff0c\u4f46\u76ee\u524d\u6700\u80fd\u548cspring\u5168\u5bb6\u6876\u6574\u5408\u8d77\u6765\u7684\u5c31\u662fSpring Security\uff0cSpring Security \u662f\u6700\u4e3a\u5b8c\u6574\u3001\u53ef\u6269\u5c55\u548c\u7075\u6d3b\u7684\u5b89\u5168\u6846\u67b6\uff0c\u800c\u4e14\u4e0e Spring \u6846\u67b6\u7684\u6df1\u5ea6\u96c6\u6210\u4f7f\u5f97\u4f7f\u7528\u548c\u914d\u7f6e\u53d8\u5f97\u7b80\u5355\u65b9\u4fbf\u3002Spring Security \u63d0\u4f9b\u4e86\u5168\u9762\u7684\u8eab\u4efd\u9a8c\u8bc1\u3001\u6388\u6743\u548c\u4f1a\u8bdd\u7ba1\u7406\u7279\u6027\uff0c\u5e76\u4e14\u53ef\u4ee5\u8f7b\u677e\u5730\u6269\u5c55\u5230\u652f\u6301\u81ea\u5b9a\u4e49\u7684\u5b89\u5168\u7b56\u7565\u548c\u7279\u6027\u3002\u800c\u4e14\u793e\u533a\u4e5f\u662f\u5341\u5206\u6d3b\u8dc3\u7684\u3002\u6240\u4ee5\u6b64\u7bc7\u6587\u7ae0\u4e3b\u8981\u4ece\u5b9e\u8df5\u6d41\u7a0b\u51fa\u53d1\uff0c\u5b9e\u73b0\u4e0espring\u9879\u76ee\u6574\u5408\u7684\u5feb\u901f\u642d\u5efa\u89e3\u51b3\u65b9\u6848\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u76f8\u5bf9\u4e8e Shiro\uff0c\u5728 SSM \u4e2d\u6574\u5408 Spring Security \u90fd\u662f\u6bd4\u8f83\u9ebb\u70e6\u7684\u64cd\u4f5c\uff0c\u6240\u4ee5\uff0cSpring Security \u867d\u7136\u529f\u80fd\u6bd4 Shiro \u5f3a\u5927\uff0c\u4f46\u662f\u4f7f\u7528\u53cd\u800c\u6ca1\u6709 Shiro \u591a\uff08Shiro \u867d\u7136\u529f\u80fd\u6ca1\u6709Spring Security \u591a\uff0c\u4f46\u662f\u5bf9\u4e8e\u5927\u90e8\u5206\u9879\u76ee\u800c\u8a00\uff0cShiro \u4e5f\u591f\u7528\u4e86\uff09\u3002\u81ea\u4ece\u6709\u4e86 Spring Boot \u4e4b\u540e\uff0cSpring Boot \u5bf9\u4e8e Spring Security \u63d0\u4f9b\u4e86\u81ea\u52a8\u5316\u914d\u7f6e\u65b9\u6848\uff0c\u53ef\u4ee5\u4f7f\u7528\u66f4\u5c11\u7684\u914d\u7f6e\u6765\u4f7f\u7528 Spring Security\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u56e0\u6b64\uff0c\u4e00\u822c\u6765\u8bf4\uff0c\u5e38\u89c1\u7684\u5b89\u5168\u7ba1\u7406\u6280\u672f\u6808\u7684\u7ec4\u5408\u662f\u8fd9\u6837\u7684\uff1a\r\n\u2022 SSM + Shiro\r\n\u2022 Spring Boot/Spring Cloud + Spring Security"}),"\n",(0,i.jsxs)(e.p,{children:["\u5982\u679c\u8fd8\u60f3\u4e86\u89e3shiro\u8fd9\u4e00\u6846\u67b6\uff0c\u6211\u4e5f\u5728github\u5f00\u6e90\u4e86\u4e00\u4e2a\u5c0fdemo\uff0c\u7528\u4e8e\u6574\u5408SpringBoot\u4e0eshiro\uff0c\u5b9e\u73b0\u5feb\u901f\u4e0a\u624b\uff0c\u4ed3\u5e93\u5730\u5740\uff1a",(0,i.jsx)(e.a,{href:"https://github.com/Jachen99/rbac_shiro",children:"https://github.com/Jachen99/rbac_shiro"})]}),"\n",(0,i.jsx)(e.h2,{id:"\u4ecb\u7ecd",children:"\u4ecb\u7ecd"}),"\n",(0,i.jsx)(e.h3,{id:"spring-security\u7b80\u4ecb",children:"Spring Security\u7b80\u4ecb"}),"\n",(0,i.jsx)(e.p,{children:"Spring \u662f\u975e\u5e38\u6d41\u884c\u548c\u6210\u529f\u7684 Java \u5e94\u7528\u5f00\u53d1\u6846\u67b6\uff0cSpring Security \u6b63\u662f Spring \u5bb6\u65cf\u4e2d\u7684\u6210\u5458\u3002Spring Security \u57fa\u4e8e Spring \u6846\u67b6\uff0c\u63d0\u4f9b\u4e86\u4e00\u5957 Web \u5e94\u7528\u5b89\u5168\u6027\u7684\u5b8c\u6574\u89e3\u51b3\u65b9\u6848\u3002"}),"\n",(0,i.jsxs)(e.p,{children:["\u6b63\u5982\u4f60\u53ef\u80fd\u77e5\u9053\u7684\u5173\u4e8e\u5b89\u5168\u65b9\u9762\u7684\u4e24\u4e2a\u6838\u5fc3\u529f\u80fd\u662f\u201c",(0,i.jsx)(e.strong,{children:"\u8ba4\u8bc1"}),"\u201d\u548c\u201c",(0,i.jsx)(e.strong,{children:"\u6388\u6743"}),"\u201d\uff0c\u4e00\u822c\u6765\u8bf4\uff0cWeb \u5e94\u7528\u7684\u5b89\u5168\u6027\u5305\u62ec**\u7528\u6237\u8ba4\u8bc1\uff08Authentication\uff09\u548c\u7528\u6237\u6388\u6743\uff08Authorization\uff09**\u4e24\u4e2a\u90e8\u5206\uff0c\u8fd9\u4e24\u70b9\u4e5f\u662f SpringSecurity \u91cd\u8981\u6838\u5fc3\u529f\u80fd\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"\uff081\uff09\u7528\u6237\u8ba4\u8bc1\u6307\u7684\u662f\uff1a\u9a8c\u8bc1\u67d0\u4e2a\u7528\u6237\u662f\u5426\u4e3a\u7cfb\u7edf\u4e2d\u7684\u5408\u6cd5\u4e3b\u4f53\uff0c\u4e5f\u5c31\u662f\u8bf4\u7528\u6237\u80fd\u5426\u8bbf\u95ee\u8be5\u7cfb\u7edf\u3002\u7528\u6237\u8ba4\u8bc1\u4e00\u822c\u8981\u6c42\u7528\u6237\u63d0\u4f9b\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u7cfb\u7edf\u901a\u8fc7\u6821\u9a8c\u7528\u6237\u540d\u548c\u5bc6\u7801\u6765\u5b8c\u6210\u8ba4\u8bc1\u8fc7\u7a0b\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u901a\u4fd7\u70b9\u8bf4\u5c31\u662f\u7cfb\u7edf\u8ba4\u4e3a\u7528\u6237\u662f\u5426\u80fd\u767b\u5f55"})}),"\n",(0,i.jsx)(e.p,{children:"\uff082\uff09\u7528\u6237\u6388\u6743\u6307\u7684\u662f\u9a8c\u8bc1\u67d0\u4e2a\u7528\u6237\u662f\u5426\u6709\u6743\u9650\u6267\u884c\u67d0\u4e2a\u64cd\u4f5c\u3002\u5728\u4e00\u4e2a\u7cfb\u7edf\u4e2d\uff0c\u4e0d\u540c\u7528\u6237\u6240\u5177\u6709\u7684\u6743\u9650\u662f\u4e0d\u540c\u7684\u3002\u6bd4\u5982\u5bf9\u4e00\u4e2a\u6587\u4ef6\u6765\u8bf4\uff0c\u6709\u7684\u7528\u6237\u53ea\u80fd\u8fdb\u884c\u8bfb\u53d6\uff0c\u800c\u6709\u7684\u7528\u6237\u53ef\u4ee5\u8fdb\u884c\u4fee\u6539\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u7cfb\u7edf\u4f1a\u4e3a\u4e0d\u540c\u7684\u7528\u6237\u5206\u914d\u4e0d\u540c\u7684\u89d2\u8272\uff0c\u800c\u6bcf\u4e2a\u89d2\u8272\u5219\u5bf9\u5e94\u4e00\u7cfb\u5217\u7684\u6743\u9650\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u901a\u4fd7\u70b9\u8bb2\u5c31\u662f\u7cfb\u7edf\u5224\u65ad\u7528\u6237\u662f\u5426\u6709\u6743\u9650\u53bb\u505a\u67d0\u4e9b\u4e8b\u60c5\u3002"})}),"\n",(0,i.jsx)(e.h3,{id:"\u5386\u53f2",children:"\u5386\u53f2"}),"\n",(0,i.jsx)(e.p,{children:"\u201cSpring Security \u5f00\u59cb\u4e8e 2003 \u5e74\u5e74\u5e95,\u201c\u201cspring \u7684 acegi \u5b89\u5168\u7cfb\u7edf\u201d\u3002 \u8d77\u56e0\u662f Spring\u5f00\u53d1\u8005\u90ae\u4ef6\u5217\u8868\u4e2d\u7684\u4e00\u4e2a\u95ee\u9898,\u6709\u4eba\u63d0\u95ee\u662f\u5426\u8003\u8651\u63d0\u4f9b\u4e00\u4e2a\u57fa\u4e8e spring \u7684\u5b89\u5168\u5b9e\u73b0\u3002"}),"\n",(0,i.jsx)(e.p,{children:"Spring Security \u4ee5\u201cThe Acegi Secutity System for Spring\u201d \u7684\u540d\u5b57\u59cb\u4e8e 2013 \u5e74\u665a\u4e9b\u65f6\u5019\u3002\u4e00\u4e2a\u95ee\u9898\u63d0\u4ea4\u5230 Spring \u5f00\u53d1\u8005\u7684\u90ae\u4ef6\u5217\u8868\uff0c\u8be2\u95ee\u662f\u5426\u5df2\u7ecf\u6709\u8003\u8651\u4e00\u4e2a\u57fa\u4e8eSpring \u7684\u5b89\u5168\u6027\u793e\u533a\u5b9e\u73b0\u3002\u90a3\u65f6\u5019 Spring \u7684\u793e\u533a\u76f8\u5bf9\u8f83\u5c0f\uff08\u76f8\u5bf9\u73b0\u5728\uff09\u3002\u5b9e\u9645\u4e0a Spring \u81ea\u5df1\u57282013 \u5e74\u53ea\u662f\u4e00\u4e2a\u5b58\u5728\u4e8e ScourseForge \u7684\u9879\u76ee\uff0c\u8fd9\u4e2a\u95ee\u9898\u7684\u56de\u7b54\u662f\u4e00\u4e2a\u503c\u5f97\u7814\u7a76\u7684\u9886\u57df\uff0c\u867d\u7136\u76ee\u524d\u65f6\u95f4\u7684\u7f3a\u4e4f\u7ec4\u7ec7\u4e86\u6211\u4eec\u5bf9\u5b83\u7684\u63a2\u7d22\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u8003\u8651\u5230\u8fd9\u4e00\u70b9\uff0c\u4e00\u4e2a\u7b80\u5355\u7684\u5b89\u5168\u5b9e\u73b0\u5efa\u6210\u4f46\u662f\u5e76\u6ca1\u6709\u53d1\u5e03\u3002\u51e0\u5468\u540e\uff0cSpring \u793e\u533a\u7684\u5176\u4ed6\u6210\u5458\u8be2\u95ee\u4e86\u5b89\u5168\u6027\uff0c\u8fd9\u6b21\u8fd9\u4e2a\u4ee3\u7801\u88ab\u53d1\u9001\u7ed9\u4ed6\u4eec\u3002\u5176\u4ed6\u51e0\u4e2a\u8bf7\u6c42\u4e5f\u8ddf\u968f\u800c\u6765\u3002\u5230 2014 \u5e74\u4e00\u6708\u5927\u7ea6\u6709 20 \u4e07\u4eba\u4f7f\u7528\u4e86\u8fd9\u4e2a\u4ee3\u7801\u3002\u8fd9\u4e9b\u521b\u4e1a\u8005\u7684\u4eba\u63d0\u51fa\u4e00\u4e2a SourceForge \u9879\u76ee\u52a0\u5165\u662f\u4e3a\u4e86\uff0c\u8fd9\u662f\u5728 2004 \u4e09\u6708\u6b63\u5f0f\u6210\u7acb\u3002"}),"\n",(0,i.jsx)(e.p,{children:"\u5728\u65e9\u4e9b\u65f6\u5019\uff0c\u8fd9\u4e2a\u9879\u76ee\u6ca1\u6709\u4efb\u4f55\u81ea\u5df1\u7684\u9a8c\u8bc1\u6a21\u5757\uff0c\u8eab\u4efd\u9a8c\u8bc1\u8fc7\u7a0b\u4f9d\u8d56\u4e8e\u5bb9\u5668\u7ba1\u7406\u7684\u5b89\u5168\u6027\u548c Acegi \u5b89\u5168\u6027\u3002\u800c\u4e0d\u662f\u4e13\u6ce8\u4e8e\u6388\u6743\u3002\u5f00\u59cb\u7684\u65f6\u5019\u8fd9\u5f88\u9002\u5408\uff0c\u4f46\u662f\u8d8a\u6765\u8d8a\u591a\u7684\u7528\u6237\u8bf7\u6c42\u989d\u5916\u7684\u5bb9\u5668\u652f\u6301\u3002\u5bb9\u5668\u7279\u5b9a\u7684\u8ba4\u8bc1\u9886\u57df\u63a5\u53e3\u7684\u57fa\u672c\u9650\u5236\u53d8\u5f97\u6e05\u6670\u3002\u8fd8\u6709\u4e00\u4e2a\u76f8\u5173\u7684\u95ee\u9898\u589e\u52a0\u65b0\u7684\u5bb9\u5668\u7684\u8def\u5f84\uff0c\u8fd9\u662f\u6700\u7ec8\u7528\u6237\u7684\u56f0\u60d1\u548c\u9519\u8bef\u914d\u7f6e\u7684\u5e38\u89c1\u95ee\u9898\u3002"}),"\n",(0,i.jsx)(e.p,{children:"Acegi \u5b89\u5168\u7279\u5b9a\u7684\u8ba4\u8bc1\u670d\u52a1\u4ecb\u7ecd\u3002\u5927\u7ea6\u4e00\u5e74\u540e\uff0cAcegi \u5b89\u5168\u6b63\u5f0f\u6210\u4e3a\u4e86 Spring \u6846\u67b6\u7684\u5b50\u9879\u76ee\u30021.0.0 \u6700\u7ec8\u7248\u672c\u662f\u51fa\u7248\u4e8e 2006 -\u5728\u8d85\u8fc7\u4e24\u5e74\u534a\u7684\u5927\u91cf\u751f\u4ea7\u7684\u8f6f\u4ef6\u9879\u76ee\u548c\u6570\u4ee5\u767e\u8ba1\u7684\u6539\u8fdb\u548c\u79ef\u6781\u5229\u7528\u793e\u533a\u7684\u8d21\u732e\u3002"}),"\n",(0,i.jsx)(e.p,{children:'Acegi \u5b89\u5168 2007 \u5e74\u5e95\u6b63\u5f0f\u6210\u4e3a\u4e86 Spring \u7ec4\u5408\u9879\u76ee\uff0c\u66f4\u540d\u4e3a"Spring Security"\u3002'}),"\n",(0,i.jsx)(e.h2,{id:"\u6d41\u7a0b\u4ecb\u7ecd",children:"\u6d41\u7a0b\u4ecb\u7ecd"}),"\n",(0,i.jsxs)(e.p,{children:["\u8981\u5bf9Web\u8d44\u6e90\u8fdb\u884c\u4fdd\u62a4\uff0c\u6700\u597d\u7684\u529e\u6cd5\u83ab\u8fc7\u4e8eFilter\r\n\u8981\u60f3\u5bf9\u65b9\u6cd5\u8c03\u7528\u8fdb\u884c\u4fdd\u62a4\uff0c\u6700\u597d\u7684\u529e\u6cd5\u83ab\u8fc7\u4e8e",(0,i.jsx)(e.a,{href:"https://so.csdn.net/so/search?q=AOP&spm=1001.2101.3001.7020",children:"AOP"}),"\u3002"]}),"\n",(0,i.jsx)(e.p,{children:"Spring Security\u8fdb\u884c\u8ba4\u8bc1\u548c\u9274\u6743\u7684\u65f6\u5019,\u5c31\u662f\u5229\u7528\u7684\u4e00\u7cfb\u5217\u7684Filter\u6765\u8fdb\u884c\u62e6\u622a\u7684\u3002"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://img-blog.csdnimg.cn/20201231155747261.png",alt:"img"})}),"\n",(0,i.jsxs)(e.p,{children:["\u5982\u56fe\u6240\u793a\uff0c\u4e00\u4e2a\u8bf7\u6c42\u60f3\u8981\u8bbf\u95ee\u5230API\u5c31\u4f1a\u4ece\u5de6\u5230\u53f3\u7ecf\u8fc7\u84dd\u7ebf\u6846\u91cc\u7684\u8fc7\u6ee4\u5668\uff0c\u5176\u4e2d",(0,i.jsx)(e.strong,{children:"\u7eff\u8272\u90e8\u5206\u662f\u8d1f\u8d23\u8ba4\u8bc1\u7684\u8fc7\u6ee4\u5668\uff0c\u84dd\u8272\u90e8\u5206\u662f\u8d1f\u8d23\u5f02\u5e38\u5904\u7406\uff0c\u6a59\u8272\u90e8\u5206\u5219\u662f\u8d1f\u8d23\u6388\u6743"}),"\u3002\u7ecf\u8fc7\u4e00\u7cfb\u5217\u62e6\u622a\u6700\u7ec8\u8bbf\u95ee\u5230\u6211\u4eec\u7684API\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u8fd9\u91cc\u9762\u6211\u4eec\u53ea\u9700\u8981\u91cd\u70b9\u5173\u6ce8\u4e24\u4e2a\u8fc7\u6ee4\u5668\u5373\u53ef\uff1a",(0,i.jsx)(e.code,{children:"UsernamePasswordAuthenticationFilter"}),"\u8d1f\u8d23\u767b\u5f55\u8ba4\u8bc1\uff0c",(0,i.jsx)(e.code,{children:"FilterSecurityInterceptor"}),"\u8d1f\u8d23\u6743\u9650\u6388\u6743\u3002"]}),"\n",(0,i.jsxs)(e.p,{children:["\u8bf4\u660e\uff1a",(0,i.jsx)(e.strong,{children:"Spring Security\u7684\u6838\u5fc3\u903b\u8f91\u5168\u5728\u8fd9\u4e00\u5957\u8fc7\u6ee4\u5668\u4e2d\uff0c\u8fc7\u6ee4\u5668\u91cc\u4f1a\u8c03\u7528\u5404\u79cd\u7ec4\u4ef6\u5b8c\u6210\u529f\u80fd\uff0c\u638c\u63e1\u4e86\u8fd9\u4e9b\u8fc7\u6ee4\u5668\u548c\u7ec4\u4ef6\u4f60\u5c31\u638c\u63e1\u4e86Spring Security"}),"\uff01\u8fd9\u4e2a\u6846\u67b6\u7684\u4f7f\u7528\u65b9\u5f0f\u5c31\u662f\u5bf9\u8fd9\u4e9b\u8fc7\u6ee4\u5668\u548c\u7ec4\u4ef6\u8fdb\u884c\u6269\u5c55\u3002"]}),"\n",(0,i.jsx)(e.h2,{id:"\u5feb\u901f\u5b9e\u8df5",children:"\u5feb\u901f\u5b9e\u8df5"}),"\n",(0,i.jsx)(e.h3,{id:"\u642d\u5efa\u6743\u9650\u6846\u67b6\u57fa\u672c\u9aa8\u67b6",children:"\u642d\u5efa\u6743\u9650\u6846\u67b6\u57fa\u672c\u9aa8\u67b6"}),"\n",(0,i.jsx)(e.p,{children:"1\u3001\u7ed9spring-security\u521b\u5efa\u5355\u72ec\u7684\u516c\u5171\u6a21\u5757"}),"\n",(0,i.jsx)(e.p,{children:"2\u3001\u5bfc\u5165\u76f8\u5173jar\u5305\uff0c\u5982\u679c\u662fmaven\u5de5\u7a0b\uff0c\u76f4\u63a5\u5f15\u5165"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"\x3c!-- Spring Security\u4f9d\u8d56 --\x3e\r\n<dependency>\r\n        <groupId>org.springframework.boot</groupId>\r\n        <artifactId>spring-boot-starter-security</artifactId>\r\n</dependency>\n"})}),"\n",(0,i.jsx)(e.p,{children:"\u8bf4\u660e\uff1a\u4f9d\u8d56\u5305\uff08spring-boot-starter-security\uff09\u5bfc\u5165\u540e\uff0cSpring Security\u5c31\u9ed8\u8ba4\u63d0\u4f9b\u4e86\u8bb8\u591a\u529f\u80fd\u5c06\u6574\u4e2a\u5e94\u7528\u7ed9\u4fdd\u62a4\u4e86\u8d77\u6765\uff1a"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u8981\u6c42\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u7528\u6237\u624d\u80fd\u4e0e\u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u4ea4\u4e92"}),"\n",(0,i.jsx)(e.li,{children:"\u521b\u5efa\u597d\u4e86\u9ed8\u8ba4\u767b\u5f55\u8868\u5355"}),"\n",(0,i.jsxs)(e.li,{children:["\u751f\u6210\u7528\u6237\u540d\u4e3a",(0,i.jsx)(e.code,{children:"user"}),"\u7684\u968f\u673a\u5bc6\u7801\u5e76\u6253\u5370\u5728\u63a7\u5236\u53f0\u4e0a"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"CSRF"}),"\u653b\u51fb\u9632\u62a4\u3001",(0,i.jsx)(e.code,{children:"Session Fixation"}),"\u653b\u51fb\u9632\u62a4"]}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"3\u3001\u5728\u9700\u8981\u4f7f\u7528\u6743\u9650\u6846\u67b6\u7684\u6a21\u5757\u5bfc\u5165\u4f9d\u8d56"}),"\n",(0,i.jsxs)(e.p,{children:["\u8fd9\u91cc\u4ee5\u533b\u9662\u9884\u7ea6\u6302\u53f7\u7cfb\u7edf\u7684order\u6a21\u5757\u4e3a\u4f8b\uff0c\u4ed3\u5e93\u5730\u5740\uff1a",(0,i.jsx)(e.a,{href:"https://github.com/Jachen99/yygh_parent",children:"https://github.com/Jachen99/yygh_parent"})]}),"\n",(0,i.jsx)(e.p,{children:"\u5bfc\u5165\u4f9d\u8d56\u5230service-order\u6a21\u5757"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"<dependency>\r\n\t<groupId>space.jachen</groupId>\r\n\t<artifactId>spring-security</artifactId>\r\n\t<version>1.0.1</version>\r\n</dependency>\n"})}),"\n",(0,i.jsx)(e.p,{children:"4\u3001\u542f\u52a8\u8be5order\u6a21\u5757\uff0c\u4f1a\u53d1\u73b0\u63a7\u5236\u53f0\u663e\u793aUsing generated security password"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"image-20230216104643176",src:n(5333).A+"",width:"1054",height:"248"})}),"\n",(0,i.jsx)(e.p,{children:"\u8bf4\u660e\u8be5\u6a21\u5757\u5df2\u7ecf\u88abspring security\u4fdd\u62a4\u3002"}),"\n",(0,i.jsx)(e.p,{children:"5\u3001\u6b64\u65f6\u6211\u4eec\u901a\u8fc7\u6d4f\u89c8\u5668\u53bb\u8bbf\u95ee\u8be5\u6a21\u5757\u4e0b\u7684api\u8def\u5f84\uff0c\u4f1a\u8fdb\u5165\u6846\u67b6\u81ea\u5e26\u7684\u767b\u5f55\u9875\u9762\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"image-20230216112805097",src:n(6162).A+"",width:"356",height:"163"})}),"\n",(0,i.jsx)(e.p,{children:"\u9ed8\u8ba4\u7528\u6237\u540d\u4e3auser\uff0c\u5bc6\u7801\u4e3a\u63a7\u5236\u53f0\u8f93\u51fa\u7684\u968f\u673a\u5bc6\u7801\uff0c\u8ba4\u8bc1\u6210\u529f\u540e\u624d\u53ef\u4ee5\u767b\u5f55\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"\u5b9e\u73b0\u7528\u6237\u8ba4\u8bc1\u529f\u80fd",children:"\u5b9e\u73b0\u7528\u6237\u8ba4\u8bc1\u529f\u80fd"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.em,{children:"\u76ee\u524d\uff0c\u6211\u4eec\u5df2\u7ecf\u5b9e\u73b0\u4e86\u81ea\u5e26\u7684\u767b\u5f55\u9875\u9762\u7684\u8bbf\u95ee\uff0c\u7528\u6237\u540d\u548c\u5bc6\u7801\u90fd\u6765\u81ea\u4e8e\u5185\u5b58\u3002\u90a3\u4e48\u8981\u8bbf\u95ee\u6765\u81ea\u4e8emysql\u3001redis\u751a\u81f3\u7684\u7528\u6237\u540d\u3001\u5bc6\u7801\u600e\u4e48\u529e\u5462\uff1f"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u52a0\u5bc6\u5668PasswordEncoder"}),"\n",(0,i.jsx)(e.li,{children:"\u7528\u6237\u5bf9\u8c61UserDetails"}),"\n",(0,i.jsx)(e.li,{children:"\u4e1a\u52a1\u5bf9\u8c61UserDetailsService"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u529f\u80fd1\uff1a\u81ea\u5e26\u767b\u5f55\u9875\u9762\uff0c\u8bbf\u95ee\u771f\u6b63\u7684\u6570\u636e\u5e93\uff0c\u9700\u8981\u505a\u4ec0\u4e48\uff1f"}),"\n",(0,i.jsx)(e.p,{children:"1\u3001\u8bbf\u95ee\u57fa\u4e8e\u5185\u5b58\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u4f7f\u7528\u7684\u662fInMeoryUserDetailsManager\uff08\u5b9e\u73b0\u4e86UserDetailsServer\uff09\uff0c\u6211\u4eec\u9700\u8981\u81ea\u5b9a\u4e49UserDetailsServer\u7684\u5b9e\u73b0\u7c7b\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'package space.jachen.yygh.order.security;\r\n\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\nimport org.springframework.security.core.userdetails.UserDetailsService;\r\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\r\nimport org.springframework.stereotype.Component;\r\nimport space.jachen.yygh.security.custom.CustomUser;\r\nimport space.jachen.yygh.user.PatientFeignClient;\r\nimport space.jachen.yygh.vo.user.LoginVo;\r\n\r\nimport javax.annotation.Resource;\r\nimport java.util.ArrayList;\r\nimport java.util.Collection;\r\n\r\n/**\r\n * @author JaChen\r\n * @date 2022/12/23 22:35\r\n */\r\n@Component\r\npublic class UserDetailsServiceImpl implements UserDetailsService {\r\n\r\n    @Resource\r\n    private PatientFeignClient userInfoFeignClient;\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String phone) throws UsernameNotFoundException {\r\n        LoginVo login = userInfoFeignClient.loginSecurity(phone);\r\n        if(login == null) {\r\n            throw new UsernameNotFoundException("\u7528\u6237\u540d\u4e0d\u5b58\u5728\uff01");\r\n        }\r\n        // \u8fd9\u91cc\u4e0d\u6bd4\u8f83\u5bc6\u7801 \uff0c\u540e\u9762\u901a\u8fc7PasswordEncoder\u6bd4\u8f83\r\n        // \u8fd4\u56de\u6570\u636e\u3001\u6682\u65f6\u4e0d\u505a\u6388\u6743\r\n        Collection<GrantedAuthority> authorities = new ArrayList<>();\r\n        return new CustomUser(login,authorities);\r\n    }\r\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:"2\u3001\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u65b9\u6cd5loadUserByUsername\uff0c\u8fd4\u56de\u503c\u4e3aUserdetails\uff0c\u5b83\u5c01\u88c5\u4e86\u4ece\u6570\u636e\u5e93\u4e2d\u8fd4\u56de\u7684\u7528\u6237\u4fe1\u606f\uff0c\u4f46\u662f\u548c\u6211\u4eec\u6570\u636e\u5e93\u8868\u4e0d\u4e00\u81f4\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u9700\u8981\u81ea\u5b9a\u4e49UserDetails\u5b9e\u73b0\u7c7b\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"package space.jachen.yygh.security.custom;\r\n\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.userdetails.User;\r\nimport space.jachen.yygh.vo.user.LoginVo;\r\n\r\nimport java.util.Collection;\r\n\r\n/**\r\n * \u8bbf\u95ee\u6570\u636e\u5e93\u7684\u65b9\u6cd5loadUserByUsername\uff0c\u8fd4\u56de\u503c\u4e3aUserdetails\uff0c\r\n * \u5b83\u5c01\u88c5\u4e86\u4ece\u6570\u636e\u5e93\u4e2d\u8fd4\u56de\u7684\u7528\u6237\u4fe1\u606f\uff0c\u4f46\u662f\u548c\u6211\u4eec\u6570\u636e\u5e93\u8868\u4e0d\u4e00\u81f4\uff0c\r\n * \u6240\u4ee5\u6211\u4eec\u8fd8\u9700\u8981\u81ea\u5b9a\u4e49UserDetails\u5b9e\u73b0\u7c7b\u3002\r\n *\r\n * @author JaChen\r\n * @date 2022/12/23 22:31\r\n */\r\n@Getter\r\n@Setter\r\npublic class CustomUser extends User {\r\n\r\n    /**\r\n     * \u6211\u4eec\u81ea\u5df1\u7684\u7528\u6237\u5b9e\u4f53\u5bf9\u8c61\uff0c\u8981\u8c03\u53d6\u7528\u6237\u4fe1\u606f\u65f6\u76f4\u63a5\u83b7\u53d6\u8fd9\u4e2a\u5b9e\u4f53\u5bf9\u8c61\r\n     */\r\n    private LoginVo loginVo;\r\n\r\n    /**\r\n     *\r\n     * @param loginVo  \u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u7684\u7528\u6237\u4fe1\u606f\r\n     * @param authorities  \u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u7684\u6743\u9650\r\n     */\r\n    public CustomUser(LoginVo loginVo,Collection<? extends GrantedAuthority> authorities) {\r\n        super(loginVo.getPhone(), loginVo.getCode(), authorities);\r\n        this.loginVo = loginVo;\r\n    }\r\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.em,{children:"\u73b0\u5728\u6570\u636e\u90fd\u6709\u4e86\uff0c\u6211\u4eec\u9700\u8981\u8fdb\u884c\u5bc6\u7801\u7684\u6bd4\u8f83\u3002"})}),"\n",(0,i.jsx)(e.p,{children:"3\u3001\u4f7f\u7528PasswordEncoder\u63a5\u53e3\uff0c\u4f46\u662f\u4e0d\u540c\u7684\u6570\u636e\u5e93\u91c7\u7528\u7684\u52a0\u5bc6\u7b97\u6cd5\u4e0d\u540c\uff0c\u8fd9\u91cc\u53ef\u4ee5\u4f7f\u7528security\u81ea\u5e26\u7684PasswordEncoder\u5b9e\u73b0\u7c7b\uff0c\u5982\u679c\u4e0d\u5408\u9002\uff0c\u5c31\u81ea\u5b9a\u4e49\u4e00\u4e0bPasswordEncoder\u7684\u5b9e\u73b0\u7c7b\u5373\u53ef\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'package space.jachen.yygh.security.custom;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.data.redis.core.StringRedisTemplate;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.stereotype.Component;\r\n\r\n/**\r\n *\r\n * \u81ea\u5b9a\u4e49\u5bc6\u7801\u7ec4\u4ef6 \u5bc6\u7801\u5904\u7406\r\n * \u6b64\u9879\u76ee\u4e0d\u9700\u8981md5\u52a0\u5bc6\u5904\u7406\r\n * \u4e0d\u9700\u8981\u5f00\u53d1\u8005\u81ea\u5df1\u8c03\u7528\u6b64\u7c7b\uff0cSpringSecurity\u6d41\u7a0b\u4e2d\u8fdb\u884c\u5bc6\u7801\u6bd4\u8f83\u65f6\u4f1a\u81ea\u52a8\u8c03\u7528\u3002\r\n *\r\n * @author JaChen\r\n * @date 2022/12/23 22:25\r\n */\r\n@Component  // \u5fc5\u987b\u6dfb\u52a0\u5230IOC ,SpringSecurity\u624d\u53ef\u4ee5\u4f7f\u7528\r\npublic class CustomPasswordEncoder implements PasswordEncoder {\r\n\r\n\r\n    @Autowired\r\n    private StringRedisTemplate stringRedisTemplate;\r\n\r\n    /**\r\n     * \u5982\u679c\u9700\u8981\u52a0\u5bc6\u8fdb\u884c\u52a0\u5bc6\u64cd\u4f5c\u540e\u8fd4\u56de\uff0c\u8fd9\u91cc\u4e0d\u9700\u8981\u5904\u7406\uff0c\r\n     * \u56e0\u4e3a\u672c\u9879\u76ee\u6ca1\u6709\u5bf9\u7528\u6237\u5bc6\u7801\u8fdb\u884c\u52a0\u5bc6\uff0c\r\n     * \u91c7\u7528\u7684\u662f\u624b\u673a\u53f7+\u9a8c\u8bc1\u7801\u7684\u65b9\u5f0f\u8fdb\u884c\u767b\u5f55\r\n     * \u9a8c\u8bc1\u7801\u5b58\u5728redis\u4e2d\uff0c\u4e3a\u4e86\u65b9\u4fbf\u6f14\u793a\uff0c\u7279\u5b9a\u6b64\u6761\u9a8c\u8bc1\u7801\u6c38\u4e0d\u8fc7\u671f\uff0c\u5f53\u4f5c\u5bc6\u7801\u4f7f\u7528\uff0c\r\n     *\r\n     * @param rawPassword  \u660e\u6587  \u7528\u6237\u8f93\u5165\u7684\u5bc6\u7801\r\n     * @return  \u5bc6\u6587\r\n     */\r\n    public String encode(CharSequence rawPassword) {\r\n        return rawPassword.toString();\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param rawPassword  \u7528\u6237\u8f93\u5165\u7684\u5bc6\u7801  \u53734\u4f4d\u9a8c\u8bc1\u7801\r\n     * @param encodedPassword  \u4eceredis\u4e2d\u67e5\u8be2\u51fa\u6765\u7684\u9a8c\u8bc1\u7801\r\n     * @return boolean\r\n     */\r\n    public boolean matches(CharSequence rawPassword, String encodedPassword) {\r\n        // \u5199\u6b7b\r\n        encodedPassword = stringRedisTemplate.opsForValue().get("13243922402");\r\n        return encodedPassword.equals(encode(encodedPassword));\r\n    }\r\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u5148\u6765\u770b\u770b\u6574\u4e2a\u8ba4\u8bc1\u7684\u6d41\u7a0b\u56fe\uff1a"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{alt:"image-20230216133620298",src:n(7411).A+"",width:"1067",height:"650"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.em,{children:"\u73b0\u5728\uff0c\u867d\u7136\u5df2\u7ecf\u5b9e\u73b0\u4e86\u5bf9\u771f\u5b9e\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u4f46\u662f\u8fd8\u662f\u4f7f\u7528\u81ea\u5e26\u7684\u767b\u5f55\u9875\u9762\uff0c\u90a3\u4e48\u600e\u4e48\u624d\u80fd\u901a\u8fc7\u524d\u7aef\u9879\u76ee\u7684\u771f\u5b9e\u7684\u7528\u6237\u767b\u5f55\u9875\u9762\u8bbf\u95ee\u5462\uff1f"})}),"\n",(0,i.jsx)(e.p,{children:"\u767b\u5f55\u6210\u529f\u540e\uff0c\u6bcf\u6b21\u8bbf\u95ee\u5176\u4ed6\u8d44\u6e90\u90fd\u8981\u5224\u65ad\u4e00\u4e0btoken\u662f\u5426\u6b63\u786e,\u5982\u679c\u6b63\u786e\u624d\u80fd\u8bbf\u95ee\uff0c\u5982\u679c\u4e0d\u6b63\u786e\u8fd4\u56de\u5f02\u5e38\u4fe1\u606f\u3002"}),"\n",(0,i.jsx)(e.p,{children:"4\u3001\u81ea\u5b9a\u4e49\u7528\u6237\u8ba4\u8bc1\u63a5\u53e3\uff08\u8fc7\u6ee4\u56681\uff09"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-xml",children:"// \u4e0d\u7528\u52a0Component\u6ce8\u89e3 \u4e0d\u9700\u8981\u52a0\u5165IOC  \u8fc7\u6ee4\u5668\u7531tomcat\u8fdb\u884c\u7ba1\u7406 \n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'package space.jachen.yygh.security.filter;\r\n\r\n/**\r\n * @author JaChen\r\n * @date 2022/12/23 22:45\r\n */\r\n\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport org.springframework.data.redis.core.RedisTemplate;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.Authentication;\r\nimport org.springframework.security.core.AuthenticationException;\r\nimport org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;\r\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\r\nimport space.jachen.yygh.common.result.JsonData;\r\nimport space.jachen.yygh.common.result.ResultCodeEnum;\r\nimport space.jachen.yygh.common.utils.JwtHelper;\r\nimport space.jachen.yygh.common.utils.ResponseUtil;\r\nimport space.jachen.yygh.security.custom.CustomUser;\r\nimport space.jachen.yygh.vo.user.LoginVo;\r\n\r\nimport javax.annotation.Resource;\r\nimport javax.servlet.FilterChain;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport java.io.IOException;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\n/**\r\n * <p>\r\n * \u767b\u5f55\u8fc7\u6ee4\u5668\uff0c\u7ee7\u627fUsernamePasswordAuthenticationFilter\uff0c\u5bf9\u7528\u6237\u540d\u5bc6\u7801\u8fdb\u884c\u767b\u5f55\u6821\u9a8c\r\n * </p>\r\n *\r\n */\r\npublic class TokenLoginFilter extends UsernamePasswordAuthenticationFilter {\r\n\r\n    @Resource\r\n    private RedisTemplate redisTemplate;\r\n    public TokenLoginFilter(AuthenticationManager authenticationManager,\r\n                            RedisTemplate redisTemplate ) {\r\n        //\u8bbe\u7f6e\u8ba4\u8bc1\u7ba1\u7406\u5668\r\n        this.setAuthenticationManager(authenticationManager);\r\n        //\u8bbe\u7f6e\u767b\u5f55\u7684\u5730\u5740\u548c\u8bf7\u6c42\u65b9\u5f0f\r\n        this.setRequiresAuthenticationRequestMatcher(\r\n                new AntPathRequestMatcher("/yygh/user/loginSecurity", "POST"));\r\n        this.redisTemplate = redisTemplate;\r\n    }\r\n\r\n    /**\r\n     * \u767b\u5f55\u8ba4\u8bc1\r\n     * \u8d70\u8fd9\u4e2a\u767b\u5f55\u8ba4\u8bc1\u6d41\u7a0b \u4e0d\u8d70\u539f\u5148\u7684\u767b\u5f55\u63a5\u53e3\u4e86\r\n     *\r\n     * @param req\r\n     * @param res\r\n     * @return\r\n     * @throws AuthenticationException\r\n     */\r\n    @Override\r\n    public Authentication attemptAuthentication(HttpServletRequest req, HttpServletResponse res)\r\n            throws AuthenticationException {\r\n        try {\r\n            // \u83b7\u53d6\u7528\u6237\u540d\u7684\u65b9\u6cd5  \u7b80\u5355\u5c01\u88c5\u65b9\u6cd5\r\n            LoginVo loginVo = new ObjectMapper().readValue(req.getInputStream(), LoginVo.class);\r\n            String pwd = (String) redisTemplate.opsForValue().get(loginVo.getPhone());\r\n            // \u5c06\u7528\u6237\u540d\u548c\u5bc6\u7801\u5c01\u88c5\u5230Authentication\r\n            Authentication authenticationToken =\r\n                    new UsernamePasswordAuthenticationToken(loginVo.getPhone(), pwd);\r\n            // \u8c03\u53d6getAuthenticationManager\u8ba4\u8bc1\r\n            return this.getAuthenticationManager().authenticate(authenticationToken);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \u767b\u5f55\u6210\u529f \u8ba4\u8bc1\u6210\u529f\u8c03\u7528\u7684\u65b9\u6cd5\r\n     *\r\n     * @param request\r\n     * @param response\r\n     * @param chain\r\n     * @param auth\r\n     * @throws IOException\r\n     * @throws ServletException\r\n     */\r\n    @Override\r\n    protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain,Authentication auth) throws IOException, ServletException {\r\n        // 1\u3001\u901a\u8fc7Authentication\u83b7\u53d6\u8ba4\u8bc1\u7684\u5bf9\u8c61\r\n        CustomUser customUser = (CustomUser) auth.getPrincipal();\r\n        // 2\u3001\u901a\u8fc7JwtHelper\u751f\u6210token\r\n        String token = JwtHelper.createToken(Long.parseLong(customUser.getLoginVo().getOpenid()), customUser.getLoginVo().getPhone());\r\n        // 3\u3001\u83b7\u53d6\u7528\u6237\u7684\u6743\u9650\r\n        // Collection<GrantedAuthority> authorities = customUser.getAuthorities();\r\n        // 4\u3001\u5c06\u6743\u9650\u4fdd\u5b58\u5230Redis\u4e2d\r\n        // redisTemplate.boundValueOps(customUser.getUsername()).set(authorities);\r\n\r\n        // 5\u3001\u4fdd\u5b58\u767b\u5f55\u65e5\u5fd7\r\n        // loginLogService.recordLoginLog(customUser.getUsername(), IpUtil.getIpAddress(request),1,"\u767b\u5f55\u6210\u529f");\r\n\r\n        // \u521b\u5efa\u4e00\u4e2aMap\r\n        Map<String, Object> map = new HashMap<>();\r\n        map.put("token", token);\r\n        // 6\u3001\u901a\u8fc7ResponseUtil\u5de5\u5177\u7c7b\u54cd\u5e94\u5230\u524d\u7aef\r\n        ResponseUtil.out(response, JsonData.ok(map));\r\n    }\r\n\r\n    /**\r\n     * \u767b\u5f55\u5931\u8d25\r\n     *\r\n     * @param request\r\n     * @param response\r\n     * @param e\r\n     * @throws IOException\r\n     * @throws ServletException\r\n     */\r\n    @Override\r\n    protected void unsuccessfulAuthentication(HttpServletRequest request, HttpServletResponse response, AuthenticationException e) throws IOException, ServletException {\r\n        if (e.getCause() instanceof RuntimeException){\r\n            ResponseUtil.out(response, JsonData.build(null,204,e.getMessage()));\r\n        }else {\r\n            ResponseUtil.out(response,JsonData.build(null, ResultCodeEnum.LOGIN_MOBLE_ERROR));\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"// \u5982\u679c\u60f3\u5728\u91cc\u9762\u52a0\u5165@Autowired  \u5219\u9700\u8981\u6dfb\u52a0\u914d\u7f6e\u7c7b\n"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'package space.jachen.yygh.security.config;\r\n\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.data.redis.core.RedisTemplate;\r\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.builders.WebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport space.jachen.yygh.security.filter.TokenLoginFilter;\r\n\r\nimport javax.annotation.Resource;\r\n\r\n/**\r\n * @author JaChen\r\n * @date 2022/12/23 22:24\r\n */\r\n@Configuration\r\n@EnableWebSecurity //@EnableWebSecurity\u662f\u5f00\u542fSpringSecurity\u7684\u9ed8\u8ba4\u884c\u4e3a\r\n@EnableGlobalMethodSecurity(prePostEnabled = true)//\u5f00\u542f\u6ce8\u89e3\u529f\u80fd\uff0c\u9ed8\u8ba4\u7981\u7528\u6ce8\u89e3\r\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n\r\n    @Resource\r\n    private RedisTemplate redisTemplate;\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        // \u8fd9\u662f\u914d\u7f6e\u7684\u5173\u952e\uff0c\u51b3\u5b9a\u54ea\u4e9b\u63a5\u53e3\u5f00\u542f\u9632\u62a4\uff0c\u54ea\u4e9b\u63a5\u53e3\u7ed5\u8fc7\u9632\u62a4\r\n        http\r\n                //\u5173\u95edcsrf\r\n                .csrf().disable()\r\n                // \u5f00\u542f\u8de8\u57df\u4ee5\u4fbf\u524d\u7aef\u8c03\u7528\u63a5\u53e3\r\n                .cors().and()\r\n                .authorizeRequests()\r\n                // \u6307\u5b9a\u67d0\u4e9b\u63a5\u53e3\u4e0d\u9700\u8981\u901a\u8fc7\u9a8c\u8bc1\u5373\u53ef\u8bbf\u95ee\u3002\u767b\u9646\u63a5\u53e3\u80af\u5b9a\u662f\u4e0d\u9700\u8981\u8ba4\u8bc1\u7684\r\n                .antMatchers("/yygh/user/login").permitAll()\r\n                // \u8fd9\u91cc\u610f\u601d\u662f\u5176\u5b83\u6240\u6709\u63a5\u53e3\u9700\u8981\u8ba4\u8bc1\u624d\u80fd\u8bbf\u95ee\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                //TokenAuthenticationFilter\u653e\u5230UsernamePasswordAuthenticationFilter\u7684\u524d\u9762\uff0c\r\n                // \u8fd9\u6837\u505a\u5c31\u662f\u4e3a\u4e86\u9664\u4e86\u767b\u5f55\u7684\u65f6\u5019\u53bb\u67e5\u8be2\u6570\u636e\u5e93\u5916\uff0c\u5176\u4ed6\u65f6\u5019\u90fd\u7528token\u8fdb\u884c\u8ba4\u8bc1\u3002\r\n//                .addFilterBefore(new TokenAuthenticationFilter(redisTemplate), UsernamePasswordAuthenticationFilter.class)\r\n                .addFilter(new TokenLoginFilter(authenticationManager(), redisTemplate));\r\n\r\n        //\u7981\u7528session\r\n        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n    }\r\n\r\n    /**\r\n     * \u914d\u7f6e\u54ea\u4e9b\u8bf7\u6c42\u4e0d\u62e6\u622a\r\n     * \u6392\u9664swagger\u76f8\u5173\u8bf7\u6c42\r\n     * @param web\r\n     * @throws Exception\r\n     */\r\n    @Override\r\n    public void configure(WebSecurity web) throws Exception {\r\n        web.ignoring().antMatchers("/favicon.ico","/swagger-resources/**", "/webjars/**", "/v2/**", "/swagger-ui.html/**", "/doc.html");\r\n    }\r\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:"5\u3001\u914d\u7f6e\u7528\u6237\u8ba4\u8bc1 \uff08\u8fc7\u6ee4\u56682\uff09"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'package space.jachen.yygh.security.filter;\r\n\r\n/**\r\n * @author JaChen\r\n * @date 2022/12/23 23:04\r\n */\r\n\r\nimport org.springframework.data.redis.core.RedisTemplate;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.util.StringUtils;\r\nimport org.springframework.web.filter.OncePerRequestFilter;\r\nimport space.jachen.yygh.common.result.JsonData;\r\nimport space.jachen.yygh.common.result.ResultCodeEnum;\r\nimport space.jachen.yygh.common.utils.JwtHelper;\r\nimport space.jachen.yygh.common.utils.ResponseUtil;\r\n\r\nimport javax.annotation.Resource;\r\nimport javax.servlet.FilterChain;\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport java.io.IOException;\r\nimport java.util.Collection;\r\n\r\n/**\r\n * <p>\r\n * \u8ba4\u8bc1\u89e3\u6790token\u8fc7\u6ee4\u5668\r\n * </p>\r\n */\r\npublic class TokenAuthenticationFilter extends OncePerRequestFilter {\r\n\r\n    @Resource\r\n    private RedisTemplate redisTemplate;\r\n\r\n    public TokenAuthenticationFilter(RedisTemplate redisTemplate) {\r\n        this.redisTemplate = redisTemplate;\r\n    }\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)throws IOException, ServletException {\r\n        logger.info("\u8ba4\u8bc1\u89e3\u6790token\u8fc7\u6ee4\u5668\u7684url:"+request.getRequestURI());\r\n        //\u5982\u679c\u662f\u767b\u5f55\u63a5\u53e3\uff0c\u76f4\u63a5\u653e\u884c\r\n        if("/yygh/user/login".equals(request.getRequestURI())) {\r\n            chain.doFilter(request, response);\r\n            return;\r\n        }\r\n\r\n        UsernamePasswordAuthenticationToken authentication = getAuthentication(request);\r\n        if(null != authentication) {\r\n            SecurityContextHolder.getContext().setAuthentication(authentication);\r\n            //\u653e\u884c\u8bf7\u6c42\r\n            chain.doFilter(request, response);\r\n        } else {\r\n            ResponseUtil.out(response, JsonData.build(null, ResultCodeEnum.PERMISSION));//209  \u6ca1\u6709\u6743\u9650\r\n        }\r\n    }\r\n\r\n    private UsernamePasswordAuthenticationToken getAuthentication(HttpServletRequest request) {\r\n        // token\u7f6e\u4e8eheader\u91cc\r\n        String token = request.getHeader("token");\r\n        logger.info("token:"+token);\r\n        if (!StringUtils.isEmpty(token)) {\r\n            String username = JwtHelper.getUserName(token);\r\n            logger.info("username:"+username);\r\n            if (!StringUtils.isEmpty(username)) {\r\n                //\u4eceRedis\u4e2d\u83b7\u53d6\u6743\u9650\r\n                Collection<GrantedAuthority> authorities = (Collection<GrantedAuthority>) redisTemplate.boundValueOps(username).get();\r\n                return new UsernamePasswordAuthenticationToken(username, null, authorities);\r\n                //\u8fd4\u56de\u4e00\u4e2a\u8ba4\u8bc1\u5bf9\u8c61\r\n                //return new UsernamePasswordAuthenticationToken(username, null, Collections.emptyList());\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:"\u73b0\u5728\u5c31\u53ef\u4ee5\u901a\u8fc7swagger\u6d4b\u8bd5\u767b\u5f55\u4e86\u3002"})]})}function u(r={}){const{wrapper:e}={...(0,s.R)(),...r.components};return e?(0,i.jsx)(e,{...r,children:(0,i.jsx)(l,{...r})}):l(r)}},5333:(r,e,n)=>{n.d(e,{A:()=>t});const t=n.p+"assets/images/image-20230216104643176-f4f96f5b1dc242b1cd0a8cbec3971064.png"},6162:(r,e,n)=>{n.d(e,{A:()=>t});const t="data:image/png;base64,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"},7411:(r,e,n)=>{n.d(e,{A:()=>t});const t=n.p+"assets/images/image-20230216133620298-5f63300eb8e0aa01307e67ad37ce956b.png"},8453:(r,e,n)=>{n.d(e,{R:()=>o,x:()=>a});var t=n(6540);const i={},s=t.createContext(i);function o(r){const e=t.useContext(s);return t.useMemo((function(){return"function"==typeof r?r(e):{...e,...r}}),[e,r])}function a(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(i):r.components||i:o(r.components),t.createElement(s.Provider,{value:e},r.children)}},2186:r=>{r.exports=JSON.parse('{"permalink":"/blog/product-spring-security-microservices","editUrl":"https://github.com/Jachen99/Jachen99.github.io/tree/V3.0.0/blog/2023/03-15-spring-security\u6574\u5408\u5fae\u670d\u52a1\u5b9e\u8df5.md","source":"@site/blog/2023/03-15-spring-security\u6574\u5408\u5fae\u670d\u52a1\u5b9e\u8df5.md","title":"spring-security\u6574\u5408\u5fae\u670d\u52a1\u5b9e\u8df5","description":"\u8d77\u56e0\uff1a\u968f\u7740\u8d8a\u6765\u8d8a\u591a\u7684\u4e1a\u52a1\u8f6c\u79fb\u5230\u4e92\u8054\u7f51\u4e0a\uff0c\u5b89\u5168\u6027\u5df2\u7ecf\u6210\u4e3a\u4efb\u4f55\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u7684\u91cd\u8981\u8003\u8651\u56e0\u7d20\u3002\u800c\u5728 Java \u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u4e2d\uff0cSpring Security \u662f\u4e00\u4e2a\u975e\u5e38\u6d41\u884c\u7684\u5b89\u5168\u6846\u67b6\uff0c\u53ef\u4ee5\u63d0\u4f9b\u53ef\u9760\u7684\u8eab\u4efd\u9a8c\u8bc1\u3001\u6388\u6743\u548c\u4f1a\u8bdd\u7ba1\u7406\u7b49\u5b89\u5168\u7279\u6027\u3002\u65e0\u8bba\u662f\u5f00\u53d1 Web \u5e94\u7528\u7a0b\u5e8f\u3001RESTful \u670d\u52a1\u3001\u5355\u9875\u5e94\u7528\u7a0b\u5e8f\u6216\u8005\u5176\u4ed6\u7c7b\u578b\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528 Spring Security \u6765\u4fdd\u62a4\u5e94\u7528\u7a0b\u5e8f\u7684\u5b89\u5168\u6027\u3002\u540c\u65f6\uff0cSpring Security \u8fd8\u5177\u6709\u975e\u5e38\u597d\u7684\u53ef\u6269\u5c55\u6027\uff0c\u53ef\u4ee5\u4e0e Spring \u751f\u6001\u7cfb\u7edf\u4e2d\u7684\u5176\u4ed6\u6846\u67b6\u548c\u5e93\u8fdb\u884c\u65e0\u7f1d\u96c6\u6210\uff0c\u4f7f\u5f00\u53d1\u4eba\u5458\u80fd\u591f\u6784\u5efa\u51fa\u590d\u6742\u7684\u3001\u9ad8\u5ea6\u53ef\u5b9a\u5236\u7684\u5b89\u5168\u89e3\u51b3\u65b9\u6848\u3002\u56e0\u6b64\uff0c\u4f7f\u7528 Spring Security \u662f\u4fdd\u969c\u5e94\u7528\u7a0b\u5e8f\u5b89\u5168\u7684\u4e0d\u4e8c\u9009\u62e9\u3002","date":"2023-03-15T00:00:00.000Z","tags":[{"inline":false,"label":"Spring Security","permalink":"/blog/tags/sentinel/spring-security","description":"\u5173\u4e8eSpring Security\u7684\u76f8\u5173\u5185\u5bb9"}],"readingTime":22.995,"hasTruncateMarker":false,"authors":[{"name":"\u5b63\u51a0\u81e3","title":"\u540e\u7aef\u7814\u53d1\u5de5\u7a0b\u5e08","url":"https://github.com/jachen99","page":{"permalink":"/blog/authors/jiguanchen"},"socials":{"github":"https://github.com/jachen99"},"imageURL":"https://github.com/jachen99.png","key":"jiguanchen"}],"frontMatter":{"slug":"product-spring-security-microservices","title":"spring-security\u6574\u5408\u5fae\u670d\u52a1\u5b9e\u8df5","authors":["jiguanchen"],"tags":["spring-security"]},"unlisted":false,"prevItem":{"title":"\u6d77\u91cf\u7528\u6237\u7528\u7535\u9700\u6c42\u5206\u6790\u9884\u6d4b\u7cfb\u7edf","permalink":"/blog/product-system-forecasting-electricity-demand"},"nextItem":{"title":"SQL\u4f18\u5316\u79ef\u7d2f\u7b14\u8bb0","permalink":"/blog/product-management-system"}}')}}]);