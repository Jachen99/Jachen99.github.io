<!doctype html>
<html lang="zh-Hans" dir="ltr" class="blog-wrapper blog-authors-posts-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.1">
<title data-rh="true">季冠臣 - 55 篇博文 | 软件一班季同学的世界</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://jachen99.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://jachen99.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://jachen99.github.io/blog/authors/jiguanchen"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" property="og:title" content="季冠臣 - 55 篇博文 | 软件一班季同学的世界"><meta data-rh="true" name="docusaurus_tag" content="blog_authors_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_authors_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://jachen99.github.io/blog/authors/jiguanchen"><link data-rh="true" rel="alternate" href="https://jachen99.github.io/blog/authors/jiguanchen" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://jachen99.github.io/blog/authors/jiguanchen" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://R5YDTJ851V-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="软件一班季同学的世界 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="软件一班季同学的世界 Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="软件一班季同学的世界" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.41e9b643.css">
<script src="/assets/js/runtime~main.ade9aa2a.js" defer="defer"></script>
<script src="/assets/js/main.66b94dfb.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">我的空间</b></a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索 (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div><a class="navbar__item navbar__link" href="/docs/category/一些有感">随笔</a><a class="navbar__item navbar__link" href="/blog/tags">博客</a><a href="https://github.com/Jachen99/Jachen99.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为暗黑模式）" aria-label="切换浅色/暗黑模式（当前为暗黑模式）" aria-live="polite" aria-pressed="true"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="最近博文导航"><div class="sidebarItemTitle_pO2u margin-bottom--md">所有文章</div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-docs-oss-integration">BI可视化平台集成OSS</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-tree-structure-construction">使用Java8新特性构建树形结构：灵活的父子节点关系处理</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-jasypt-nacos-config">SpringBoot集成Jasypt实现Nacos配置加密与解密</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-introduction-of-zero-copy-technology">探究零拷贝技术</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-nginx-reload">探究Nginx优雅reload的细节</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/advanced-data-processing-with-easyexcel">EasyExcel中的数据第一行获取问题及解决方案详解</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-design-and-optimization">Redis消息队列消费者端断连重试机制实现</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-security-system-exit-jwt-invalid">安全功能之系统退出后JWT令牌失效</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-security-testing-problems">第三方测试-系统安全测试问题之数据加密</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-xxl-job">xxl-job分布式调度实践</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2023</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-logic-delete">MongoDB实现逻辑删除</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-easyexcel">实用框架EasyExcel</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-spring-security-microservices">spring-security整合微服务实践</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-management-system">SQL优化积累笔记</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/mysql-CachesBuffers-reason">深入探究mysql8.x去掉CachesBuffers原因</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-Sentinel-flow-control">流量防卫兵-Sentinel</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-torna-smart-doc">smart-doc+Trona无侵入式API文档管理平台</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-ribbon">负载均衡之Ribbon实现</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-nacos-service-management">服务治理之Nacos</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2022</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/talk-about-redis-cache-exceptions-and-solutions">Redis缓存常见异常及解决方案</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/talk-about-redis-api">jedis实操redisAPI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/talk-about-SpringMVC-implementation-process">SpringMVC架构实现流程</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/talk-about-reduce-context-switch-overhead">减少切换上下文开销</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/talk-about-redis-persistence">RDB和AOF持久化小结</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/talk-about-transaction-isolation-levels">浅谈事务隔离级别</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/talk-https">浅谈https非对称加密</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/talk-about-equals-method">浅谈equals方法</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/talk-about-lock">悲观锁乐观锁小结</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2021</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/talk-about-fuben-information-group-interview">法本信息组面试题</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/talk-about-interview-questions">前端面试题</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2020</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-mysql8-0-linux">傻瓜式安装mysql8.0-Linux</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-Linux">Linux常用命令</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2019</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-java-jdk8-new-features">JDK8新特性</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-java-exception-finally-must-execute">异常处理中finally必执行</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-java-flow-control-statement">Java流程控制语句</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-DQL">DQL数据查询语言</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-ddl">DDL数据定义语言</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-DML">DML数据操纵语言</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-http-methods-and-status-codes">HTTP请求方法和响应状态码</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-http-header">HTTP请求头和响应头</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-http-content-type">HTTP的content-type媒体类型</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2018</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-servlet">Servlet</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-manager-guide">线程基础</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-iterator">迭代器Iterator</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-collections">集合工具类Collections</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-map">集合Map</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-set">集合Set</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-list">集合List</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-calculator">简单计算器</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-cannot-be-inherited">不能被继承</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-polymorphism">什么是多态</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/product-abstract-features">抽象的特点</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/productivity-exercise-3">练习题3</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/productivity-exercise-2">练习题2</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/productivity-exercise-1">练习题1</a></li></ul></div></nav></aside><main class="col col--7"><header class="margin-bottom--xl"><div class="avatar margin-bottom--sm author-as-h1_n9oJ"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><h1 class="authorName_yefp">季冠臣</h1></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div><a href="/blog/authors">View All Authors</a></header><hr><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-docs-oss-integration">BI可视化平台集成OSS</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-12-04T00:00:00.000Z">2024年12月4日</time> · <!-- -->阅读需 10 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="bi可视化平台集成oss">BI可视化平台集成OSS<a href="#bi可视化平台集成oss" class="hash-link" aria-label="BI可视化平台集成OSS的直接链接" title="BI可视化平台集成OSS的直接链接">​</a></h2>
<p>本技术文档基于开源项目 <a href="https://github.com/gcpaas/DataRoom" target="_blank" rel="noopener noreferrer">DataRoom</a> 进行修改和扩展。该项目提供了基础的文件管理功能，并集成了阿里云OSS（对象存储服务）。在此基础上，我们为 BI 可视化平台提供了文件上传、下载、删除、复制等操作的实现，并进行了相关的性能优化。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-技术实现">1. 技术实现<a href="#1-技术实现" class="hash-link" aria-label="1. 技术实现的直接链接" title="1. 技术实现的直接链接">​</a></h3>
<p>本系统通过集成阿里云OSS（对象存储服务）实现文件的上传、下载、删除、复制等操作。系统通过在配置文件中配置相关参数，完成与OSS的对接。以下是实现的主要功能：</p>
<ul>
<li><strong>文件上传</strong>：支持文件上传至阿里云OSS，文件支持自动重命名或保留原文件名。</li>
<li><strong>文件下载</strong>：支持下载OSS存储的文件，采用流式处理避免大文件内存溢出。</li>
<li><strong>文件删除</strong>：支持从OSS中删除指定文件。</li>
<li><strong>文件复制</strong>：支持复制文件到OSS中指定路径。</li>
<li><strong>文件权限设置</strong>：支持文件设置为公共可读，并设置过期时间。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-集成步骤">2. 集成步骤<a href="#2-集成步骤" class="hash-link" aria-label="2. 集成步骤的直接链接" title="2. 集成步骤的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="21-配置阿里云oss参数">2.1 配置阿里云OSS参数<a href="#21-配置阿里云oss参数" class="hash-link" aria-label="2.1 配置阿里云OSS参数的直接链接" title="2.1 配置阿里云OSS参数的直接链接">​</a></h4>
<p>首先，确保已在阿里云控制台创建了OSS Bucket，并获取了 <code>AccessKeyId</code> 和 <code>AccessKeySecret</code>。然后，在项目的 <code>application.yml</code> 或 <code>application.properties</code> 中配置OSS相关参数。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="配置示例">配置示例：<a href="#配置示例" class="hash-link" aria-label="配置示例：的直接链接" title="配置示例：的直接链接">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">gc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">starter</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">file</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">urlPrefix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//oss</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">cn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">beijing.aliyuncs.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> oss</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">oss</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//oss</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">cn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">beijing.aliyuncs.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">accessKeyId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token important">***</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 请替换为您的实际 AccessKeyId</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">accessKeySecret</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token important">***</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 请替换为您的实际 AccessKeySecret</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">pathPrefix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//tsingsoft.oss</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">cn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">beijing.aliyuncs.com</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">bucketName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token important">***</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">filePathPrefix</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> tsingsoft/bigScreen</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>注意事项：</strong></p>
<ul>
<li><code>pathPrefix</code> 由 <code>endpoint</code> 和 <code>bucketName</code> 组成，这是OSS默认的路径构建规则。</li>
<li>请确保 <code>accessKeyId</code> 和 <code>accessKeySecret</code> 不暴露在公共仓库中。</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="22-创建文件管理服务">2.2 创建文件管理服务<a href="#22-创建文件管理服务" class="hash-link" aria-label="2.2 创建文件管理服务的直接链接" title="2.2 创建文件管理服务的直接链接">​</a></h4>
<p>在项目中创建一个文件管理服务，负责与OSS进行交互，处理文件的上传、下载、删除、复制等操作。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="核心代码">核心代码：<a href="#核心代码" class="hash-link" aria-label="核心代码：的直接链接" title="核心代码：的直接链接">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package com.gccloud.dataroom.core.module.file.service;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.gccloud.dataroom.core.module.file.entity.DataRoomFileEntity;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.web.multipart.MultipartFile;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import javax.servlet.http.HttpServletRequest;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import javax.servlet.http.HttpServletResponse;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.io.InputStream;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 文件管理服务接口</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public interface IDataRoomOssService {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 上传文件，文件名重新生成</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param file 文件对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param entity 文件实体</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param response HTTP响应对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param request HTTP请求对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return 上传后的文件实体</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    DataRoomFileEntity upload(MultipartFile file, DataRoomFileEntity entity, HttpServletResponse response, HttpServletRequest request);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 上传文件，保留原文件名</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param inputStream 文件输入流</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param fileName 文件名</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param size 文件大小</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param entity 文件实体</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return 上传后的文件实体</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    DataRoomFileEntity upload(InputStream inputStream, String fileName, long size, DataRoomFileEntity entity);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 下载文件</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param fileId 文件ID</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param response HTTP响应对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param request HTTP请求对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    void download(String fileId, HttpServletResponse response, HttpServletRequest request);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 删除文件</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param fileId 文件ID</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    void delete(String fileId);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 复制文件</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param sourcePath 源路径</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param targetPath 目标路径</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return 复制后的文件路径</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    String copy(String sourcePath, String targetPath);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 获取文件输入流</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param newName 文件名</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return 文件输入流</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    InputStream getInputStream(String newName);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 检测URL是否可访问</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param urlString URL地址</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return true: 可访问，false: 不可访问</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    boolean isUrlAccessible(String urlString);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 设置文件为公共读，并设置过期时间</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param objectName 文件名</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param expireTimeInSeconds 过期时间（秒）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return 文件的访问地址</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    String setOssFilePublicReadWithExpiry(String objectName, int expireTimeInSeconds);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="23-文件下载和流处理优化">2.3 文件下载和流处理优化<a href="#23-文件下载和流处理优化" class="hash-link" aria-label="2.3 文件下载和流处理优化的直接链接" title="2.3 文件下载和流处理优化的直接链接">​</a></h4>
<p>为了避免暴露OSS文件的URL并优化性能，这里对文件下载部分进行了改进。通过使用并发批量下载文件，减少与OSS服务器的连接次数。下载时，文件内容将转换为Base64编码后返回前端，前端可以解码并展示。</p>
<p>以下是优化后的文件下载实现：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package com.gccloud.dataroom.core.utils;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.gccloud.dataroom.core.module.file.entity.DataRoomFileEntity;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.gccloud.dataroom.core.module.file.service.IDataRoomOssService;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.google.common.collect.Lists;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import lombok.extern.slf4j.Slf4j;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.apache.commons.lang3.StringUtils;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.io.*;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.net.URL;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.ArrayList;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.concurrent.*;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 批量文件下载器</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class FileDownloader {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private static final int THREAD_POOL_SIZE = 10;  // 设置线程池大小</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 批量下载文件，阻塞方式</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param ossFileService OSS文件服务对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param fileEntities 文件实体列表</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return 包含文件内容的字节数组列表</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static List&lt;byte[]&gt; downloadFileInParallel(IDataRoomOssService ossFileService, List&lt;DataRoomFileEntity&gt; fileEntities) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ExecutorService executorService = Executors.newFixedThreadPool(THREAD_POOL_SIZE);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        List&lt;Future&lt;byte[]&gt;&gt; futures = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 提交任务到线程池</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (DataRoomFileEntity fileEntity : fileEntities) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            futures.add(executorService.submit(() -&gt; downloadFile(ossFileService, fileEntity)));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 等待所有任务完成并收集文件内容</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        List&lt;byte[]&gt; fileContents = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (Future&lt;byte[]&gt; future : futures) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                fileContents.add(future.get());  // 阻塞，等待文件下载完成</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            } catch (InterruptedException | ExecutionException e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                log.error(&quot;下载文件失败&quot;, e);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                fileContents.add(new byte[0]);  // 如果下载失败，返回空字节数组</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        executorService.shutdown();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return fileContents;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 下载单个文件</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param ossFileService OSS文件服务对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param fileEntity 文件实体</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return 文件内容的字节数组</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static byte[] downloadFile(IDataRoomOssService ossFileService, DataRoomFileEntity fileEntity) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String fileUrl = fileEntity.getUrl();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (StringUtils.isBlank(fileUrl) || !ossFileService.isUrlAccessible(fileUrl)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            fileUrl = ossFileService.setOssFilePublicReadWithExpiry(fileEntity.getPath(), 3600);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        try (InputStream inputStream = new URL(fileUrl).openStream();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             ByteArrayOutputStream outputStream = new ByteArrayOutputStream()) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            byte[] buffer = new byte[8192];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            int bytesRead;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            while ((bytesRead = inputStream.read(buffer)) != -1) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                outputStream.write(buffer, 0, bytesRead);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return outputStream.toByteArray();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } catch (IOException e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            log.error(&quot;文件下载失败: {}&quot;, fileUrl, e);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return new byte[0];  // 下载失败时返回空字节数组</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="24-线程池工具类">2.4 线程池工具类<a href="#24-线程池工具类" class="hash-link" aria-label="2.4 线程池工具类的直接链接" title="2.4 线程池工具类的直接链接">​</a></h4>
<p>为提高系统性能，尤其是在处理文件上传、下载、复制等大量IO密集型操作时，合理地使用线程池能够有效减少系统的阻塞时间和响应时间。以下是线程池工具类的实现，提供了创建和管理线程池的功能。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package com.gccloud.dataroom.core.utils;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import lombok.extern.slf4j.Slf4j;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.jetbrains.annotations.NotNull;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.concurrent.*;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.concurrent.atomic.AtomicInteger;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 线程池工具类</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class ThreadPoolUtils {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 计算机核心数，设置线程池的默认参数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static final int POOL_SIZE = Runtime.getRuntime().availableProcessors() + 2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static final int POOL_SIZE_MAX = (Runtime.getRuntime().availableProcessors() + 2) * 2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private static final int AWAIT_TERMINATION_TIMEOUT = 10;  // 等待线程池关闭的最大时间（秒）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 获取默认线程池（核心线程数8，最大线程数16）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static ThreadPoolExecutor getDefaultThreadPoolExecutor() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return createThreadPoolExecutor(8, 16, 1000L, TimeUnit.MILLISECONDS);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 获取线程池实例，允许自定义核心线程</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">数和最大线程数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param corePoolSize 核心线程数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param maximumPoolSize 最大线程数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param keepAliveTime 线程空闲存活时间</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param unit 时间单位</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return ThreadPoolExecutor 线程池</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static ThreadPoolExecutor createThreadPoolExecutor(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ThreadFactory threadFactory = new ThreadFactory() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            private final AtomicInteger threadNumber = new AtomicInteger(1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            private final String namePrefix = &quot;pool-thread-&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            private final ThreadGroup group = Thread.currentThread().getThreadGroup();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            public Thread newThread(@NotNull Runnable r) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                Thread thread = new Thread(group, r, namePrefix + threadNumber.getAndIncrement(), 0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                thread.setDaemon(false);  // 设置为非守护线程</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                return thread;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return new ThreadPoolExecutor(corePoolSize, maximumPoolSize, keepAliveTime, unit,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                new LinkedBlockingQueue&lt;&gt;(), threadFactory, new ThreadPoolExecutor.CallerRunsPolicy());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 创建自适应线程池，核心线程数 = CPU 核心数 + 2，最大线程数 = 核心线程数 * 2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static ThreadPoolExecutor createFitThreadPoolExecutor() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return createThreadPoolExecutor(POOL_SIZE, POOL_SIZE_MAX, 1000L, TimeUnit.MILLISECONDS);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 初始化线程池，提供名称格式自定义</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param nameFormat 线程名称格式</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return 线程池实例</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static ExecutorService initPool(String nameFormat) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ThreadFactory threadFactory = new ThreadFactory() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            private final AtomicInteger threadNumber = new AtomicInteger(1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            private final String namePrefix = nameFormat;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            public Thread newThread(@NotNull Runnable r) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                Thread thread = new Thread(r, namePrefix + threadNumber.getAndIncrement());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                thread.setDaemon(false);  // 设置为非守护线程</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                return thread;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return new ThreadPoolExecutor(POOL_SIZE, POOL_SIZE, 0L, TimeUnit.MILLISECONDS,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                new LinkedBlockingQueue&lt;&gt;(Integer.MAX_VALUE), threadFactory, new ThreadPoolExecutor.CallerRunsPolicy());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 优雅关闭线程池</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param pool 线程池实例</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void shutdownPool(ExecutorService pool) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            pool.shutdown(); // 启动关闭</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (!pool.awaitTermination(AWAIT_TERMINATION_TIMEOUT, TimeUnit.SECONDS)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                log.warn(&quot;线程池关闭超时，强制关闭&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                pool.shutdownNow(); // 强制关闭</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            log.info(&quot;线程池成功关闭&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            log.error(&quot;线程池关闭中断: {}&quot;, e.getMessage());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            pool.shutdownNow(); // 如果等待中断则强制关闭线程池</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 获取线程池的监控信息</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param executor 线程池实例</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return 线程池的监控信息</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static String getThreadPoolStats(ThreadPoolExecutor executor) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        StringBuilder stats = new StringBuilder();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        stats.append(&quot;线程池状态：\n&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .append(&quot;核心线程数: &quot;).append(executor.getCorePoolSize()).append(&quot;\n&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .append(&quot;最大线程数: &quot;).append(executor.getMaximumPoolSize()).append(&quot;\n&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .append(&quot;活跃线程数: &quot;).append(executor.getActiveCount()).append(&quot;\n&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .append(&quot;当前线程数: &quot;).append(executor.getPoolSize()).append(&quot;\n&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .append(&quot;已完成任务数: &quot;).append(executor.getCompletedTaskCount()).append(&quot;\n&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .append(&quot;当前排队任务数: &quot;).append(executor.getQueue().size()).append(&quot;\n&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return stats.toString();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-总结">3. 总结<a href="#3-总结" class="hash-link" aria-label="3. 总结的直接链接" title="3. 总结的直接链接">​</a></h3>
<p>以上内容涵盖了在BI平台中集成OSS服务的相关功能，包括文件上传、下载、删除、复制以及使用线程池优化并发操作的实现。通过合理配置线程池和OSS参数，您可以有效提高系统的吞吐量并降低文件操作的延迟。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/oss">oss</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-tree-structure-construction">使用Java8新特性构建树形结构：灵活的父子节点关系处理</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-12-02T00:00:00.000Z">2024年12月2日</time> · <!-- -->阅读需 7 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p>在实际开发中，树形结构广泛应用于组织和表示层级化数据，如文件目录、菜单导航、组织架构等。Java 8 的流式 API 和函数式编程特性为处理这类问题提供了极大的便利。下面将分享如何使用 Java 8 中的 <code>Function</code> 和 <code>BiConsumer</code> 等新特性，构建树形结构并处理父子节点关系。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="项目背景">项目背景<a href="#项目背景" class="hash-link" aria-label="项目背景的直接链接" title="项目背景的直接链接">​</a></h3>
<p>在许多业务场景中，我们经常需要根据节点的父子关系来构建一个树形结构。例如，一个简单的交易信息模型可能包含多个交易节点，节点之间有父子关系。通过这种方式，我们可以快速实现层级结构，并对数据进行灵活操作。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="项目需求">项目需求<a href="#项目需求" class="hash-link" aria-label="项目需求的直接链接" title="项目需求的直接链接">​</a></h3>
<p>我们需要实现一个方法，将一组数据根据父子关系构建成树形结构。在树形结构中，父节点将包含所有子节点。我们使用 Java 8 提供的流式操作来实现这一功能，同时利用函数式接口，如 <code>Function</code> 和 <code>BiConsumer</code>，来提高代码的灵活性和可复用性。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="关键技术">关键技术<a href="#关键技术" class="hash-link" aria-label="关键技术的直接链接" title="关键技术的直接链接">​</a></h3>
<ol>
<li><strong>BiConsumer</strong>：接受两个参数并返回 <code>void</code>，我们用它来处理节点之间的父子关系，例如为父节点设置子节点。</li>
<li><strong>Function</strong>：接受一个输入参数并返回一个结果，用于从节点中获取 ID 和父 ID。</li>
<li><strong>Stream API</strong>：通过流式操作对数据进行过滤和处理，避免了传统的嵌套循环方式。</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="代码实现">代码实现<a href="#代码实现" class="hash-link" aria-label="代码实现的直接链接" title="代码实现的直接链接">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.ArrayList;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.Arrays;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.function.BiConsumer;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.function.Function;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.stream.Collectors;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 功能描述: </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 该类用于构建树形结构，基于给定的数据列表，将父子节点关系组织成层级化的树形结构。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 通过使用 Java 8 新特性，如 Function 和 BiConsumer，灵活地处理节点间的父子关系。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * -</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 创建人: 季冠臣</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 创建时间: 2024/12/2 15:38</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class TreeStructureTest {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 模拟的节点类</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    static class TradeInfo {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        private String tradeID;  // 当前节点ID</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        private String parentID; // 父节点ID</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        private List&lt;TradeInfo&gt; children;  // 子节点列表</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        public TradeInfo(String tradeID, String parentID) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            this.tradeID = tradeID;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            this.parentID = parentID;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            this.children = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Getter 和 Setter 方法</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        public String getTradeID() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return tradeID;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        public void setTradeID(String tradeID) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            this.tradeID = tradeID;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        public String getParentID() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return parentID;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        public void setParentID(String parentID) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            this.parentID = parentID;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        public List&lt;TradeInfo&gt; getChildren() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return children;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        public void setChildren(List&lt;TradeInfo&gt; children) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            this.children = children;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        public String toString() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return &quot;TradeInfo{&quot; +</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    &quot;tradeID=&#x27;&quot; + tradeID + &#x27;\&#x27;&#x27; +</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    &quot;, parentID=&#x27;&quot; + parentID + &#x27;\&#x27;&#x27; +</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    &quot;, children=&quot; + children +</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    &#x27;}&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 构建树形结构</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private static &lt;T, R&gt; List&lt;T&gt; buildTree(List&lt;T&gt; dataList, BiConsumer&lt;T, List&lt;T&gt;&gt; setChildF, Function&lt;T, R&gt; getIdF,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                            Function&lt;T, R&gt; getParentIdF, R rootParentId) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (dataList != null &amp;&amp; !dataList.isEmpty()) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            setChildCall(dataList, setChildF, getIdF, getParentIdF, rootParentId);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            dataList = dataList.stream()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    .filter(t -&gt; (rootParentId != null &amp;&amp; rootParentId.equals(getParentIdF.apply(t)))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            || (rootParentId == null &amp;&amp; getParentIdF.apply(t) == null))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    .collect(Collectors.toList());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return dataList;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 将子集放入父级</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private static &lt;T, R&gt; List&lt;T&gt; setChildCall(List&lt;T&gt; dataList, BiConsumer&lt;T, List&lt;T&gt;&gt; setChildF, Function&lt;T, R&gt; getIdF,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                               Function&lt;T, R&gt; getParentIdF, R parentId) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (dataList == null || dataList.isEmpty()) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return dataList;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        List&lt;T&gt; parentChild = dataList.stream()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .filter(t -&gt; parentId == null || (getParentIdF.apply(t) != null &amp;&amp; getParentIdF.apply(t).equals(parentId)))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .collect(Collectors.toList());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (T t : parentChild) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            setChildF.accept(t, setChildCall(dataList, setChildF, getIdF, getParentIdF, getIdF.apply(t)));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return parentChild;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 创建示例数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        List&lt;TradeInfo&gt; dataList = Arrays.asList(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                new TradeInfo(&quot;1&quot;, null),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                new TradeInfo(&quot;2&quot;, &quot;1&quot;),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                new TradeInfo(&quot;3&quot;, &quot;1&quot;),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                new TradeInfo(&quot;4&quot;, &quot;2&quot;),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                new TradeInfo(&quot;5&quot;, &quot;2&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        );</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 定义如何获取ID和父ID</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Function&lt;TradeInfo, String&gt; getIdF = TradeInfo::getTradeID;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Function&lt;TradeInfo, String&gt; getParentIdF = TradeInfo::getParentID;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 定义如何设置子节点</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        BiConsumer&lt;TradeInfo, List&lt;TradeInfo&gt;&gt; setChildF = TradeInfo::setChildren;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 构建树结构</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        List&lt;TradeInfo&gt; tree = buildTree(dataList, setChildF, getIdF, getParentIdF, null);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 输出结果</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;构建后的树形结构:&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        tree.forEach(System.out::println);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="代码解析">代码解析<a href="#代码解析" class="hash-link" aria-label="代码解析的直接链接" title="代码解析的直接链接">​</a></h3>
<ol>
<li><strong>TradeInfo 类</strong>：定义了一个简单的节点类，包含 <code>tradeID</code> 和 <code>parentID</code>，并通过 <code>children</code> 列表存储子节点。</li>
<li><strong>buildTree 方法</strong>：这是树形结构构建的核心方法。它通过递归将子节点设置到父节点，并根据父节点 ID 筛选出该层级的节点。</li>
<li><strong>setChildCall 方法</strong>：该方法实现了递归的核心逻辑，通过 <code>BiConsumer</code> 将子节点设置到父节点，构建树形结构。</li>
<li><strong>函数式接口</strong>：通过 <code>Function</code> 接口获取节点的 ID 和父 ID，通过 <code>BiConsumer</code> 设置子节点，实现了灵活的节点关系操作。</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="输出结果">输出结果<a href="#输出结果" class="hash-link" aria-label="输出结果的直接链接" title="输出结果的直接链接">​</a></h3>
<p>运行以上代码后，输出的树形结构将展示如下：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">构建后的树形结构:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">TradeInfo{tradeID=&#x27;1&#x27;, parentID=&#x27;null&#x27;, children=[TradeInfo{tradeID=&#x27;2&#x27;, parentID=&#x27;1&#x27;, children=[TradeInfo{tradeID=&#x27;4&#x27;, parentID=&#x27;2&#x27;, children=[]}, TradeInfo{tradeID=&#x27;5&#x27;, parentID=&#x27;2&#x27;, children=[]}]}, TradeInfo{tradeID=&#x27;3&#x27;, parentID=&#x27;1&#x27;, children=[]}]}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>如上所示，我们成功地将交易信息列表组织成了树形结构。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="小结">小结<a href="#小结" class="hash-link" aria-label="小结的直接链接" title="小结的直接链接">​</a></h3>
<p>通过 Java 8 的函数式编程特性，我们可以更加简洁、灵活地处理复杂的父子节点关系。这种方法不仅适用于树形结构的构建，还能够广泛应用于其他需要层级关系的数据处理场景。例如，在处理文件目录、组织架构、菜单层级等问题时，采用类似的方法将大大提高代码的可读性和可维护性。</p>
<blockquote>
<p>当然，在实际应用中，树形结构可能会更加复杂，涉及更多的业务逻辑。你可以根据自己的需求进行扩展和调整。希望本文能为你的开发工作提供一些启发！🚀</p>
</blockquote>
<hr></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/java">java</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-jasypt-nacos-config">SpringBoot集成Jasypt实现Nacos配置加密与解密</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-11-02T00:00:00.000Z">2024年11月2日</time> · <!-- -->阅读需 7 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p>本文介绍如何在Nacos中使用国密SM4算法对敏感信息进行加密，并在Spring Boot项目中解密这些配置项。使用Jasypt来集成加密库，并编写一个自定义的加密器，以实现配置项的加密和解密功能。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-集成jasypt加密库">1. 集成Jasypt加密库<a href="#1-集成jasypt加密库" class="hash-link" aria-label="1. 集成Jasypt加密库的直接链接" title="1. 集成Jasypt加密库的直接链接">​</a></h2>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="11将jasypt加密库集成到spring-boot项目中在pomxml文件中添加以下依赖">1.1、将Jasypt加密库集成到Spring Boot项目中。在pom.xml文件中添加以下依赖：<a href="#11将jasypt加密库集成到spring-boot项目中在pomxml文件中添加以下依赖" class="hash-link" aria-label="1.1、将Jasypt加密库集成到Spring Boot项目中。在pom.xml文件中添加以下依赖：的直接链接" title="1.1、将Jasypt加密库集成到Spring Boot项目中。在pom.xml文件中添加以下依赖：的直接链接">​</a></h5>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">com.github.ulisesbocchio</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">jasypt-spring-boot</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">version</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">3.0.4</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">version</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>注：需要引用高版本的3.0.4，避免影响系统性能，参考 <a href="https://www.jianshu.com/p/c02276987d46" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/c02276987d46</a></em></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="12在启动类上添加注解-enableencryptableproperties">1.2、在启动类上添加注解 @EnableEncryptableProperties<a href="#12在启动类上添加注解-enableencryptableproperties" class="hash-link" aria-label="1.2、在启动类上添加注解 @EnableEncryptableProperties的直接链接" title="1.2、在启动类上添加注解 @EnableEncryptableProperties的直接链接">​</a></h5>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-创建国密sm4加密工具类">2. 创建国密SM4加密工具类<a href="#2-创建国密sm4加密工具类" class="hash-link" aria-label="2. 创建国密SM4加密工具类的直接链接" title="2. 创建国密SM4加密工具类的直接链接">​</a></h2>
<p>创建国密SM4加密工具类，它将负责实际的加密和解密操作。已有工具所在目录 com.space.jiguanchen.utils.Sm4Utils ：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package com.space.jiguanchen.utils;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.bouncycastle.jce.provider.BouncyCastleProvider;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.bouncycastle.pqc.math.linearalgebra.ByteUtils;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import javax.crypto.Cipher;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import javax.crypto.KeyGenerator;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import javax.crypto.spec.SecretKeySpec;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.security.Key;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.security.SecureRandom;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.security.Security;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.Arrays;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @author jiguanchen</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Sm4Utils {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static final String ENCODING = &quot;UTF-8&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static final String ALGORIGTHM_NAME = &quot;SM4&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static final String ALGORITHM_NAME_ECB_PADDING = &quot;SM4/ECB/PKCS7Padding&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static final int DEFAULT_KEY_SIZE = 128;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static final String key=&quot;dhjashdasa26kl223jkwqe2ejwejwq&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public Sm4Utils() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    static {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Security.addProvider(new BouncyCastleProvider());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *  @Description:生成ecb暗号</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private static Cipher generateEcbCipher(String algorithmName, int mode, byte[] key) throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Cipher cipher = Cipher.getInstance(algorithmName,BouncyCastleProvider.PROVIDER_NAME);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Key sm4Key = new SecretKeySpec(key, ALGORIGTHM_NAME);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        cipher.init(mode, sm4Key);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return cipher;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *  @Description:自动生成密钥</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static byte[] generateKey() throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return generateKey(DEFAULT_KEY_SIZE);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static byte[] generateKey(int keySize) throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        KeyGenerator kg = KeyGenerator.getInstance(ALGORIGTHM_NAME, BouncyCastleProvider.PROVIDER_NAME);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        kg.init(keySize, new SecureRandom());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return kg.generateKey().getEncoded();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *  @Description:加密</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static String encryptEcb(String hexKey, String paramStr, String charset) throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String cipherText = &quot;&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (null != paramStr &amp;&amp; !&quot;&quot;.equals(paramStr)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            byte[] keyData = ByteUtils.fromHexString(hexKey);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            charset = charset.trim();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (charset.length() &lt;= 0) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                charset = ENCODING;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            byte[] srcData = paramStr.getBytes(charset);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            byte[] cipherArray = encrypt_Ecb_Padding(keyData, srcData);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            cipherText = ByteUtils.toHexString(cipherArray);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return cipherText;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *  @Description:加密模式之ecb</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static byte[] encrypt_Ecb_Padding(byte[] key, byte[] data) throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Cipher cipher = generateEcbCipher(ALGORITHM_NAME_ECB_PADDING, Cipher.ENCRYPT_MODE, key);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        byte[] bs = cipher.doFinal(data);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return bs;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *  @Description:sm4解密</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static String decryptEcb(String hexKey, String cipherText, String charset) throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String decryptStr = &quot;&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        byte[] keyData = ByteUtils.fromHexString(hexKey);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        byte[] cipherData = ByteUtils.fromHexString(cipherText);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        byte[] srcData = decrypt_Ecb_Padding(keyData, cipherData);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        charset = charset.trim();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (charset.length() &lt;= 0) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            charset = ENCODING;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        decryptStr = new String(srcData, charset);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return decryptStr;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *  @Description:解密</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static byte[] decrypt_Ecb_Padding(byte[] key, byte[] cipherText) throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Cipher cipher = generateEcbCipher(ALGORITHM_NAME_ECB_PADDING, Cipher.DECRYPT_MODE, key);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return cipher.doFinal(cipherText);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *  @Description:密码校验</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static boolean verifyEcb(String hexKey,String cipherText,String paramStr) throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        boolean flag = false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        byte[] keyData = ByteUtils.fromHexString(hexKey);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        byte[] cipherData = ByteUtils.fromHexString(cipherText);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        byte[] decryptData = decrypt_Ecb_Padding(keyData,cipherData);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        byte[] srcData = paramStr.getBytes(ENCODING);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        flag = Arrays.equals(decryptData,srcData);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return flag;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *  @Description:测试类</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // 自定义的32位16进制密钥</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            String key = &quot;dhjashdasa26kl223jkwqe2ejwejwq&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            String url = Sm4Utils.encryptEcb(key, &quot;jdbc:mysql://127.0.0.1:3306/demo?serverTimezone=GMT%2B8&quot;,ENCODING);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            String username = Sm4Utils.encryptEcb(key, &quot;root&quot;,ENCODING);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            String password = Sm4Utils.encryptEcb(key, &quot;root&quot;,ENCODING);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(url);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(username);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(password);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } catch (Exception e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            e.printStackTrace();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>Sm4Utils</code>类包含了国密SM4算法的加密和解密方法。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-创建自定义的jasypt加密器">3. 创建自定义的Jasypt加密器<a href="#3-创建自定义的jasypt加密器" class="hash-link" aria-label="3. 创建自定义的Jasypt加密器的直接链接" title="3. 创建自定义的Jasypt加密器的直接链接">​</a></h2>
<p>为了让Nacos使用我们自己的加密工具进行配置解密，我们需要创建一个自定义的Jasypt加密器。在项目中新建一个名为<code>JasyptStringEncryptor</code>的类，并让它实现jasypt提供的<code>StringEncryptor</code>接口，如下所示：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package com.space.jiguanchen.auth.config;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.space.jiguanchen.utils.Sm4Utils;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import lombok.extern.slf4j.Slf4j;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.jasypt.encryption.StringEncryptor;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.beans.factory.annotation.Value;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.stereotype.Component;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @author jiguanchen</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class JasyptStringEncryptor implements StringEncryptor {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Value(&quot;${my.jasyptEncryptor.enable:false}&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private boolean enable;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public String encrypt(String message) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        final String exMsg = String.format(&quot;encrypt method is not implemented, original message: &#x27;%s&#x27;.&quot;, message);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        log.error(exMsg);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        throw new UnsupportedOperationException(exMsg);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public String decrypt(String message) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String decryptedMessage = null;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (enable){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                decryptedMessage = Sm4Utils.decryptEcb(Sm4Utils.key,message,Sm4Utils.ENCODING);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                decryptedMessage=message;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            log.debug(&quot;---------------------------------------解密了: {} -----------------------------------&quot;,decryptedMessage);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } catch (Exception e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            log.error(&quot;decrypt failed:&quot;+message+&quot;-&quot;+ e);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return decryptedMessage;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在<code>JasyptStringEncryptor</code>中，我们注入了一个名为<code>enable</code>的属性，该属性用于控制加密功能是否启用。当<code>enable</code>为<code>true</code>时，我们使用我们自己的国密SM4工具对配置信息进行解密；当<code>enable</code>为<code>false</code>时，我们直接返回原始配置信息，即不进行解密操作。</p>
<p><em>注：如果自定义类名不是JasyptStringEncryptor，则需要在nacos上面添加配置：</em></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">jasypt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">encryptor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">## 实现jasypt加加密解密的类</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">bean</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> JasyptStringEncryptorDemo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-配置nacos使用自定义加密器">4. 配置Nacos使用自定义加密器<a href="#4-配置nacos使用自定义加密器" class="hash-link" aria-label="4. 配置Nacos使用自定义加密器的直接链接" title="4. 配置Nacos使用自定义加密器的直接链接">​</a></h2>
<p>最后，我们需要在Nacos配置文件中指定使用自定义的加密器。在<code>bootstrap.properties</code>或<code>bootstrap.yml</code>文件中添加以下配置：</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 启用自定义加密器</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">my</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">jasyptEncryptor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">enable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain">  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这里的<code>my.jasyptEncryptor.enable</code>属性的值设置为<code>true</code>，表示启用我们自己编写的加密逻辑，即使用国密SM4进行解密。如果要禁用加密功能，将其设置为<code>false</code>。</p>
<p>完成了以上步骤后，Nacos会在启动时自动加载并使用我们的自定义加密器，从而实现数据库配置的解密操作。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-加密配置项并放入nacos">5. 加密配置项并放入Nacos<a href="#5-加密配置项并放入nacos" class="hash-link" aria-label="5. 加密配置项并放入Nacos的直接链接" title="5. 加密配置项并放入Nacos的直接链接">​</a></h2>
<p>使用国密SM4加密工具类<code>Sm4Utils</code>来加密敏感配置项，例如数据库连接的url、username和password。在Sm4Utils的<code>main</code>方法中进行加密操作，得到加密后的配置项：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 自定义的32位16进制密钥</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String key = &quot;dhjashdasa26kl223jkwqe2ejwejwq&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String url = Sm4Utils.encryptEcb(key, &quot;jdbc:mysql://127.0.0.1:3306/demo?serverTimezone=GMT%2B8&quot;,ENCODING);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String username = Sm4Utils.encryptEcb(key, &quot;root&quot;,ENCODING);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String password = Sm4Utils.encryptEcb(key, &quot;root&quot;,ENCODING);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(url);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(username);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(password);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    } catch (Exception e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        e.printStackTrace();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>得到加密后的密文配置项，将它们作为值存放到Nacos中的配置项中：</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">url=ENC(opkdai32klsamnxa97b678f092c50e042f756371ef644de9dc4aa6318afa8a304a20b327ce84eb573ade0fb7336be9827cec08cd149f0c5380af4926f5219b7829edde1b4026d4229d30a86702851948164bc23af18a4797bae23f7833c2239ab3fd654dc234be37b2b3f31cbeae9e09eaf519a04a623d3c5795d23fa8fa3ce1c59eaf87c0af</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">username=ENC(dasjkdljasdjad23342mkljjlk)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">password=ENC(0298hsdajd328783jdsakjd212)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>重启服务，在Nacos启动时会被正确地解密并加载到Spring Boot项目中。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/安全">安全</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-introduction-of-zero-copy-technology">探究零拷贝技术</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-10-10T00:00:00.000Z">2024年10月10日</time> · <!-- -->阅读需 3 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><strong>背景</strong>：<em>RocketMQ是阿里团队研发并开源的消息中间件，它延续了kafka的很多优点，例如高性能，为了研究RocketMQ究竟是如何做到高性能的呢？零拷贝技术就是一个重要的原因。</em></p>
<p>高效原因：</p>
<ul>
<li>
<p>CommitLog顺序写, 存储了MessagBody、message key、tag等信息</p>
</li>
<li>
<p>ConsumeQueue随机读 + 操作系统的PageCache + 零拷贝技术ZeroCopy</p>
<ul>
<li>
<p>零拷贝技术</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">read(file, tmp_buf, len);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">write(socket, tmp_buf, len);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>例子：将一个File读取并发送出去（Linux有两个上下文，内核态，用户态）</p>
<ul>
<li>File文件的经历了4次copy<!-- -->
<ul>
<li>调用read,将文件拷贝到了kernel内核态</li>
<li>CPU控制 kernel态的数据copy到用户态</li>
<li>调用write时，user态下的内容 会copy到内核态的socket的buffer中</li>
<li>最后将内核态socket buffer的数据copy到网卡设备中传送</li>
</ul>
</li>
<li>缺点：增加了上下文切换、浪费了2次无效拷贝(即步骤2和3)</li>
</ul>
</li>
<li>
<p>ZeroCopy：</p>
<ul>
<li>请求kernel直接把disk的data传输给socket，而不是通过应用程序传输。Zero copy大大提高了应用程序的性能，减少不必要的内核缓冲区跟用户缓冲区间的拷贝，从而减少CPU的开销和减少了kernel和user模式的上下文切换，达到性能的提升</li>
<li>对应零拷贝技术有mmap及sendfile<!-- -->
<ul>
<li>mmap:小文件传输快<!-- -->
<ul>
<li>RocketMQ 选择这种方式，mmap+write 方式，小块数据传输，效果会比 sendfile 更好</li>
</ul>
</li>
<li>sendfile:大文件传输比mmap快</li>
</ul>
</li>
<li>Java中的TransferTo()实现了Zero-Copy</li>
<li>应用：Kafka、Netty、RocketMQ等都采用了零拷贝技术</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>原始的拷贝技术：</p>
<p><img decoding="async" loading="lazy" alt="image-20230128234721451" src="/assets/images/image-20230128234721451-dd4af67b7a2fa7c9784cf766e100dfae.png" width="805" height="562" class="img_ev3q"></p>
<p>零拷贝技术：</p>
<p><img decoding="async" loading="lazy" alt="image-20230128234745085" src="/assets/images/image-20230128234745085-207f8aae1e516506317e609e36e7f1d5.png" width="761" height="492" class="img_ev3q"></p>
<p>参考文章： <a href="https://github.com/0voice/linux_kernel_wiki/blob/main/%E6%96%87%E7%AB%A0/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/%E4%B8%80%E6%96%87%E5%B8%A6%E4%BD%A0%EF%BC%8C%E5%BD%BB%E5%BA%95%E4%BA%86%E8%A7%A3%EF%BC%8C%E9%9B%B6%E6%8B%B7%E8%B4%9DZero-Copy%E6%8A%80%E6%9C%AF.md" target="_blank" rel="noopener noreferrer">https://github.com/0voice/linux_kernel_wiki/blob/main/%E6%96%87%E7%AB%A0/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/%E4%B8%80%E6%96%87%E5%B8%A6%E4%BD%A0%EF%BC%8C%E5%BD%BB%E5%BA%95%E4%BA%86%E8%A7%A3%EF%BC%8C%E9%9B%B6%E6%8B%B7%E8%B4%9DZero-Copy%E6%8A%80%E6%9C%AF.md</a></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于RocketMQ的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/rocketmq">RocketMQ</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-nginx-reload">探究Nginx优雅reload的细节</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-10-02T00:00:00.000Z">2024年10月2日</time> · <!-- -->阅读需 6 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><strong>背景</strong>：<em>我们知道在Ngnix的conf配置文件之后,不能kill掉matser重新启动Ngnix服务器，而是需要执行 nginx -s reload命令，在 不停止服务始终在处理新的请求的同时把 nginx 的配置文件平滑的把旧的 nginx.conf 配置更新为新的 nginx.conf 配置。那么这是为什么呢？</em></p>
<p>这样一个功能对于 nginx 非常有必要，但是有时候我们会发现在执行 <code>nginx -s reload</code> 命令后，worker 子进程的数量会变多了，这是因为老的配置运行的 worker 进程长时间没有退出，当使用 stream 做四层反向代理的时候，可能这种场景会更多。</p>
<p>那么下面我们通过分析 nginx 的 reload 流程，来探究下 nginx 到底做了些什么？所谓优雅的退出和立即退出有什么区别？</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reload流程">reload流程<a href="#reload流程" class="hash-link" aria-label="reload流程的直接链接" title="reload流程的直接链接">​</a></h2>
<p><img decoding="async" loading="lazy" alt="image-20230129234025673" src="/assets/images/image-20230129234025673-408e9591c6b983445a857dc17ae854f4.png" width="867" height="594" class="img_ev3q"></p>
<p>第一步在修改好 nginx 的配置文件 nginx.conf 后，向 master 进程发送 HUP 信号，这实际上和我们在命令行执行 <code>nginx -s reload</code> 命令效果是一样的。</p>
<p>那么 master 进程在收到 HUP 信号以后，会在第二步检查我们的配置文件语法是否正确，也就是说我们并不一定非要在 nginx -s reload 前执行 nginx -t 检验下语法是否正确，因为在第二步 nginx 的 master 进程一定会执行这个步骤。</p>
<p>在 nginx 的配置语法全部正确以后，master 进程会打开新的监听端口，为什么要在 master 进程中打开新的监听端口？因为我们可能在 nginx.conf 中会引入新的例如 443 或者之前我们没有打开的的监听端口，而所有 worker 进程是 master 进程 的子进程，子进程会继承父进程所有已经打开的端口，这是 linux 操作系统定义的，所以第三步，我们 master 进程打开了可能引入的新的监听端口。</p>
<p>接下来 mster 进程会用新的 nginx.conf 配置文件来启动新的 worker 子进程，那么老的 worker 子进程会怎么样呢？</p>
<p>我们会在第五步在启动新的 worker 子进程以后，由 master 进程再向老 worker 子进程发送 QUIT 信号，QUIT 信号和 TERM，INT 信号是不一样的，QUIT 信号是请优雅地关闭子进程，这时候需要关注顺序，因为 nginx 需要保证平滑，所以要先启动新的 worker 子进程，再向老的 worker 子进程发送 QUIT 信号。</p>
<p>那么老的 master 子进程收到 QUIT 信号后，首先关闭监听句柄，也就是说这个时候新的连接只会到新的 worker 子进程，所以虽然他们之间有时间差，但是时间是非常快速的，那么关闭监听句柄后，处理完当前连接后就结束进程。</p>
<p>下面看 reload 不停机载入新配置的图示。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reload-不停机载入新配置">reload 不停机载入新配置<a href="#reload-不停机载入新配置" class="hash-link" aria-label="reload 不停机载入新配置的直接链接" title="reload 不停机载入新配置的直接链接">​</a></h2>
<p><img decoding="async" loading="lazy" alt="1356806-20191216111255642-526956790" src="/assets/images/1356806-20191216111255642-526956790-c3d6cf140a54e7b57d0e02248be04cb7.png" width="2016" height="1020" class="img_ev3q"></p>
<p>master 进程上原先有四个绿色的 worker 子进程，它们使用了老的配置，当我们更改了 nginx.conf 配置文件后，向 master 发送 SIGHUP 信号或者执行 reload 命令， 然后 master 会用新的配置文件启动四个新的黄色 worker 子进程，此时是四个老的绿色 worker 子进程和四个新的黄色的 worker 子进程是并存的。那么老的 worker 子进程在正常的情况下会在处理已经建立好的连接上的请求之后关闭这个连接，哪怕这个连接是 keeplive 请求也会正常关闭。</p>
<p>但是异常情况，如果有一些请求出现问题，客户端长时间无法处理，那么就会导致这个请求长时间停留在这个 worker 子进程当中，那么这个 worker 子进程会长时间存在，因为新的连接已经跑在黄色的 worker 子进程中，所以影响并不会很大，唯一会影响的就是绿色的 worker 子进程会长时间存在，但也只影响已存在的连接，不会影响新的连接。</p>
<p>我们有什么办法处理呢？在新版本中提供了一个新的配置 worker_shutdown_timeout，也就是说最长等待多长时间，这样 master 进程启动新的黄色 worker 进程之后，如果老的 worker 进程一直没有退出，时间到了之后会强制把老的 worker 进程退出掉。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a href="#总结" class="hash-link" aria-label="总结的直接链接" title="总结的直接链接">​</a></h2>
<p>本文主要讲解了 Nginx 平滑升级新的配置文件的流程，在我们了解了优雅关闭 worker 子进程和启动新配置的 worker 子进程流程间的关系后，我们可以更好地处理罕见的异常场景。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于Nginx的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/nginx">Nginx</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/advanced-data-processing-with-easyexcel">EasyExcel中的数据第一行获取问题及解决方案详解</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-07-09T00:00:00.000Z">2024年7月9日</time> · <!-- -->阅读需 8  分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="easyexcel中的数据第一行获取问题及解决方案详解">EasyExcel中的数据第一行获取问题及解决方案详解<a href="#easyexcel中的数据第一行获取问题及解决方案详解" class="hash-link" aria-label="EasyExcel中的数据第一行获取问题及解决方案详解的直接链接" title="EasyExcel中的数据第一行获取问题及解决方案详解的直接链接">​</a></h2>
<p>在Java开发中，处理Excel文件是一个常见的需求。EasyExcel作为一个流行的Excel操作库，提供了方便而高效的API来读写Excel文件。然而，有时会遇到数据第一行被误读为表头的问题，特别是在Excel文件的第一行不是标准表头而是实际数据时，这一问题显得尤为突出。本文将详细讨论这一问题的根本原因，并提供一种有效的解决方案。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-easyexcel简介">1. EasyExcel简介<a href="#1-easyexcel简介" class="hash-link" aria-label="1. EasyExcel简介的直接链接" title="1. EasyExcel简介的直接链接">​</a></h3>
<p>EasyExcel是阿里巴巴开源的一款Java操作Excel的工具库，它提供了强大的功能，支持大数据量的读写操作，并且提供了丰富的样式和格式处理功能，适用于各种场景下的Excel文件处理需求。你可以访问 EasyExcel 的官方 GitHub 页面获取更多的资料和下载： <a href="https://github.com/alibaba/easyexcel" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/easyexcel</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-问题描述">2. 问题描述<a href="#2-问题描述" class="hash-link" aria-label="2. 问题描述的直接链接" title="2. 问题描述的直接链接">​</a></h3>
<p>在使用EasyExcel读取Excel文件时，经常会出现第一行数据被错误地识别为表头的情况。这一问题的根本原因在于EasyExcel在某些情况下无法正确识别Excel文件中数据行和表头行的区分，特别是当Excel文件结构比较复杂或者存在特定格式时，EasyExcel的默认解析逻辑可能会出现偏差。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-解决方案详解">3. 解决方案详解<a href="#3-解决方案详解" class="hash-link" aria-label="3. 解决方案详解的直接链接" title="3. 解决方案详解的直接链接">​</a></h3>
<p>为了解决数据第一行获取问题，我们可以采取以下步骤来调整和优化EasyExcel的读取操作，确保能够正确获取实际数据行而非表头行：</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="方案1手动指定数据起始行">方案1：手动指定数据起始行<a href="#方案1手动指定数据起始行" class="hash-link" aria-label="方案1：手动指定数据起始行的直接链接" title="方案1：手动指定数据起始行的直接链接">​</a></h5>
<p>在读取Excel文件时，手动指定数据的起始行，而不依赖EasyExcel的自动识别。这可以通过设置<code>headRowNumber</code>来实现，明确告知EasyExcel从第几行开始读取数据。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ExcelReaderBuilder readBuilder = EasyExcel.read(inputStream, ExcelData.class, new ExcelDataListener())</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .sheet().headRowNumber(2) // 指定从第3行开始读取数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        .doRead();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在上述代码中，通过<code>headRowNumber(2)</code>指定从第3行开始读取数据，避免将第一行误读为表头。</p>
<p><strong>数据处理逻辑中排除表头行</strong></p>
<p>在实际数据处理逻辑中，可以通过逻辑判断排除表头行，确保只处理实际的数据行。例如，在<code>invoke</code>方法中可以添加逻辑判断：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Override </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public void invoke(ExcelData data, AnalysisContext context) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (context.readRowHolder().getRowIndex() &gt; 0) { // 跳过表头行</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 处理实际数据逻辑</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>通过<code>context.readRowHolder().getRowIndex() &gt; 0</code>判断当前行索引大于0时才处理数据，跳过表头行的处理。</p>
<p><strong>使用后处理器进行二次处理</strong></p>
<p>EasyExcel提供了后处理器（Handler）机制，在数据读取完成后可以进行二次处理。可以在<code>doAfterAllAnalysed</code>方法中对数据进行进一步处理或过滤，确保最终数据的准确性和完整性。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Override </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public void doAfterAllAnalysed(AnalysisContext context) { </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 数据处理完成后的逻辑 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    processData(dataList);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title=" 复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在上述代码中，可以在<code>doAfterAllAnalysed</code>方法中调用<code>processData</code>方法，对数据进行进一步的处理或者存储操作。</p>
<p><strong>示例代码</strong></p>
<p>以下是一个完整的示例代码，展示了如何使用EasyExcel读取Excel文件并处理数据，同时避免数据第一行被误读为表头的问题：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.alibaba.excel.EasyExcel;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.alibaba.excel.context.AnalysisContext;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.alibaba.excel.event.AnalysisEventListener;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.alibaba.excel.read.builder.ExcelReaderBuilder;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.io.FileInputStream;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.io.IOException;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.io.InputStream;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.ArrayList;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class ExcelReaderExample {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String fileName = &quot;path/to/your/excel/file.xlsx&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        InputStream inputStream = null;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            inputStream = new FileInputStream(fileName);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            ExcelReaderBuilder readBuilder = EasyExcel.read(inputStream, ExcelData.class, new ExcelDataListener());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            readBuilder.sheet().headRowNumber(2); // 指定从第3行开始读取数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            readBuilder.doRead();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } catch (IOException e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            e.printStackTrace();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } finally {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (inputStream != null) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    inputStream.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                } catch (IOException e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    e.printStackTrace();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static class ExcelDataListener extends AnalysisEventListener&lt;ExcelData&gt; {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        private List&lt;ExcelData&gt; dataList = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        public void invoke(ExcelData data, AnalysisContext context) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (context.readRowHolder().getRowIndex() &gt; 0) { // 跳过表头行</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                // 处理实际数据逻辑</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                dataList.add(data);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        public void doAfterAllAnalysed(AnalysisContext context) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // 数据处理完成后的逻辑</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            processData(dataList);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        private void processData(List&lt;ExcelData&gt; dataList) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // 处理  数据的具体逻辑</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            for (ExcelData data : dataList) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(data.toString());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static class ExcelData {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Excel中的数据字段对应的Java属性</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        private String column1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        private String column2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 省略getter和setter方法</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="方案2第一行数据读在表头单独处理">方案2：第一行数据读在表头单独处理<a href="#方案2第一行数据读在表头单独处理" class="hash-link" aria-label="方案2：第一行数据读在表头单独处理的直接链接" title="方案2：第一行数据读在表头单独处理的直接链接">​</a></h5>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@SneakyThrows</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public byte[] exportExcel(List&lt;String&gt; sheet1Ids, List&lt;String&gt; sheet2Ids, List&lt;String&gt; sheet3Ids, String startDate, String endDate) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    byte[] result;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 读取模版</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    try (ByteArrayOutputStream outputStream = new ByteArrayOutputStream();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         InputStream inputStream = templateFileService.getTemplateInputStreamByPath(dataComparisonFileResource.getPath())) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ExcelWriter excelWriter = EasyExcel.write(outputStream)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .withTemplate(inputStream)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .autoCloseStream(true)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .registerWriteHandler(new CustomSheet1CellWriteHandler())</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .build();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 写入表1 数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        List&lt;LfDispatchDataComparisonGridOperationVo&gt; sheet1Data = getGridOperationData(sheet1Ids, startDate, endDate);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.writerSheet1(excelWriter, sheet1Data);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 写入表2 数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        List&lt;LfDispatchDataComparisonGwEnergyVo&gt; sheet2Data = getGwEnergyData(sheet2Ids, startDate, endDate);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.writerSheet2(excelWriter, sheet2Data);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 写入表3 数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        List&lt;LfDispatchDataComparisonNewEnergyOperationVo&gt; sheet3Data = getNewEnergyOperationData(sheet3Ids, startDate, endDate);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.writerSheet3(excelWriter, sheet3Data);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 生成excel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        excelWriter.finish();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 确保所有内容都写入输出流中</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        result = outputStream.toByteArray();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return result;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 自定义sheet1的cell  样式 用于标记 负荷占比、电量占比 大于1的单元格</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public static class CustomSheet1CellWriteHandler implements WorkbookWriteHandler, CellWriteHandler {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 处理第一行数据 (easyExcel工具的bug 会将第一行数据读在表头)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param context 上下文</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void afterCellDispose(CellWriteHandlerContext context) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (context.getRowIndex() == 2 &amp;&amp; (context.getColumnIndex() == 14 || context.getColumnIndex() == 15)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // 处理第第一个sheet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Sheet sheet = context.getRow().getSheet().getWorkbook().getSheetAt(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Row row = sheet.getRow(2);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Cell cell14 = row.getCell(14);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Cell cell15 = row.getCell(15);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // 应用红色样式</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            applyRedStyleToCells(cell14, cell15);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 处理除了第一行以外的其他数据行</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param context 上下文</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void afterWorkbookDispose(WorkbookWriteHandlerContext context) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Workbook workbook = context.getWriteWorkbookHolder().getWorkbook();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 只处理 sheet1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Sheet sheet = workbook.getSheetAt(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        applyRedStyleToSheet(sheet);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 按列标记红色</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param sheet 工作表</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private void applyRedStyleToSheet(Sheet sheet) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (Row row : sheet) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            applyRedStyleToCells(row.getCell(14), row.getCell(15));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 对指定的单元格应用红色字体样式</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param cells 需要应用</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">红色样式的单元格</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private void applyRedStyleToCells(Cell... cells) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (Cell cell : cells) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (cell != null) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                Workbook workbook = cell.getSheet().getWorkbook();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                CellStyle redStyle = workbook.createCellStyle();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                Font redFont = workbook.createFont();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                redFont.setColor(IndexedColors.RED.getIndex());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                redStyle.setFont(redFont);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                cell.setCellStyle(redStyle);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-结论">5. 结论<a href="#5-结论" class="hash-link" aria-label="5. 结论的直接链接" title="5. 结论的直接链接">​</a></h3>
<p>我总结：建议不再使用EasyExcel工具。</p>
<hr></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于EasyExcel的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/easy-excel">EasyExcel</a></li><li class="tag_QGVx"><a title="关于数据处理相关的话题" class="tag_zVej tagRegular_sFm0" href="/blog/tags/data-processing">数据处理</a></li><li class="tag_QGVx"><a title="关于软件开发过程中的Bug" class="tag_zVej tagRegular_sFm0" href="/blog/tags/my-bug">我的Bug</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-design-and-optimization">Redis消息队列消费者端断连重试机制实现</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-05-08T00:00:00.000Z">2024年5月8日</time> · <!-- -->阅读需 9 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="redis消息队列消费者端断连重试机制实现">Redis消息队列消费者端断连重试机制实现<a href="#redis消息队列消费者端断连重试机制实现" class="hash-link" aria-label="Redis消息队列消费者端断连重试机制实现的直接链接" title="Redis消息队列消费者端断连重试机制实现的直接链接">​</a></h3>
<p>在分布式系统中，Redis作为消息队列使用时，经常会面临连接中断的风险，这可能由于网络波动、Redis服务崩溃或其他外部因素导致。为了保证系统的高可用性和消息的可靠性，我们需要实现一个自动重试机制，在Redis连接断开时能够自动重连，并保证消息的消费不中断或丢失。本文将重点介绍如何在Redis队列的消费者端实现连接断开后的重连机制。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-问题描述">1. 问题描述<a href="#1-问题描述" class="hash-link" aria-label="1. 问题描述的直接链接" title="1. 问题描述的直接链接">​</a></h2>
<p>在我们的架构中，消费者从Redis队列中拉取并处理消息，通常使用<code>Jedis</code>作为客户端与Redis交互。然而，在生产环境中，由于网络延迟、Redis服务重启或Redis连接池被耗尽等原因，Redis连接可能会出现断开。当连接断开时，消费者无法继续拉取消息，导致消息处理中断。</p>
<p>为了解决这个问题，我们需要设计一个重连机制：</p>
<ul>
<li><strong>自动检测连接状态</strong>：当消费者检测到连接断开时，能够自动重试并恢复连接。</li>
<li><strong>保证消息不丢失</strong>：在重连期间，如果Redis服务恢复，消息能够继续被消费，不会丢失。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-解决方案">2. 解决方案<a href="#2-解决方案" class="hash-link" aria-label="2. 解决方案的直接链接" title="2. 解决方案的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-消费者类的重试机制设计">2.1 消费者类的重试机制设计<a href="#21-消费者类的重试机制设计" class="hash-link" aria-label="2.1 消费者类的重试机制设计的直接链接" title="2.1 消费者类的重试机制设计的直接链接">​</a></h3>
<p>消费者类通过定时检查连接状态，并在Redis连接出现问题时尝试重连。我们通过引入一个标志位<code>isDown</code>来表示当前消费者是否处于断线状态。在连接恢复后，消费者能够自动恢复消息消费。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="关键代码实现">关键代码实现：<a href="#关键代码实现" class="hash-link" aria-label="关键代码实现：的直接链接" title="关键代码实现：的直接链接">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package com.example.redisQueue.consumer;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import lombok.extern.slf4j.Slf4j;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.beans.factory.annotation.Autowired;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.stereotype.Component;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.concurrent.Executors;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.concurrent.atomic.AtomicBoolean;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * Redis消息队列消费者断连重试机制实现</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class RedisQueueConsumerListenerRunner implements Runnable {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private MyAbstractRedisQueueConsumer&lt;?&gt; consumer;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 是否宕机标志</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 通过static保证全局共享该标志</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static AtomicBoolean isDown = new AtomicBoolean(false);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        log.info(&quot;消费者启动，开始监听Redis队列...&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 启动消息消费线程</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Executors.newSingleThreadExecutor().submit(() -&gt; {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                consumer.consume();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            } catch (Exception e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                log.error(&quot;消费过程中发生异常&quot;, e);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                isDown.set(true); // 设置断开标志</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 启动断线重试机制</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        startRetryMechanism();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 启动断连重试机制</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void startRetryMechanism() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        new Thread(() -&gt; {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            while (true) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    Thread.sleep(30 * 1000L);  // 每30秒检查一次连接状态</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    if (isDown.get()) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        log.warn(&quot;Redis连接断开，正在尝试重连...&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        Thread.sleep(3000L);  // 延迟3秒后重试</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        // 执行重连操作</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        consumer.reconnect();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        isDown.set(false);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        log.info(&quot;Redis连接恢复，重试成功&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    log.error(&quot;重试线程被中断&quot;, e);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    Thread.currentThread().interrupt();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }).start();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-消费者类的重连方法">2.2 消费者类的重连方法<a href="#22-消费者类的重连方法" class="hash-link" aria-label="2.2 消费者类的重连方法的直接链接" title="2.2 消费者类的重连方法的直接链接">​</a></h3>
<p>消费者类需要提供一个<code>reconnect</code>方法，用于在连接断开时重新初始化连接，恢复消费任务。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="关键代码实现-1">关键代码实现：<a href="#关键代码实现-1" class="hash-link" aria-label="关键代码实现：的直接链接" title="关键代码实现：的直接链接">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package com.example.redisQueue.consumer;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import redis.clients.jedis.Jedis;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import redis.clients.jedis.JedisPool;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.slf4j.Logger;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.slf4j.LoggerFactory;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * Redis消息队列消费者基类</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public abstract class MyAbstractRedisQueueConsumer&lt;T&gt; {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private Logger logger = LoggerFactory.getLogger(this.getClass());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private JedisPool jedisPool;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private String queueName;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public MyAbstractRedisQueueConsumer(String queueName) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.queueName = queueName;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 重连方法</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 用于连接断开后恢复连接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void reconnect() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        try (Jedis jedis = jedisPool.getResource()) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (jedis.isConnected()) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                logger.info(&quot;Redis连接已恢复，消费者已重新连接到队列&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            } else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                logger.error(&quot;无法恢复Redis连接，正在尝试重新初始化&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                // 这里可以进一步增加对Redis连接池或Jedis的重初始化逻辑</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } catch (Exception e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            logger.error(&quot;Redis重连失败&quot;, e);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 消费消息的抽象方法</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public abstract void doConsume(T message);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 消费消息</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void consume() throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        try (Jedis jedis = jedisPool.getResource()) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            while (true) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                // 从Redis队列中拉取消息</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                List&lt;String&gt; message = jedis.blpop(0, queueName);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                if (message != null &amp;&amp; message.size() &gt; 1) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    doConsume(message.get(1));  // 处理消息</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } catch (Exception e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            logger.error(&quot;消费过程中发生异常&quot;, e);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            throw e;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-线程池和重试机制的启动">2.3 线程池和重试机制的启动<a href="#23-线程池和重试机制的启动" class="hash-link" aria-label="2.3 线程池和重试机制的启动的直接链接" title="2.3 线程池和重试机制的启动的直接链接">​</a></h3>
<p>通过<code>Executors.newSingleThreadExecutor()</code>我们为消费者启动了独立的线程来消费消息，并在消费者检测到连接断开时启动重试机制。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Executors.newSingleThreadExecutor().submit(() -&gt; {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        consumer.consume();  // 启动消费</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    } catch (Exception e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        log.error(&quot;消费过程中发生异常&quot;, e);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        isDown.set(true);  // 设置断开标志</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="24-重试机制的检查和延迟">2.4 重试机制的检查和延迟<a href="#24-重试机制的检查和延迟" class="hash-link" aria-label="2.4 重试机制的检查和延迟的直接链接" title="2.4 重试机制的检查和延迟的直接链接">​</a></h3>
<p>在重试机制中，我们每30秒检查一次<code>isDown</code>标志，如果发现连接已经断开，就延迟3秒后尝试重新连接。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">if (isDown.get()) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    log.warn(&quot;Redis连接断开，正在尝试重连...&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Thread.sleep(3000L);  // 延迟3秒后重试</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    consumer.reconnect();  // 执行重连操作</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    isDown.set(false);     // 重连后清除断开标志</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    log.info(&quot;Redis连接恢复，重试成功&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-技术方案对比static-atomicboolean与替代方案">3. 技术方案对比：<code>static AtomicBoolean</code>与替代方案<a href="#3-技术方案对比static-atomicboolean与替代方案" class="hash-link" aria-label="3-技术方案对比static-atomicboolean与替代方案的直接链接" title="3-技术方案对比static-atomicboolean与替代方案的直接链接">​</a></h2>
<p>虽然<code>AtomicBoolean</code>是一种简单且有效的实现方式，但我们也可以考虑其他方案，以下是几种常见的替代方案对比。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="技术对比方案">技术对比方案<a href="#技术对比方案" class="hash-link" aria-label="技术对比方案的直接链接" title="技术对比方案的直接链接">​</a></h3>
<table><thead><tr><th>技术方案</th><th>优点</th><th>缺点</th><th>适用场景</th></tr></thead><tbody><tr><td><strong><code>static AtomicBoolean</code></strong></td><td>- 简单易用，线程安全&lt;br&gt;- 适用于单一线程或少数线程的全局状态控制</td><td>- 随着系统复杂度增加，可能变得不够灵活&lt;br&gt;- 共享全局状态可能导致问题</td><td>适合小型系统或少量线程的全局状态管理</td></tr><tr><td><strong><code>CountDownLatch</code></strong></td><td>- 可以灵活地控制多个线程同步&lt;br&gt;- 适合等待多个线程完成操作</td><td>- 一次性触发，无法重复使用</td><td>适合一次性控制多线程完成后进行重试操作</td></tr><tr><td><strong><code>ScheduledExecutorService</code></strong></td><td>- 定时检查，易于控制&lt;br&gt;- 支持定期任务</td><td>- 适合周期性任务，不适用于即时响应需求</td><td>适合定期检查重试的场景</td></tr><tr><td><strong><code>EventBus</code>（消息机制）</strong></td><td>- 松耦合，适合  分布式环境&lt;br&gt;- 可以广播事件通知其他模块</td><td>- 增加了系统复杂性，依赖额外的库</td><td>适合分布式或微服务架构的消息广播机制</td></tr><tr><td><strong><code>RetryTemplate</code></strong></td><td>- 灵活控制重试策略，如重试次数、间隔时间等&lt;br&gt;- 简化重试逻辑</td><td>- 引入外部依赖&lt;br&gt;- 配置和使用稍显复杂</td><td>适合需要复杂重试逻辑的场景</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a href="#总结" class="hash-link" aria-label="总结的直接链接" title="总结的直接链接">​</a></h3>
<ul>
<li><strong><code>static AtomicBoolean</code></strong>：适合小型系统，能够简单地控制全局状态。缺点是随着系统的复杂度增加，可能变得不够灵活，且状态管理可能存在问题。</li>
<li><strong><code>CountDownLatch</code></strong>：适合等待多个线程完成任务后进行统一操作，但无法多次触发，因此不适合需要持续重连的场景。</li>
<li><strong><code>ScheduledExecutorService</code></strong>：适合定期检查连接状态并进行重试的场景。简单易用，但适合周期性任务，不适合即时响应。</li>
<li><strong><code>EventBus</code></strong>：适合分布式系统中的事件驱动场景，可以实现松耦</li>
</ul>
<p>合的异步通知机制，但会引入额外的复杂性。</p>
<ul>
<li><strong><code>RetryTemplate</code></strong>：适合需要复杂重试策略的场景，能够灵活配置重试次数和间隔时间，但相对复杂。</li>
</ul>
<p>根据实际需求选择合适的方案，可以有效地提升系统的稳定性和可用性。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于Redis的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/redis">Redis</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-security-system-exit-jwt-invalid">安全功能之系统退出后JWT令牌失效</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-04-10T00:00:00.000Z">2024年4月10日</time> · <!-- -->阅读需 4 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>在现代Web应用中，用户退出系统是一个基本功能，然而，如何确保退出后的令牌不再有效，是系统安全性的一个关键问题。本文将介绍如何通过在用户退出时将JWT令牌加入黑名单，以及在后续请求中验证令牌的有效性，构建系统的双层安全机制，有效应对令牌滥用的风险。</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="背景">背景<a href="#背景" class="hash-link" aria-label="背景的直接链接" title="背景的直接链接">​</a></h2>
<p>Web应用中的用户认证一般依赖于JWT令牌，它是一种轻量级的身份验证方式。然而，一旦用户退出系统，之前的令牌理论上仍然是有效的，这可能导致一些潜在的安全问题。因此，我们需要一种机制来确保退出后的令牌不再被接受，提升系统的整体安全性。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="需求">需求<a href="#需求" class="hash-link" aria-label="需求的直接链接" title="需求的直接链接">​</a></h2>
<p>实现用户安全退出功能。
使退出后的JWT令牌失效，防止滥用。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="分析与设计">分析与设计<a href="#分析与设计" class="hash-link" aria-label="分析与设计的直接链接" title="分析与设计的直接链接">​</a></h2>
<p>为了满足上述需求，我们将采用以下方案：</p>
<p><strong>1、将JWT令牌加入黑名单：</strong>
在用户退出系统时，获取JWT令牌的ID。
将令牌ID存储到Redis中，构建黑名单。
设置与JWT令牌相同的失效时间，保证黑名单中的令牌会在一定时间后自动清理。</p>
<p><strong>2、验证JWT令牌的有效性：</strong>
在每次请求中，获取JWT令牌的Claims。
检查用户对象、Claims对象以及令牌ID是否不为空。
构建黑名单中的key，通过Redis验证令牌是否在黑名  单中。
如果在黑名单中，拒绝请求处理。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="核心代码">核心代码<a href="#核心代码" class="hash-link" aria-label="核心代码的直接链接" title="核心代码的直接链接">​</a></h2>
<p>将JWT令牌加入黑名单</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 新增将JWT令牌加入黑名单操作，并设置相同的失效时间</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Claims claims = SecureUtil.getClaims(Objects.requireNonNull(request));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if (ObjectUtil.isNotEmpty(claims)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Date expiration = claims.getExpiration();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    DateTime now = DateTime.now();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    long seconds = cn.hutool.core.date.DateUtil.between(now, expiration, DateUnit.SECOND);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    String id = claims.getId();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    String ExpIdKey = TokenConstant.EXP_ID + &quot;:&quot; + userId + &quot;:&quot; + id;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    redisTemplate.opsForValue().set(ExpIdKey, id);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    redisTemplate.expire(ExpIdKey, seconds, TimeUnit.SECONDS);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>验证JWT令牌是否有效</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 拦截器中 校验黑名单</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Claims claims = SecureUtil.getClaims(request);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if (user != null &amp;&amp; claims != null &amp;&amp; StringUtil.isNotEmpty(claims.getId())) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    String key = TokenConstant.EXP_ID + &quot;:&quot; + user.getUserId() + &quot;:&quot; + claims.getId();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    String jit = redisTemplate.opsForValue().get(key);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (claims.getId().equals(jit)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        log.debug(&quot;令牌已失效&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        failBack(resp);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="扩展">扩展<a href="#扩展" class="hash-link" aria-label="扩展的直接链接" title="扩展的直接链接">​</a></h2>
<p>通过这种双层安全机制，我们可以进一步扩展系统的安全性：</p>
<ul>
<li>定时任务清理过期令牌： 使用定时任务定期清理黑名单中的过期令牌，确保黑名单不会无限增长。</li>
<li>基于角色或权限的失效策略： 根据用户的角色或权限，实现更精细化的令牌失效策略。</li>
<li>结合双因素认证： 在令牌验证前加入双因素认证，提升系统的身份验证层级。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a href="#总结" class="hash-link" aria-label="总结的直接链接" title="总结的直接链接">​</a></h2>
<p>通过构建系统的双层安全机制，我们有效地  应对了用户退出后令牌的滥用风险。这种机制简单而强大，为Web应用提供了额外的安全保障，使用户退出更具安全性。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/安全">安全</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-security-testing-problems">第三方测试-系统安全测试问题之数据加密</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-03-01T00:00:00.000Z">2024年3月1日</time> · <!-- -->阅读需 15 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p>现在国内越来越重视系统安全，最近我们公司在做第三方测试过程中对系统安全、系统性能等做出了严格的要求，并进行了很大的整改，就从这篇文章开始总结一下最近三个月以及以后还会继续整改的涉及系统安全的相关测试漏洞的修改方案，相信这些问题会帮助到大家，尤其是比较大型的政府项目，对系统安全更加注重。</p>
<p><em>在互联网和新兴技术高速发展的今天，数据信息充斥在各行各业中，并发挥着重要的作用。然而，在享受信息化时代带来便利的同时，数据安全问题也成为大家关注的焦点。无论是从toG、toB、toC的各业务场景来看，还是从网络安全（CyberSecurity）的架构来看，数据安全（DataSecurity）都是一个主要的组成部分，而且在新兴技术日新月异的数据时代变得越来越重要，范围也越来越大。</em>
------- <em>引自 《数据安全架构设计与实战》</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="安全架构5a方法论"><strong>安全架构5A方法论</strong><a href="#安全架构5a方法论" class="hash-link" aria-label="安全架构5a方法论的直接链接" title="安全架构5a方法论的直接链接">​</a></h2>
<p>无论是进行产品的安全架构设计或评估，还是规划安全技术体系架构的时候，都有几个需要重点关注的逻辑模块，它们可以在逻辑上视为安全架构的核心元素。
以应用/产品为例，核心元素包括：
■ 身份认证（Authentication）：用户主体是谁？
■ 授权（Authorization）：授予某些用户主体允许或拒绝访问客体的权限。
■ 访问控制（Access Control）：控制措施以及是否放行的执行者。
■ 可审计（Auditable）：形成可供追溯的操作日志。
■ 资产保护（Asset Protection）：资产的保密性、完整性、可用性保障</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="关于数据安全方面"><strong>关于数据安全方面</strong><a href="#关于数据安全方面" class="hash-link" aria-label="关于数据安全方面的直接链接" title="关于数据安全方面的直接链接">​</a></h2>
<p>我们在测试过程中涉及到了对数据传输加密、数据存储加密、对称加密、非对称加密、SM2、SM3、SM4国密加密，CA证书等等</p>
<p><em><strong>什么是非对称加密呢？</strong></em></p>
<p>非对称加密是一种密码学技术，与传统的对称加密不同，它使用一对密钥来进行加密和解密操作，这对密钥分别称为公钥和私钥。这两个密钥是数学上相关联的，但却不能通过已知一个密钥来轻松地推导出另一个密钥。</p>
<p>我们可以想象一下，就像你有一把锁和一把钥匙，任何人都可以得到这把锁，但只有你有这把唯一的钥匙。任何人都可以使用这把锁将信息锁住，但只有你能够使用你的独特的钥匙来解锁这个信息。</p>
<ul>
<li>公钥： 就像是一个开放的锁，任何人都可以获得。它用于加密信息，只有拥有与之相关的私钥的人才能解密。</li>
<li>私钥： 这是与公钥相关联的唯一的解锁密钥，只有密钥的拥有者才能解密用公钥加密的信息。</li>
</ul>
<p>举例来说，考虑用户密码的存储问题。通过非对称加密的方式，可以将用户密码加密后写入数据库。当用户再次登录时，系统将客户端输入的明文密码使用相同的非对称加密方式加密，然后与数据库中的密文进行比对。这样的设计大大提高了安全性，即使数据库被攻击，攻击者也无法轻松获取用户的明文密码。
国密SM2加密方式就是非对称加密的。下面是国密SM2加密工具的源码：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/*椭圆曲线非对称加密算法*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class SM2Util {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static final String key_pubk= &quot;pub&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static final String key_prik= &quot;pri&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private static SM2 sm2 = SM2.instance();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	private static final String DEFAULT_PRIVATE_KEY = &quot;27cd96b1500f8330fc523e7c47ef02a&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	private static final String DEFAULT_PUBLIC_KEY = &quot;047ec86bb18f57714e6c5c72383c5b122&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	 * 生成公私钥</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	 * @return</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	 */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static Map&lt;String,String&gt; generateKeyPair() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Map&lt;String,String&gt; result = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        AsymmetricCipherKeyPair key = sm2.eccKeyPairGenerator.generateKeyPair();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        BigInteger privateKey = ((ECPrivateKeyParameters)key.getPrivate()).getD();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ECPoint publicKey = ((ECPublicKeyParameters)key.getPublic()).getQ();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String pubk = new String(Hex.encode(publicKey.getEncoded(false)), StandardCharsets.UTF_8);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String prik = new String(Hex.encode(privateKey.toByteArray()), StandardCharsets.UTF_8);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        result.put(key_pubk, pubk);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        result.put(key_prik, prik);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return result;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 获取默认公钥</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static String getDefaultPublicKey() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	return DEFAULT_PUBLIC_KEY;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 获取默认私钥</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static String getDefaultPrivateKey() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	return DEFAULT_PRIVATE_KEY;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 加密</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param publicKey</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    protected static byte[] encrypt(String data, byte[] publicKey) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	if (StringUtils.isBlank(data)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    		return null;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	SM2Cipher cipher = new SM2Cipher();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	// C1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	byte[] c1Bytes = new byte[65];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	ECPoint c1 = cipher.encryptInit(sm2, sm2.eccCurve.decodePoint(publicKey));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	c1Bytes = c1.getEncoded(false);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // C2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        byte[] c2Bytes = data.getBytes(StandardCharsets.UTF_8);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        cipher.encrypt(c2Bytes);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // C3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        byte[] c3Bytes = new byte[32];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        cipher.doFinal(c3Bytes);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        byte[] encryptData = new byte[c1Bytes.length + c2Bytes.length + c3Bytes.length];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		System.arraycopy(c1Bytes, 0, encryptData, 0, c1Bytes.length);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		System.arraycopy(c2Bytes, 0, encryptData, c1Bytes.length, c2Bytes.length);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		System.arraycopy(c3Bytes, 0, encryptData, c1Bytes.length + c2Bytes.length, c3Bytes.length);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return encryptData;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 加密</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param publicKey</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static byte[] encrypt(String data, String publicKey) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	return encrypt(data, HexUtil.hexToByte(publicKey));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 加密</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param publicKey</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static byte[] encrypt(byte[] data, String publicKey) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	return encrypt(new String(data, StandardCharsets.UTF_8), HexUtil.hexToByte(publicKey));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 加密</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param publicKey</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static String encryptToHexString(String data, String publicKey) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	return HexUtil.byteToHex(encrypt(data, HexUtil.hexToByte(publicKey)));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 加密</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param publicKey</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static String encryptToHexString(byte[] data, String publicKey) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	return HexUtil.byteToHex(encrypt(new String(data, StandardCharsets.UTF_8), HexUtil.hexToByte(publicKey)));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 解密</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param encryptedData</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param privateKey</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    protected static byte[] decrypt(byte[] encryptedData, byte[] privateKey) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	if (ArrayUtils.isEmpty(encryptedData)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    		return null;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	SM2Cipher cipher = new SM2Cipher();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // C1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        byte[] c1Bytes = new byte[65];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.arraycopy(encryptedData, 0, c1Bytes, 0, c1Bytes.length);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ECPoint c1 = sm2.eccCurve.decodePoint(c1Bytes).normalize();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // C3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        byte[] c3Bytes = new byte[32];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.arraycopy(encryptedData, encryptedData.length - 32, c3Bytes, 0, 32);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // C2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int c2Len = encryptedData.length - 65 - 32;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        byte[] c2Bytes = new byte[c2Len];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.arraycopy(encryptedData, 65, c2Bytes, 0, c2Len);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        cipher.decryptInit(new BigInteger(1, privateKey), c1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        cipher.decrypt(c2Bytes);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        cipher.doFinal(c3Bytes);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return c2Bytes;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 解密</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param encryptedData</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param privateKey</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static byte[] decrypt(byte[] encryptedData, String privateKey) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	return decrypt(encryptedData, HexUtil.hexToByte(privateKey));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 解密</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param encryptedData</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param privateKey</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static String decryptToString(byte[] encryptedData, String privateKey) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	return new String(decrypt(encryptedData, HexUtil.hexToByte(privateKey)), StandardCharsets.UTF_8);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 解密</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param encryptedData</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param privateKey</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static String decryptToString(String encryptedData, String privateKey) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    	return new String(decrypt(Hex.decode(encryptedData), HexUtil.hexToByte(privateKey)), StandardCharsets.UTF_8);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>此外，CA（Certificate Authority，证书颁发机构）机构通常也使用非对称加密的方式来确保数字证书的安全性。CA机构在数字证书颁发过程中起到了信任的中介角色，其操作基于公钥基础设施（PKI）。</p>
<p>下面是CA机构使用非对称加密的一般流程：</p>
<ol>
<li>证书请求： 实体（通常是个人或组织）向CA机构提交证书请求，请求包括实体的公钥和一些身份信息。</li>
<li>验证身份： CA机构对证书请求中的身份信息进行验证，确保请求者确实拥有所声明的身份。这可以通过一系列验证步骤来完成。</li>
<li>颁发数字证书： 验证通过后，CA机构使用自己的私钥对实体的公钥和身份信息进行签名，生成数字证书。这个签名过程就是使用非对称加密，其中CA的私钥用于签署证书信息。</li>
<li>证书分发： CA机构将生成的数字证书发送给请求者，同时可以将证书公开发布到公共目录中，以便其他人可以验证证书的真实性。</li>
<li>证书验证： 在通信过程中，当其他人需要验证实体的身份时，他们可以使用CA机构公开的公钥来验证数字证书的签名。如果验证通过，就可以信任该数字证书所附的公钥。</li>
</ol>
<p>非对称加密的优势在于它提供了更高的安全性。即使在公共环境下传输公钥，也无法通过公钥轻松计算出私钥。这使得非对称加密在安全地实现身份验证、数字签名和加密通信等场景中发挥重要作用。</p>
<p><em><strong>相对的，什么是对称加密呢？</strong></em></p>
<p>对称加密是一种加密算法，它使用相同的密钥同时进行数据的加密和解密。这意味着在对称加密中，使用加密和解密操作的相同密钥。对称加密算法在加密和解密的过程中都使用相同的密钥，因此密钥的保管和分发变得至关重要。
我们了解的国密SM4就是采用的对称加密的方式实现的，源码工具如下：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * （分组密码算法）国密对称加密算法</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public abstract class SM4Util {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	static {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Security.addProvider(new BouncyCastleProvider());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private static final Charset ENCODING = StandardCharsets.UTF_8;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static final String ALGORITHM_NAME = &quot;SM4&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 加密算法/分组加密模式/分组填充方式</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static final String ALGORITHM_NAME_ECB_PADDING = &quot;SM4/ECB/PKCS5Padding&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static final String ALGORITHM_NAME_CBC_PADDING = &quot;SM4/CBC/PKCS5Padding&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 128-32位16进制；256-64位16进制</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static final int DEFAULT_KEY_SIZE = 128;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static final String DEFAULT_KEY = &quot;86C63180C2806ED1F47B859DE501215B&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static final String DEFAULT_IV = &quot;8F5CB6272B594B53AD1A2197361378DC&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private static Cipher generateCipherECB(String algorithmName, int mode, byte[] key) throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Cipher cipher = Cipher.getInstance(algorithmName, BouncyCastleProvider.PROVIDER_NAME);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        cipher.init(mode, new SecretKeySpec(key, ALGORITHM_NAME));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return cipher;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private static Cipher generateCipherCBC(String algorithmName, int mode, byte[] key, byte[] iv) throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Cipher cipher = Cipher.getInstance(algorithmName, BouncyCastleProvider.PROVIDER_NAME);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        cipher.init(mode, new SecretKeySpec(key, ALGORITHM_NAME), new IvParameterSpec(iv));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return cipher;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static String generateKey() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			return HexUtil.byteToHex(generateKey(DEFAULT_KEY_SIZE));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		} catch (Exception e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			log.error(e.getMessage(), e);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return null;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static byte[] generateKey(int keySize) throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        KeyGenerator kg = KeyGenerator.getInstance(ALGORITHM_NAME, BouncyCastleProvider.PROVIDER_NAME);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        kg.init(keySize, new SecureRandom());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return kg.generateKey().getEncoded();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    protected static byte[] encryptECBPadding(byte[] data, byte[] key) throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Cipher cipher = generateCipherECB(ALGORITHM_NAME_ECB_PADDING, Cipher.ENCRYPT_MODE, key);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return cipher.doFinal(data);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	protected static byte[] decryptECBPadding(byte[] encrypted, byte[] key) throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	    Cipher cipher = generateCipherECB(ALGORITHM_NAME_ECB_PADDING, Cipher.DECRYPT_MODE, key);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	    return cipher.doFinal(encrypted);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    protected static byte[] encryptCBCPadding(byte[] data, byte[] key, byte[] iv) throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Cipher cipher = generateCipherCBC(ALGORITHM_NAME_CBC_PADDING, Cipher.ENCRYPT_MODE, key, iv);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return cipher.doFinal(data);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	protected static byte[] decryptCBCPadding(byte[] encrypted, byte[] key, byte[] iv) throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	    Cipher cipher = generateCipherCBC(ALGORITHM_NAME_CBC_PADDING, Cipher.DECRYPT_MODE, key, iv);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	    return cipher.doFinal(encrypted);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static String encrypt(String source) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return encrypt(source, DEFAULT_KEY);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static String encrypt(byte[] source) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return encrypt(source, DEFAULT_KEY);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static String encrypt(String source, String hexKey) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return encrypt(source.getBytes(ENCODING), hexKey);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static String encrypt(byte[] source, String hexKey) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        byte[] cipherArray;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			cipherArray = encryptECBPadding(source, ByteUtils.fromHexString(hexKey));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			return ByteUtils.toHexString(cipherArray);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		} catch (Exception e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			log.error(e.getMessage(), e);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return null;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static byte[] decrypt(String encrypted) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		return decrypt(encrypted, DEFAULT_KEY);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static String decryptToString(String encrypted) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		return decryptToString(encrypted, DEFAULT_KEY);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static String decryptToString(String encrypted, String hexKey) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		return new String(decrypt(encrypted, hexKey), ENCODING);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static byte[] decrypt(String encrypted, String hexKey) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			return decryptECBPadding(ByteUtils.fromHexString(encrypted), ByteUtils.fromHexString(hexKey));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		} catch (Exception e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			log.error(e.getMessage(), e);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		return encrypted.getBytes(StandardCharsets.UTF_8);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static String encrypt(String source, String hexKey, String iv) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return encrypt(source.getBytes(ENCODING), hexKey, iv);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static String encrypt(byte[] source, String hexKey, String iv) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        byte[] cipherArray;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			cipherArray = encryptCBCPadding(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">							source</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">							, ByteUtils.fromHexString(hexKey)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">							, ByteUtils.fromHexString(iv));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			return ByteUtils.toHexString(cipherArray);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		} catch (Exception e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			log.error(e.getMessage(), e);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			throw new RuntimeException(&quot;数据加密失败&quot;, e);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static String decryptToString(String encrypted, String hexKey, String iv) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		return new String(decrypt(encrypted, hexKey, iv), ENCODING);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static byte[] decrypt(String encrypted, String hexKey, String iv) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			if (StringUtils.isBlank(encrypted)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">				return new byte[] {};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			return decryptCBCPadding(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">				 	ByteUtils.fromHexString(encrypted)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">					, ByteUtils.fromHexString(hexKey)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">					, ByteUtils.fromHexString(iv));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		} catch (Exception e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			log.error(e.getMessage(), e);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		return encrypted.getBytes(StandardCharsets.UTF_8);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em><strong>相信你也一定听过国密SM3算法，它是对称加密还是非对称加密呢？</strong></em>
其实SM3是一种密码杂凑算法，用于生成消息的哈希值，主要用于数据完整性验证、数字签名等场景，而不是进行加密和解密操作。所以它既不是对称加密也不是非对称加密，它常常与SM2与SM4组合一起使用，可以把它看成一个随机数。
<em>例如：</em>
系统数据存储加密应采用SM3+SM4的实现方式。
系统数据传输加密应采用SM2+SM3的实现方式。</p>
<p><strong>总结</strong>
在系统安全测试中，我们通过采用多层加密算法、合理的安全架构设计以及严格的数据安全措施，提高了系统在身份认证、授权、访问控制、审计和资产保护等方面的安全性。这有助于在互联网和新兴技术时代中更好地处理数据安全问题，特别适用于大型政府项目等对安全性要求较高的场景。数据安全相关的知识属于另一个 领域了，知识点真是深不可测，还需要平时多学习，积累更多的知识储备才行。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/安全">安全</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-xxl-job">xxl-job分布式调度实践</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2024-02-14T00:00:00.000Z">2024年2月14日</time> · <!-- -->阅读需 16 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><strong>起因</strong>：<em>传统的定时任务Timer、Quartz等存在很多缺陷，不支持集群、不支持统计、没有管理的平台、也没有报警、监控等等。因此我们要使用分布式的调度系统，去填补这一系列缺陷，之前我们的系统用到了rabbitMQ消息队列去用于分布式任务调度、事件驱动等场景。通过RabbitMQ，任务调度系统可以将任务分发到多个节点，并获取任务执行结果。但是它也有弊端，就是没有一个完整的任务调度平台，不能很好的对任务执行情况进行监控和管理，所以最后选择了XXL-Job去升级医院系统的定时给就诊人发送消息等功能。</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="技术选型">技术选型<a href="#技术选型" class="hash-link" aria-label="技术选型的直接链接" title="技术选型的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="官方文档">官方文档<a href="#官方文档" class="hash-link" aria-label="官方文档的直接链接" title="官方文档的直接链接">​</a></h3>
<p>xxl-job：<a href="https://github.com/xuxueli/xxl-job" target="_blank" rel="noopener noreferrer">https://github.com/xuxueli/xxl-job</a></p>
<p>elastic-job：<a href="https://shardingsphere.apache.org/elasticjob/" target="_blank" rel="noopener noreferrer">https://shardingsphere.apache.org/elasticjob/</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="xxl-job-与--elastic-job对比图">XXL-JOB 与  elastic-job对比图<a href="#xxl-job-与--elastic-job对比图" class="hash-link" aria-label="XXL-JOB 与  elastic-job对比图的直接链接" title="XXL-JOB 与  elastic-job对比图的直接链接">​</a></h3>
<table><thead><tr><th>对比项</th><th>XXL-JOB</th><th>elastic-job</th></tr></thead><tbody><tr><td>并行调度</td><td>调度系统多线程并行</td><td>任务分片的方式并行</td></tr><tr><td>弹性扩容</td><td>使用Quartz基于数据库分布式功能</td><td>通过zookeeper保证</td></tr><tr><td>高可用</td><td>通过DB锁保证</td><td>通过zookeeper保证</td></tr><tr><td>阻塞策略</td><td>单机串行/丢弃后续的调度/覆盖之前的调度</td><td>执行超过zookeeper的session timeout时间的话，会被清除，重新进行分片</td></tr><tr><td>动态分片策略</td><td>以执行器为维度进行分片、支持动态的扩容</td><td>平均分配/作业名hash分配/自定义策略</td></tr><tr><td>失败处理策略</td><td>失败告警/失败重试</td><td>执行完毕后主动获取未分配分片任务 服务器下线后主动寻找可以用的服务器执行任务</td></tr><tr><td>监控</td><td>支持</td><td>支持</td></tr><tr><td>日志</td><td>支持</td><td>支持</td></tr></tbody></table>
<ul>
<li>XXL-Job和Elastic-Job都具有广泛的用户基础和完善的技术文档，都可以满足定时任务的基本功能需求</li>
<li>xxl-job侧重在业务实现简单和管理方便，容易学习，失败与路由策略丰富, 推荐使用在用户基数相对较少，服务器的数量在一定的范围内的场景下使用</li>
<li>elastic-job关注的点在数据，添加了弹性扩容和数据分片的思路，更方便利用分布式服务器的资源, 但是学习难度较大，推荐在数据量庞大，服务器数量多的时候使用</li>
</ul>
<p><em>综合考虑，最后我们选择了xxl-job这一解决方法，下面是一个小demo，用于整合xxl-job到spring微服务项目中得以应用的最佳实践。</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="简介">简介<a href="#简介" class="hash-link" aria-label="简介的直接链接" title="简介的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="什么是xxl-job">什么是XXL-Job<a href="#什么是xxl-job" class="hash-link" aria-label="什么是XXL-Job的直接链接" title="什么是XXL-Job的直接链接">​</a></h3>
<ul>
<li>XXL-JOB<!-- -->
<ul>
<li>大众  点评的员工徐雪里在15年发布的分布式任务调度平台，是轻量级的分布式任务调度框架，目标是开发迅速、简单、清理、易扩展; 老版本是依赖quartz的定时任务触发，在v2.1.0版本开始 移除quartz依赖</li>
<li>官网地址：<a href="https://www.xuxueli.com/xxl-job/" target="_blank" rel="noopener noreferrer">https://www.xuxueli.com/xxl-job/</a></li>
<li>GitHub地址：<a href="https://github.com/xuxueli/xxl-job/" target="_blank" rel="noopener noreferrer">https://github.com/xuxueli/xxl-job/</a></li>
</ul>
</li>
<li>xxl-job的设计思想<!-- -->
<ul>
<li>将调度行为抽象形成“调度中心”公共平台，而平台自身并不承担业务逻辑，“调度中心”负责发起调度请求。</li>
<li>将任务抽象成分散的JobHandler，交由“执行器”统一管理</li>
<li>“执行器”负责接收调度请求并执行对应的JobHandler中业务逻辑。</li>
<li>因此，“调度”和“任务”两部分可以相互解耦，提高系统整体稳定性和扩展性</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="官网架构图">官网架构图<a href="#官网架构图" class="hash-link" aria-label="官网架构图的直接链接" title="官网架构图的直接链接">​</a></h3>
<ul>
<li>调度中心<!-- -->
<ul>
<li>负责管理调度的信息，按照调度的配置来发出调度请求</li>
<li>支持可视化、简单的动态管理调度信息，包括新建、删除、更新等，这些操作都会实时生效，同时也支持监控调度结果以及执行日志。</li>
</ul>
</li>
<li>执行器<!-- -->
<ul>
<li>负责接收请求并且执行任务的逻辑。任务模块专注于任务的执行操作等等，使得开发和维护更加的简单与高效</li>
</ul>
</li>
</ul>
<p><img decoding="async" loading="lazy" src="https://file.xdclass.net/note/2022/81-XXL-JOB/img/image-20220519181542821.png" alt="image-20220519181542821" class="img_ev3q"></p>
<ul>
<li>XXL-Job具有哪些特性<!-- -->
<ul>
<li>调度中心HA（中心式）：调度采用了中心式进行设计，“调度中心”支持集群部署，可保证调度中心HA</li>
<li>执行器HA（分布式）：任务分布式的执行，任务执行器支持集群部署，可保证任务执行HA</li>
<li>触发策略：有Cron触发、固定间隔触发、固定延时触发、API事件触发、人工触发、父子任务触发</li>
<li>路由策略：执行器在集群部署的时候提供了丰富的路由策略，如：第一个、最后一个、轮询、随机、一致性HASH、最不经常使用LFU、最久未使用LRU、故障转移等等</li>
<li>故障转移：如果执行器集群的一台机器发生故障，会自动切换到一台正常的执行器发送任务调度</li>
<li>Rolling实时日志的监控：支持rolling方式查看输入的完整执行日志</li>
<li>脚本任务：支持GLUE模式开发和运行脚本任务，包括Shell、python、node.js、php等等类型脚本</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="快速部署">快速部署<a href="#快速部署" class="hash-link" aria-label="快速部署的直接链接" title="快速部署的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="流程图">流程图：<a href="#流程图" class="hash-link" aria-label="流程图：的直接链接" title="流程图：的直接链接">​</a></h3>
<p><img decoding="async" loading="lazy" alt="image-20230214195315186" src="/assets/images/image-20230214195315186-428690aea674f569b2ab260bae532441.png" width="838" height="707" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="环境">环境：<a href="#环境" class="hash-link" aria-label="环境：的直接链接" title="环境：的直接链接">​</a></h3>
<p>Maven3+、jdk1.8+、mysql5.7+</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="下载链接">下载链接：<a href="#下载链接" class="hash-link" aria-label="下载链接：的直接链接" title="下载链接：的直接链接">​</a></h3>
<p><a href="https://github.com/xuxueli/xxl-job.git" target="_blank" rel="noopener noreferrer">https://github.com/xuxueli/xxl-job.git</a>  版本：2.3.0</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="运行数据库脚本">运行数据库脚本<a href="#运行数据库脚本" class="hash-link" aria-label="运行数据库脚本的直接链接" title="运行数据库脚本的直接链接">​</a></h3>
<p><code>/xxl-job/doc/db/tables_xxl_job.sql</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="调度中心">调度中心<a href="#调度中心" class="hash-link" aria-label="调度中心的直接链接" title="调度中心的直接链接">​</a></h3>
<p><code>调度中心项目：xxl-job-admin</code> 修改该模块下的配置文件并启动server</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">### web</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">server.port=8080</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">server.servlet.context-path=/xxl-job-admin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">......</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">### xxl-job, datasource</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spring.datasource.url=jdbc:mysql://127.0.0.1:3306/xxl_job?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spring.datasource.username=root</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spring.datasource.password=123456</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">......</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">### xxl-job, access token</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">xxl.job.accessToken=jiguanchen.space</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ui界面">UI界面<a href="#ui界面" class="hash-link" aria-label="UI界面的直接链接" title="UI界面的直接链接">​</a></h3>
<ul>
<li>运行报表<!-- -->
<ul>
<li>以图形化来展示了整体的任务执行情况<!-- -->
<ul>
<li>任务数量：能够看到调度中心运行的任务数量</li>
<li>调度次数：调度中心所触发的调度次数</li>
<li>执行器数量：在整个调度中心中，在线的执行器数量有多少</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="image-20230214195933783" src="/assets/images/image-20230214195933783-ffa529f61bf3bd47ceee76cee3a5f845.png" width="1920" height="991" class="img_ev3q"></p>
<ul>
<li>任务管理（配置执行任务）<!-- -->
<ul>
<li>示例执行器：所  用到的执行器</li>
<li>任务描述：概述该任务是做什么的</li>
<li>路由策略：<!-- -->
<ul>
<li>第一个：选择第一个机器</li>
<li>最后一个：选择最后一个机器</li>
<li>轮询：依次选择执行</li>
<li>随机：随机选择在线的机器</li>
<li>一致性HASH：每个任务按照Hash算法固定选择某一台机器，并且所有的任务均匀散列在不同的机器上</li>
<li>最不经常使用：使用频率最低的机器优先被使用</li>
<li>最近最久未使用：最久未使用的机器优先被选举</li>
<li>故障转移：按照顺序依次进行心跳检测，第一个心跳检测成功的机器选定为目标的执行器并且会发起任务调度</li>
<li>忙碌转移：按照顺序来依次进行空闲检测，第一个空闲检测成功的机器会被选定为目标群机器，并且会发起任务调度</li>
<li>分片广播：广播触发对于集群中的所有机器执行任务，同时会系统会自动传递分片的参数</li>
</ul>
</li>
<li>Cron：执行规则</li>
<li>调度过期策略：调度中心错过调度时间的补偿处理策略，包括：忽略、立即补偿触发一次等</li>
<li>JobHandler：定义执行器的名字</li>
<li>阻塞处理策略：<!-- -->
<ul>
<li>单机串行：新的调度任务在进入到执行器之后，该调度任务进入FIFO队列，并以串行的方式去进行</li>
<li>丢弃后续调度：新的调度任务在进入到执行器之后，如果存在相同的且正在运行的调度任务，本次的调度任务请求就会被丢弃掉，并且标记为失败</li>
<li>覆盖之前的调度：新的调度任务在进入到执行器之后，如果存在相同的且正在运行的调度任务，就会终止掉当前正在运行的调度任务，并且清空队列，运行新的调度任务。</li>
</ul>
</li>
<li>子任务ID：输入子任务的任务id，可填写多个</li>
<li>任务超时时间：添加任务超时的时候，单位s，设置时间大于0的时候就会生效</li>
<li>失败 重试次数：设置失败重试的次数，设置时间大于0的时候就会生效</li>
<li>负责人：填写该任务调度的负责人</li>
<li>报警邮件：出现报警，则发送邮件</li>
</ul>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="image-20230214200224214" src="/assets/images/image-20230214200224214-886206b0dd0a466984fc0206dfe6f442.png" width="1603" height="484" class="img_ev3q"></p>
<p>创建任务：</p>
<p><img decoding="async" loading="lazy" alt="image-20230214200338357" src="/assets/images/image-20230214200338357-198452a996e4e5e0853b5b555a1bdabd.png" width="1207" height="874" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="后台服务整合xxl-job">后台服务整合xxl-job<a href="#后台服务整合xxl-job" class="hash-link" aria-label="后台服务整合xxl-job的直接链接" title="后台服务整合xxl-job的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="yml配置">yml配置<a href="#yml配置" class="hash-link" aria-label="yml配置的直接链接" title="yml配置的直接链接">​</a></h3>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">#  xxl-job任务调度配置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">xxl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">job</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">admin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">addresses</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//127.0.0.1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">8080/xxl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">job</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">admin  </span><span class="token comment" style="color:rgb(98, 114, 164)">#调度中心部署地址,多个配置逗号分隔 &quot;http://address01,http://address02&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">accessToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> jiguanchen.space  </span><span class="token comment" style="color:rgb(98, 114, 164)">#执行器token，非空时启用 xxl-job, access token</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">executor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">appname</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> yygh</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">order  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 执行器app名称,和控制台那边配置一样的名称，不然注册不上去</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">6666</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 执行器的端口</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">logpath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> ./data/logs/xxl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">job/executor  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 执行器日志文件存储路径，需要对该路径拥有读写权限；为空则使用默认路径</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">logretentiondays</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">30</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 执行器日志保存天数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># [选填]执行器IP ：默认为空表示自动获取IP（即springboot容器的ip和端口，可以自动获取，也可以指定），</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># 多网卡时可手动设置指定IP，该IP不会绑定Host仅作为通讯实用；地址信息用于 &quot;执行器注册&quot; 和 &quot;调度中心请求并触发任务&quot;，</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">ip</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># [选填]执行器注册：优先使用该配置作为注册地址，为空时使用内嵌服务 ”IP:PORT“ 作为注册地址。从而更灵活的支持容器类型执行器动态IP和动态映射端口问题</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="添加pom文件">添加pom文件<a href="#添加pom文件" class="hash-link" aria-label="添加pom文件的直接链接" title="添加pom文件的直接链接">​</a></h3>
<div class="language-pom codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-pom codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;!-- xxl_job分布式调度 --&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &lt;groupId&gt;com.xuxueli&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &lt;artifactId&gt;xxl-job-core&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            &lt;version&gt;2.3.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="添加config配置类">添加config配置类<a href="#添加config配置类" class="hash-link" aria-label="添加config配置类的直接链接" title="添加config配置类的直接链接">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package space.jachen.yygh.order.config;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.xxl.job.core.executor.impl.XxlJobSpringExecutor;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.beans.factory.annotation.Value;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.context.annotation.Bean;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.context.annotation.Configuration;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @author JaChen</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @date 2023/2/14 15:46</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class XxlJobConfig {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Value(&quot;${xxl.job.admin.addresses}&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private String adminAddresses;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Value(&quot;${xxl.job.executor.appname}&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private String appName;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Value(&quot;${xxl.job.executor.ip}&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private String ip;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Value(&quot;${xxl.job.executor.port}&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private int port;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Value(&quot;${xxl.job.accessToken}&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private String accessToken;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Value(&quot;${xxl.job.executor.logpath}&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private String logPath;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Value(&quot;${xxl.job.executor.logretentiondays}&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private int logRetentionDays;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public XxlJobSpringExecutor xxlJobExecutor() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        XxlJobSpringExecutor xxlJobSpringExecutor = new XxlJobSpringExecutor();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        xxlJobSpringExecutor.setAdminAddresses(adminAddresses);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        xxlJobSpringExecutor.setAppname(appName);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        xxlJobSpringExecutor.setIp(ip);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        xxlJobSpringExecutor.setPort(port);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        xxlJobSpringExecutor.setAccessToken(accessToken);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        xxlJobSpringExecutor.setLogPath(logPath);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        xxlJobSpringExecutor.setLogRetentionDays(logRetentionDays);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return xxlJobSpringExecutor;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>添加hander处理器</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package space.jachen.yygh.order.handler;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @author JaChen</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @date 2024/2/14 15:53</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class MyJobHandler {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private RabbitService rabbitService;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private OrderInfoMapper orderInfoMapper;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 就诊提醒的handler方法</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param param  null</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return  ReturnT&lt;String&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @XxlJob(value = &quot;demoJobHandler1&quot;,init = &quot;init&quot;,destroy = &quot;destroy&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public ReturnT&lt;String&gt; execute(String param){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;execute方法执行了 ====》 &quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 获取查询的时间</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        DateTime dateTime = new DateTime().plusDays(1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String dateString = dateTime.toString(&quot;yyyy-MM-dd&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Date date = new DateTime(dateString).toDate();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        LambdaQueryWrapper&lt;OrderInfo&gt; queryWrapper = new LambdaQueryWrapper&lt;OrderInfo&gt;(){{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            eq(OrderInfo::getReserveDate,date);  // 查询就诊日期</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            ne(OrderInfo::getOrderStatus, OrderStatusEnum.CANCLE.getStatus());  // 查询没有取消的订单</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        List&lt;OrderInfo&gt; orderInfoList = orderInfoMapper.selectList(queryWrapper);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for(OrderInfo orderInfo : orderInfoList) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // 短信提示</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            MsmVo msmVo = new MsmVo();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            msmVo.setPhone(orderInfo.getPatientPhone());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // 结合mq快速响应其他模块 发送消息</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            rabbitService.sendMessage(MqConst.EXCHANGE_DIRECT_MSM, MqConst.ROUTING_MSM_ITEM, msmVo);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return ReturnT.SUCCESS;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private void init(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;MyJobHandler init &gt;&gt;&gt;&gt;&gt; &quot; + true);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String jobParam = XxlJobHelper.getJobParam();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;jobParam = &quot; + jobParam);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="效果图">效果图<a href="#效果图" class="hash-link" aria-label="效果图的直接链接" title="效果图的直接链接">​</a></h3>
<p>完成规则内的定时任务，到指定时间向就诊人发送消息</p>
<p><img decoding="async" loading="lazy" alt="image-20230214201137647" src="/assets/images/image-20230214201137647-78853315d90bec43fb641d44f62ae203.png" width="1498" height="329" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="image-20230214201148157" src="/assets/images/image-20230214201148157-e16f4946aad02ccb28495a972fde1805.png" width="1485" height="258" class="img_ev3q"></p>
<p>调度日志</p>
<p><img decoding="async" loading="lazy" alt="image-20230214201947305" src="/assets/images/image-20230214201947305-25fa330099f9149f279b07395476a6ec.png" width="1601" height="807" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="xxl-job集群部署和高可用案例配置">XXL-Job集群部署和高可用案例配置<a href="#xxl-job集群部署和高可用案例配置" class="hash-link" aria-label="XXL-Job集群部署和高可用案例配置的直接链接" title="XXL-Job集群部署和高可用案例配置的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="集群架构图">集群架构图<a href="#集群架构图" class="hash-link" aria-label="集群架构图的直接链接" title="集群架构图的直接链接">​</a></h3>
<p><img decoding="async" loading="lazy" alt="image-20230214203111017" src="/assets/images/image-20230214203111017-a88e2f9bec270b41851edadd8e1016ee.png" width="1408" height="733" class="img_ev3q"></p>
<p>执行器配置调度中心集群</p>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">#调度中心部署地址,多个配置逗号分隔 &quot;http://address01,http://address02&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">xxl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">job</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">admin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">addresses</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//127.0.0.1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">8080/xxl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">job</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">admin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">http</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">//127.0.0.1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain">8081/xxl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">job</span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain">admin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="xxl-job处理海量数据-分片任务实操">XXL-Job处理海量数据-分片任务实操<a href="#xxl-job处理海量数据-分片任务实操" class="hash-link" aria-label="XXL-Job处理海量数据-分片任务实操的直接链接" title="XXL-Job处理海量数据-分片任务实操的直接链接">​</a></h2>
<p>我们的需求：</p>
<ul>
<li>有一个任务需要处理100W条数据，每条数据的业务逻辑处理要0.1s</li>
<li>对于普通任务来说，只有一个线程来处理 可能需要10万秒才能处理完，业务则严重受影响</li>
<li>案例：双十一大促，给1000万用户发营销短信</li>
</ul>
<p>解决思路：</p>
<ul>
<li>如果将100W数据均匀分给集群里的10台机器同时处理，</li>
<li>每台机器耗时，1万秒即可，耗时会大大缩短，也能充分利用集群资源</li>
<li>在xxl-job里，可以配置执行器集群有10个机器，那么分片总数是10，  分片序号0~9 分别对应那10台机器。</li>
<li>分片方式<!-- -->
<ul>
<li>id % 分片总数 余数是0 的，在第1个执行器上执行</li>
<li>id % 分片总数 余数是1 的，在第2个执行器上执行</li>
<li>id % 分片总数 余数是2 的，在第3个执行器上执行</li>
<li>...</li>
<li>id % 分片总数 余数是9 的，在第10个执行器上执行</li>
</ul>
</li>
</ul>
<p>其他解决方式</p>
<ul>
<li>也可以启动多个job，使用同个jobHandler,通过命令行参数控制</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="选用分片广播的路由策略实操">选用分片广播的路由策略实操<a href="#选用分片广播的路由策略实操" class="hash-link" aria-label="选用分片广播的路由策略实操的直接链接" title="选用分片广播的路由策略实操的直接链接">​</a></h3>
<p><img decoding="async" loading="lazy" alt="image-20230214203833637" src="/assets/images/image-20230214203833637-06704b31c35de3df3a903312bd7add3b.png" width="969" height="297" class="img_ev3q"></p>
<p>主要参数</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 分片广播任务	    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 当前分片数，从0开始，即执行器的序号</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">int shardIndex = XxlJobHelper.getShardIndex();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//总分片数，执行器集群总机器数量</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">int shardTotal = XxlJobHelper.getShardTotal();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 业务逻辑</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">......</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/xxl-job">xxl-job</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-logic-delete">MongoDB实现逻辑删除</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-06-28T00:00:00.000Z">2023年6月28日</time> · <!-- -->阅读需 4 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><strong>背景</strong>：<em>我们对<code>MongoDB</code>采用的逻辑删除的方案，与<code>MySQL</code>完全不同。 得益于<code>MongoDB</code>擅长储存非结构化数据的优点，即使业务数据结构发生，也不会影响原来的数据，还能保证业务表查询效率。 若<code>MySQL</code>采用此方案，则有业务数据库表结构变动导致数据迁移失败的风险，甚至影响正常业务流程。 综合考虑，关系型数据库适合通过“删除标记”实现逻辑删除，非关系型数据库更适合将“已删除”的数据迁移至回收表中。</em></p>
<p>举个小demo</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="如果改变表字段">如果改变表字段：<a href="#如果改变表字段" class="hash-link" aria-label="如果改变表字段：的直接链接" title="如果改变表字段：的直接链接">​</a></h2>
<p>​		首先导入了 MongoDB 驱动，然后创建了一个 MongoDB 客户端（<code>MongoClient</code>），并连接到了本地的 MongoDB 服务器（&quot;mongodb://localhost:27017&quot;）。通过客户端获取了数据库 &quot;test&quot; 中的集合 &quot;collection&quot;。在逻辑删除代码中，首先通过 ObjectId 创建了一个 ObjectId 对象，其值为 &quot;5f36f47a06c5a722497f37b5&quot;。然后，通过调用 <code>updateOne</code> 方法对该文档进行了逻辑删除操作，即在该文档中添加/更新了一个 &quot;deleted&quot; 字段，该字段的值为 true。</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">org.mongodb</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">mongodb-driver-sync</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">version</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">4.0.5</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">version</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.mongodb.client.MongoClient;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.mongodb.client.MongoClients;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.mongodb.client.MongoCollection;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.mongodb.client.model.Filters;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.mongodb.client.model.Updates;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.bson.Document;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.bson.types.ObjectId;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class MongoDBLogicDeleteExample {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 创建 MongoDB 客户端</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        MongoClient mongoClient = MongoClients.create(&quot;mongodb://localhost:27017&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 获取数据库和集合</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        MongoCollection&lt;Document&gt; collection = mongoClient.getDatabase(&quot;test&quot;).getCollection(&quot;collection&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 逻辑删除</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ObjectId id = new ObjectId(&quot;5f36f47a06c5a722497f37b5&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        collection.updateOne(Filters.eq(&quot;_id&quot;, id), Updates.set(&quot;deleted&quot;, true));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 关闭 MongoDB 客户端</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        mongoClient.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>​		然后在查询代码中，通过调用 <code>find</code> 方法查询 &quot;deleted&quot; 字段不等于 true 的文档，即查询未被逻辑删除的文档。然后，将查询结果存入 <code>documents</code> 集合中。最后，通过循环打印出了查询结果中的每一个文档。最后，关闭了 MongoDB 客户端。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.mongodb.client.MongoClient;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.mongodb.client.MongoClients;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.mongodb.client.MongoCollection;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.mongodb.client.model.Filters;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.bson.Document;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.ArrayList;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class MongoDBQueryExample {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 创建 MongoDB 客户端</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        MongoClient mongoClient = MongoClients.create(&quot;mongodb://localhost:27017&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 获取数据库和集合</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        MongoCollection&lt;Document&gt; collection = mongoClient.getDatabase(&quot;test&quot;).getCollection(&quot;collection&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 查询</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        List&lt;Document&gt; documents = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        collection.find(Filters.ne(&quot;deleted&quot;, true)).into(documents);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 打印结果</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (Document document : documents) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(document);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 关闭 MongoDB 客户端</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="不改变表字段">不改变表字段<a href="#不改变表字段" class="hash-link" aria-label="不改变表字段的直接链接" title="不改变表字段的直接链接">​</a></h2>
<p>如果不想添加字段，可以使用 MongoDB 的另一种实现逻辑删除的方法，即使用软删除。软删除的思想是将文档移动到另一个集合中，而不是真正删除文档。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.mongodb.MongoClient;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.mongodb.client.MongoCollection;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.mongodb.client.MongoDatabase;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.bson.Document;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.bson.types.ObjectId;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.ArrayList;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class LogicalDeletionExample {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 创建 MongoDB 客户端</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        MongoClient mongoClient = new MongoClient(&quot;mongodb://localhost:27017&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 获取数据库</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        MongoDatabase database = mongoClient.getDatabase(&quot;test&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 获取原始集合</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        MongoCollection&lt;Document&gt; collection = database.getCollection(&quot;collection&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 获取新集合</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        MongoCollection&lt;Document&gt; deletedCollection = database.getCollection(&quot;deleted_collection&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 逻辑删除</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ObjectId id = new ObjectId(&quot;5f36f47a06c5a722497f37b5&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Document deletedDocument = collection.find(new Document(&quot;_id&quot;, id)).first();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        deletedCollection.insertOne(deletedDocument);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        collection.deleteOne(new Document(&quot;_id&quot;, id));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 查询</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        List&lt;Document&gt; documents = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        collection.find().into(documents);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 打印结果</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (Document document : documents) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(document);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 关闭客户端</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        mongoClient.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>以上代码通过将文档移动到新集合中，实现了 MongoDB 的逻辑删除，并且不添加字段。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于数据仓库相关的话题" class="tag_zVej tagRegular_sFm0" href="/blog/tags/shujuku">数据库</a></li><li class="tag_QGVx"><a title="关于MongoDB的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/mongodb">MongoDB</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-easyexcel">实用框架EasyExcel</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-04-20T00:00:00.000Z">2023年4月20日</time> · <!-- -->阅读需 6 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><strong>背景</strong>：<em>EasyExcel是一个基于Java的简单、省内存的读写Excel的开源项目。在尽可能节约内存的情况下支持读写百M的Excel。它有许许多多的应用场景 例如 数据导入：减轻录入工作量 ；数据导出：统计信息归档 ； 数据传输：异构系统之间数据传输等等</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1easyexcel介绍">1、EasyExcel介绍<a href="#1easyexcel介绍" class="hash-link" aria-label="1、EasyExcel介绍的直接链接" title="1、EasyExcel介绍的直接链接">​</a></h2>
<ul>
<li>Java领域解析、生成Excel比较有名的框架有Apache poi、jxl等。但他们都存在一个严重的问题就是非常的耗内存。如果你的系统并发量不大的话可能还行，但是一旦并发上来后一定会OOM或者JVM频繁的full gc。</li>
<li>EasyExcel是阿里巴巴开源的一个excel处理框架，<strong>以使用简单、节省内存著称</strong>。EasyExcel能大大减少占用内存的主要原因是在解析Excel时没有将文件数据一次性全部加载到内存中，而是从磁盘上一行行读取数据，逐个解析。</li>
<li>EasyExcel采用一行一行的解析模式，并将一行的解析结果以观察者的模式通知处理（AnalysisEventListener）</li>
</ul>
<p>文档地址：<a href="https://easyexcel.opensource.alibaba.com" target="_blank" rel="noopener noreferrer">https://easyexcel.opensource.alibaba.com</a></p>
<p>github地址：<a href="https://github.com/alibaba/easyexcel" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/easyexcel</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2easyexcel写操作">2、EasyExcel写操作<a href="#2easyexcel写操作" class="hash-link" aria-label="2、EasyExcel写操作的直接链接" title="2、EasyExcel写操作的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21创建项目">2.1  、创建项目<a href="#21创建项目" class="hash-link" aria-label="2.1、创建项目的直接链接" title="2.1、创建项目的直接链接">​</a></h3>
<p><strong>pom中引入xml相关依赖</strong></p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dependencies</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">com.alibaba</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">easyexcel</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dependencies</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>当引入该依赖之后，会发现在项目的依赖文件中同时多出了poi的类库。也就是说，EasyExcel是基于poi来进行实现的，间接地引入了如下依赖：</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">org.apache.poi</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">poi</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">org.apache.poi</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">poi-ooxml</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22创建实体类">2.2、创建实体类<a href="#22创建实体类" class="hash-link" aria-label="2.2、创建实体类的直接链接" title="2.2、创建实体类的直接链接">​</a></h3>
<p><strong>设置表头和添加的数据字段</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Stu {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    //设置表头名称</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @ExcelProperty(&quot;学生编号&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private int sno;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 设置表头名称</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @ExcelProperty(&quot;学生姓名&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private String sname;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>@ExcelProperty：用于设置Excel表头，其中index用户表头的编号，从0开始；value为表头对应的内容。</li>
<li>@DateTimeFormat：用于日期的格式化</li>
</ul>
<p>完成上述功能准备工作之后，我们就可以来生成一个Excel了。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-实现写操作">2.3 、实现写操作<a href="#23-实现写操作" class="hash-link" aria-label="2.3 、实现写操作的直接链接" title="2.3 、实现写操作的直接链接">​</a></h3>
<p><strong>（1）创建方法循环设置要添加到Excel的数据</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">//循环设置要添加的数据，最终封装到list集合中</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">private static List&lt;Stu&gt; data() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    List&lt;Stu&gt; list = new ArrayList&lt;Stu&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    for (int i = 0; i &lt; 10; i++) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Stu data = new Stu();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        data.setSno(i);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        data.setSname(&quot;张三&quot;+i);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(data);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return list;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>（2）实现最终的添加操作</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public static void main(String[] args) throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    String fileName = &quot;E:\\11.xlsx&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 这里 需要指定写用哪个class去写，然后写到第一个sheet，名字为模板 然后文件流会自动关闭</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 如果这里想使用03 则 传入excelType参数即可</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    EasyExcel.write(fileName, Stu.class).sheet(&quot;写入方法一&quot;).doWrite(data());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>那么我们如何解析Excel呢？接着看....</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3easyexcel读操作">3、EasyExcel读操作<a href="#3easyexcel读操作" class="hash-link" aria-label="3、EasyExcel读操作的直接链接" title="3、EasyExcel读操作的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31创建实体类">3.1、创建实体类<a href="#31创建实体类" class="hash-link" aria-label="3.1、创建实体类的直接链接" title="3.1、创建实体类的直接链接">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Stu {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    //设置表头名称</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    //设置列对应的属性</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @ExcelProperty(value = &quot;学生编号&quot;,index = 0)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private int sno;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    //设置表头名称</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    //设置列对应的属性</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @ExcelProperty(value = &quot;学生姓名&quot;,index = 1)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private String sname;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>首先创建一个监听器ExcelListener，集成EasyExcel提供AnalysisEventListener类：</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32创建读取操作监听器">3.2、创建读取操作监听器<a href="#32创建读取操作监听器" class="hash-link" aria-label="3.2、创建读取操作监听器的直接链接" title="3.2、创建读取操作监听器的直接链接">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class ExcelListener extends AnalysisEventListener&lt;Stu&gt; {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    //创建list集合封装最终的数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    List&lt;Stu&gt; list = new ArrayList&lt;Stu&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    //一行一行去读取excle内容</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void invoke(Stu user, AnalysisContext analysisContext) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;***&quot;+user);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(user);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    //读取excel表头信息</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void invokeHeadMap(Map&lt;Integer, String&gt; headMap, AnalysisContext context) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;表头信息：&quot;+headMap);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    //读取完成后执行</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void doAfterAllAnalysed(AnalysisContext analysisContext) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;list = &quot; + list);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在该监听器中，通过重写AnalysisEventListener的方法来获得解析的数据、表头信息，以及解析完毕之后执行的操作信息。</p>
<p>同样写Excel一样，通过EasyExcel类的静态方法来执行读操作：</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="33调用方法实现读取">3.3、调用方法实现读取<a href="#33调用方法实现读取" class="hash-link" aria-label="3.3、调用方法实现读取的直接链接" title="3.3、调用方法实现读取的直接链接">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public static void main(String[] args) throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    String fileName = &quot;E:\\11.xlsx&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 这里 需要指定调用哪个class去读，然后读取第一个sheet 文件流会自动关闭</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    EasyExcel.read(fileName, Stu.class, new ExcelListener()).sheet().doRead();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>上面提到的@DateTimeFormat注解可转换日期格式，还有其他类似功能的注解和自定义转换器。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于EasyExcel的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/easy-excel">EasyExcel</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-spring-security-microservices">spring-security整合微服务实践</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-03-15T00:00:00.000Z">2023年3月15日</time> · <!-- -->阅读需 23 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><strong>起因</strong>：<em>随着越来越多的业务转移到互联网上，安全性已经成为任何一个应用程序开发的重要考虑因素。而在 Java 应用程序开发中，Spring Security 是一个非常流行的安全框架，可以提供可靠的身份验证、授权和会话管理等安全特性。无论是开发 Web 应用程序、RESTful 服务、单页应用程序或者其他类型的应用程序，都可以使用 Spring Security 来保护应用程序的安全性。同时，Spring Security 还具有非常好的可扩展性，可以与 Spring 生态系统中的其他框架和库进行无缝集成，使开发人员能够构建出复杂的、高度可定制的安全解决方案。因此，使用 Spring Security 是保障应用程序安全的不二选择。</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="技术选型">技术选型<a href="#技术选型" class="hash-link" aria-label="技术选型的直接链接" title="技术选型的直接链接">​</a></h2>
<table><thead><tr><th></th><th>Spring Security</th><th>Apache Shiro</th><th>Apache Knox</th><th>Keycloak</th><th>Stormpath</th></tr></thead><tbody><tr><td>概述</td><td>Spring Security 是一个非常流行的 Java 应用程序安全框架，提供了完整的身份验证、授权和会话管理功能。它具有良好的可扩展性和灵活性，能够与 Spring 生态系统中的其他框架和库无缝集成</td><td>Apache Shiro 是一个轻量级的安全框架，提供了身份验证、授权、加密和会话管理等功能。它易于使用和集成，能够与任何应用程序框架一起使用，支持多种数据源，如 LDAP、JDBC 和 Active Directory</td><td>Apache Knox 是一个开源网关，提供了 REST API 的认证、授权和审计功能。它可以保护 Hadoop 集群的 REST API，提供了单点登录和 OAuth2 支持</td><td>Keycloak 是一个开源的身份认证和访问管理解决方案，基于 OpenID Connect 和 OAuth2 协议。它提供了可扩展的身份验证和授权功能，包括单点登录、多因素身份验证和基于角色的访问控制等</td><td>Stormpath 是一个云身份认证和访问管理服务，提供了完整的身份验证、授权和用户管理功能。它可以与任何应用程序框架一起使用，包括 Java、Node.js 和 .NET</td></tr><tr><td>优点</td><td>完整的安全特性、与 Spring 框架无缝集成、丰富的插件和扩展、良好的文档和社区支持</td><td>括轻量级、易于使用和集成、支持多种数据源、优秀的文档</td><td>保护 Hadoop 集群的 REST API、支持单点登录和 OAuth2、易于配置和使用</td><td>可扩展的身份验证和授权功能、多种身份验证方式、基于角色的访问控制、易于使用和部署</td><td>云身份认证和访问管理服务、易于使用和集成、提供完整的身份验证、授权和用户管理功能</td></tr><tr><td>缺点</td><td>配置复杂、上手较难</td><td>与 Spring 框架的深度集成、不够完整的安全特性</td><td>仅适用于保护 Hadoop 集群的 REST API</td><td>配置复杂、性能较差</td><td>需要使用云服务、需要支付服务费用，成本高</td></tr><tr><td>适用场景</td><td>适用于基于 Spring 框架构建的应用程序</td><td>适用于不依赖于 Spring 框架的应用程序</td><td>适用于需要保护 Hadoop 集群的 REST API 的场景</td><td>适用于需要单独部署一个身份认证和访问管理系统的场景</td><td>适用于需要使用云身份认证和访问管理服务的场景。</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="小结">小结：<a href="#小结" class="hash-link" aria-label="小结：的直接链接" title="小结：的直接链接">​</a></h3>
<p>国内目前非常流行的就是Spring Security和Apache Shiro 。</p>
<p>Spring Security出现的时间较早，在springboot没火起来之前一直都是Shiro 的天下，但目前最能和spring全家桶整合起 来的就是Spring Security，Spring Security 是最为完整、可扩展和灵活的安全框架，而且与 Spring 框架的深度集成使得使用和配置变得简单方便。Spring Security 提供了全面的身份验证、授权和会话管理特性，并且可以轻松地扩展到支持自定义的安全策略和特性。而且社区也是十分活跃的。所以此篇文章主要从实践流程出发，实现与spring项目整合的快速搭建解决方案。</p>
<p>相对于 Shiro，在 SSM 中整合 Spring Security 都是比较麻烦的操作，所以，Spring Security 虽然功能比 Shiro 强大，但是使用反而没有 Shiro 多（Shiro 虽然功能没有Spring Security 多，但是对于大部分项目而言，Shiro 也够用了）。自从有了 Spring Boot 之后，Spring Boot 对于 Spring Security 提供了自动化配置方案，可以使用更少的配置来使用 Spring Security。</p>
<p>因此，一般来说，常见的安全管理技术栈的组合是这样的：
• SSM + Shiro
• Spring Boot/Spring Cloud + Spring Security</p>
<p>如果还想了解shiro这一框架，我也在github开源了一个小demo，用于整合SpringBoot与shiro，实现快速上手，仓库地址：<a href="https://github.com/Jachen99/rbac_shiro" target="_blank" rel="noopener noreferrer">https://github.com/Jachen99/rbac_shiro</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="介绍">介绍<a href="#介绍" class="hash-link" aria-label="介绍的直接链接" title="介绍的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="spring-security简介">Spring Security简介<a href="#spring-security简介" class="hash-link" aria-label="Spring Security简介的直接链接" title="Spring Security简介的直接链接">​</a></h3>
<p>Spring 是非常流行和成功的 Java 应用开发框架，Spring Security 正是 Spring 家族中的成员。Spring Security 基于 Spring 框架，提供了一套 Web 应用安全性的完整解决方案。</p>
<p>正如你可能知道的关于  安全方面的两个核心功能是“<strong>认证</strong>”和“<strong>授权</strong>”，一般来说，Web 应用的安全性包括**用户认证（Authentication）和用户授权（Authorization）**两个部分，这两点也是 SpringSecurity 重要核心功能。</p>
<p>（1）用户认证指的是：验证某个用户是否为系统中的合法主体，也就是说用户能否访问该系统。用户认证一般要求用户提供用户名和密码，系统通过校验用户名和密码来完成认证过程。</p>
<p><strong>通俗点说就是系统认为用户是否能登录</strong></p>
<p>（2）用户授权指的是验证某个用户是否有权限执行某个操作。在一个系统中，不同用户所具有的权限是不同的。比如对一个文件来说，有的用户只能进行读取，而有的用户可以进行修改。一般来说，系统会为不同的用户分配不同的角色，而每个角色则对应一系列的权限。</p>
<p><strong>通俗点讲就是系统判断用户是否有权限去做某些事情。</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="历史">历史<a href="#历史" class="hash-link" aria-label="历史的直接链接" title="历史的直接链接">​</a></h3>
<p>“Spring Security 开始于 2003 年年底,““spring 的 acegi 安全系统”。 起因是 Spring开发者邮件列表中的一个问题,有人提问是否考虑提供一个基于 spring 的安全实现。</p>
<p>Spring Security 以“The Acegi Secutity System for Spring” 的名字始于 2013 年晚些时候。一个问题提交到 Spring 开发者的邮件列表，询问是否已经有考虑一个基于Spring 的安全性社区实现。那时候 Spring 的社区相对较小（相对现在）。实际上 Spring 自己在2013 年只是一个存在于 ScourseForge 的项目，这个问题的回答是一个值得研究的领域，虽然目前时间的缺乏组织了我们对它的探索。</p>
<p>考虑到这一点，一个简单的安全实现建成但是并没有发布。  几周后，Spring 社区的其他成员询问了安全性，这次这个代码被发送给他们。其他几个请求也跟随而来。到 2014 年一月大约有 20 万人使用了这个代码。这些创业者的人提出一个 SourceForge 项目加入是为了，这是在 2004 三月正式成立。</p>
<p>在早些时候，这个项目没有任何自己的验证模块，身份验证过程依赖于容器管理的安全性和 Acegi 安全性。而不是专注于授权。开始的时候这很适合，但是越来越多的用户请求额外的容器支持。容器特定的认证领域接口的基本限制变得清晰。还有一个相关的问题增加新的容器的路径，这是最终用户的困惑和错误配置的常见问题。</p>
<p>Acegi 安全特定的认证服务介绍。大约一年后，Acegi 安全正式成为了 Spring 框架的子项目。1.0.0 最终版本是出版于 2006 -在超过两年半的大量生产的软件项目和数以百计的改进和积极利用社区的贡献。</p>
<p>Acegi 安全 2007 年底正式成为了 Spring 组合项目，更名为&quot;Spring Security&quot;。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="流程介绍">流程介绍<a href="#流程介绍" class="hash-link" aria-label="流程介绍的直接链接" title="流程介绍的直接链接">​</a></h2>
<p>要对Web资源进行保护，最好的办法莫过于Filter
要想对方法调用进行保护，最好的办法莫过于<a href="https://so.csdn.net/so/search?q=AOP&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">AOP</a>。</p>
<p>Spring Security进行认证和鉴权的时候,就是利用的一系列的Filter来进行拦截的。</p>
<p><img decoding="async" loading="lazy" src="https://img-blog.csdnimg.cn/20201231155747261.png" alt="img" class="img_ev3q"></p>
<p>如图所示，一个请求想要访问到API就会从左到右经过蓝线框里的过滤器，其中<strong>绿色部分是负责认证的过滤器，蓝色部分是负责异常处理，橙色部分则是负责授权</strong>。经过一系列拦截最终访问到我们的API。</p>
<p>这里面我们只需要重点关注两个过滤器即可：<code>UsernamePasswordAuthenticationFilter</code>负责登录认证，<code>FilterSecurityInterceptor</code>负责权限授权。</p>
<p>说明：<strong>Spring Security的核心逻辑全在这一套过滤器中，过滤器里会调用各种组件完成功能，掌握了这些过滤器和组件你就掌握了Spring Security</strong>！这个框架的使用方式就是对这些过滤器和组件进行扩展。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="快速实践">快速实践<a href="#快速实践" class="hash-link" aria-label="快速实践的直接链接" title="快速实践的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="搭建权限框架基本骨架">搭建权限框架基本骨架<a href="#搭建权限框架基本骨架" class="hash-link" aria-label="搭建权限框架基本骨架的直接链接" title="搭建权限框架基本骨架的直接链接">​</a></h3>
<p>1、给spring-security创建单独的公共模块</p>
<p>2、导入相关jar包，如果是maven工程，直接引入</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">&lt;!-- Spring Security依赖 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">spring-boot-starter-security</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>说明：依赖包（spring-boot-starter-security）导入后，Spring Security就默认提供了许多功能将整个应用给保护了起来：</p>
<ul>
<li>要求经过身份验证的用户才能与应用程序进行交互</li>
<li>创建好了默认登录表单</li>
<li>生成用户名为<code>user</code>的随机密码并打印在控制台上</li>
<li><code>CSRF</code>攻击防护、<code>Session Fixation</code>攻击防护</li>
</ul>
<p>3、在需要使用权限框架的模块导入依赖</p>
<p>这里以医院预约挂号系统的order模块为例，仓库地址：<a href="https://github.com/Jachen99/yygh_parent" target="_blank" rel="noopener noreferrer">https://github.com/Jachen99/yygh_parent</a></p>
<p>导入依赖到service-order模块</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">space.jachen</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">spring-security</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">version</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">1.0.1</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">version</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>4、启动该order模块，会发现控制台显示Using generated security password</p>
<p><img decoding="async" loading="lazy" alt="image-20230216104643176" src="/assets/images/image-20230216104643176-f4f96f5b1dc242b1cd0a8cbec3971064.png" width="1054" height="248" class="img_ev3q"></p>
<p>说明该模块已经被spring security保护。</p>
<p>5、此时我们通过浏览器去访问该模块下的api路径，会进入框架自带的登录页面：</p>
<p><img decoding="async" loading="lazy" alt="image-20230216112805097" src="data:image/png;base64,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" width="356" height="163" class="img_ev3q"></p>
<p>默认用户名为user，密码为控制台输出的随机密码，认证成功后才可以登录。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="实现用户认证功能">实现用户认证功能<a href="#实现用户认证功能" class="hash-link" aria-label="实现用户认证功能的直接链接" title="实现用户认证功能的直接链接">​</a></h3>
<p><em>目前，我们已经实现了自带的登录页面的访问，用户名和密码都来自于内存。那么要访问来自于mysql、redis甚至的用户名、密码怎么办呢？</em></p>
<ul>
<li>加密器PasswordEncoder</li>
<li>用户对象UserDetails</li>
<li>业务对象UserDetailsService</li>
</ul>
<p>功能1：自带登录页面，访问真正的数据库，需要做什么？</p>
<p>1、访问基于内存的用户名和密码使用的是InMeoryUserDetailsManager（实现了UserDetailsServer），我们需要自定义UserDetailsServer的实现类。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package space.jachen.yygh.order.security;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.core.GrantedAuthority;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.core.userdetails.UserDetails;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.core.userdetails.UserDetailsService;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.core.userdetails.UsernameNotFoundException;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.stereotype.Component;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import space.jachen.yygh.security.custom.CustomUser;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import space.jachen.yygh.user.PatientFeignClient;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import space.jachen.yygh.vo.user.LoginVo;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import javax.annotation.Resource;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.ArrayList;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.Collection;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @author JaChen</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @date 2022/12/23 22:35</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class UserDetailsServiceImpl implements UserDetailsService {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Resource</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private PatientFeignClient userInfoFeignClient;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public UserDetails loadUserByUsername(String phone) throws UsernameNotFoundException {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        LoginVo login = userInfoFeignClient.loginSecurity(phone);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if(login == null) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            throw new UsernameNotFoundException(&quot;用户名不存在！&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 这里不比较密码 ，后面通过PasswordEncoder比较</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 返回数据、暂时不做授权</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Collection&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return new CustomUser(login,authorities);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2、访问数据库的方法loadUserByUsername，返回值为Userdetails，它封装了从数据库中返回的用户信息，但是和我们数据库表不一致，所以我们还需要自定义UserDetails实现类。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package space.jachen.yygh.security.custom;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import lombok.Getter;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import lombok.Setter;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.core.GrantedAuthority;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.core.userdetails.User;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import space.jachen.yygh.vo.user.LoginVo;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.Collection;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 访问数据库的方法loadUserByUsername，返回值为Userdetails，</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 它封装了从数据库中返回的用户信息，但是和我们数据库表不一致，</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 所以我们还需要自定义UserDetails实现类。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @author JaChen</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @date 2022/12/23 22:31</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Getter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Setter</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class CustomUser extends User {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 我们自己的用户实体对象，要调取用户信息时直接获取这个实体对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private LoginVo loginVo;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param loginVo  从数据库中查询的用户信息</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param authorities  从数据库中查询的权限</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public CustomUser(LoginVo loginVo,Collection&lt;? extends GrantedAuthority&gt; authorities) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        super(loginVo.getPhone(), loginVo.getCode(), authorities);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.loginVo = loginVo;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>现在数据都有了，我们需要进行密码的比较。</em></p>
<p>3、使用PasswordEncoder接口，但是不同的数据库采用的加密算法不同，这里可以使用security自带的PasswordEncoder实现类，如果不合适，就自定义一下PasswordEncoder的实现类即可。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package space.jachen.yygh.security.custom;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.beans.factory.annotation.Autowired;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.data.redis.core.StringRedisTemplate;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.crypto.password.PasswordEncoder;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.stereotype.Component;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 自定义密码组件 密码处理</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 此项目不需要md5加密处理</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 不需要开发者自己调用此类，SpringSecurity流程中进行密码比较时会自动调用。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @author JaChen</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @date 2022/12/23 22:25</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Component  // 必须添加到IOC ,SpringSecurity才可以使用</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class CustomPasswordEncoder implements PasswordEncoder {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private StringRedisTemplate stringRedisTemplate;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 如果需要加密进行加 密操作后返回，这里不需要处理，</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 因为本项目没有对用户密码进行加密，</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 采用的是手机号+验证码的方式进行登录</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 验证码存在redis中，为了方便演示，特定此条验证码永不过期，当作密码使用，</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param rawPassword  明文  用户输入的密码</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return  密文</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public String encode(CharSequence rawPassword) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return rawPassword.toString();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param rawPassword  用户输入的密码  即4位验证码</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param encodedPassword  从redis中查询出来的验证码</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return boolean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public boolean matches(CharSequence rawPassword, String encodedPassword) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 写死</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        encodedPassword = stringRedisTemplate.opsForValue().get(&quot;13243922402&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return encodedPassword.equals(encode(encodedPassword));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>先来看看整个认证的流程图：</p>
<p><img decoding="async" loading="lazy" alt="image-20230216133620298" src="/assets/images/image-20230216133620298-5f63300eb8e0aa01307e67ad37ce956b.png" width="1067" height="650" class="img_ev3q"></p>
<p><em>现在，虽然已经实现了对真实数据库的访问，但是还是使用自带的登录页面，那么怎么才能通过前端项目的真实的用户登录页面访问呢？</em></p>
<p>登录成功后，每次访问其他资源都要判断一下token是否正确,如果正确才能访问，如果不正确返回异常信息。</p>
<p>4、自定义用户认证接口（过滤器1）</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 不用加Component注解 不需要加入IOC  过滤器由tomcat进行管理 </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package space.jachen.yygh.security.filter;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @author JaChen</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @date 2022/12/23 22:45</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import com.fasterxml.jackson.databind.ObjectMapper;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.data.redis.core.RedisTemplate;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.authentication.AuthenticationManager;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.core.Authentication;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.core.AuthenticationException;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.web.util.matcher.AntPathRequestMatcher;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import space.jachen.yygh.common.result.JsonData;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import space.jachen.yygh.common.result.ResultCodeEnum;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import space.jachen.yygh.common.utils.JwtHelper;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import space.jachen.yygh.common.utils.ResponseUtil;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import space.jachen.yygh.security.custom.CustomUser;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import space.jachen.yygh.vo.user.LoginVo;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import javax.annotation.Resource;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import javax.servlet.FilterChain;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import javax.servlet.ServletException;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import javax.servlet.http.HttpServletRequest;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import javax.servlet.http.HttpServletResponse;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.io.IOException;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.HashMap;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.Map;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * &lt;p&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 登录过滤器，继承UsernamePasswordAuthenticationFilter，对用户名密码进行登录校验</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * &lt;/p&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class TokenLoginFilter extends UsernamePasswordAuthenticationFilter {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Resource</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private RedisTemplate redisTemplate;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public TokenLoginFilter(AuthenticationManager authenticationManager,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                            RedisTemplate redisTemplate ) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //设置认证管理器</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.setAuthenticationManager(authenticationManager);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //设置登录的地址和请求方式</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.setRequiresAuthenticationRequestMatcher(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                new AntPathRequestMatcher(&quot;/yygh/user/loginSecurity&quot;, &quot;POST&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.redisTemplate = redisTemplate;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 登录认证</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 走这个登录认证流程 不走原先的登录接口了</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param req</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param res</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @throws AuthenticationException</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public Authentication attemptAuthentication(HttpServletRequest req, HttpServletResponse res)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            throws AuthenticationException {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // 获取用户名的方法  简单封装方法</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            LoginVo loginVo = new ObjectMapper().readValue(req.getInputStream(), LoginVo.class);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            String pwd = (String) redisTemplate.opsForValue().get(loginVo.getPhone());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // 将用户名和密码封装到Authentication</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Authentication authenticationToken =</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    new UsernamePasswordAuthenticationToken(loginVo.getPhone(), pwd);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // 调取getAuthenticationManager认证</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return this.getAuthenticationManager().authenticate(authenticationToken);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } catch (IOException e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 登录成功 认证成功调用的方法</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param request</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param response</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param chain</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param auth</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @throws IOException</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @throws ServletException</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain,Authentication auth) throws IOException, ServletException {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 1、通过Authentication获取认证的对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        CustomUser customUser = (CustomUser) auth.getPrincipal();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 2、通过JwtHelper生成token</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String token = JwtHelper.createToken(Long.parseLong(customUser.getLoginVo().getOpenid()), customUser.getLoginVo().getPhone());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 3、获取用户的权限</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Collection&lt;GrantedAuthority&gt; authorities = customUser.getAuthorities();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 4、将权限保存到Redis中</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // redisTemplate.boundValueOps(customUser.getUsername()).set(authorities);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 5、保存登录日志</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // loginLogService.recordLoginLog(customUser.getUsername(), IpUtil.getIpAddress(request),1,&quot;登录成功&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 创建一个Map</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        map.put(&quot;token&quot;, token);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 6、通过ResponseUtil工具类响应到前端</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ResponseUtil.out(response, JsonData.ok(map));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 登录失败</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param request</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param response</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param e</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @throws IOException</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @throws ServletException</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    protected void unsuccessfulAuthentication(HttpServletRequest request, HttpServletResponse response, AuthenticationException e) throws IOException, ServletException {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (e.getCause() instanceof RuntimeException){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            ResponseUtil.out(response, JsonData.build(null,204,e.getMessage()));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            ResponseUtil.out(response,JsonData.build(null, ResultCodeEnum.LOGIN_MOBLE_ERROR));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 如果想在里面加入@Autowired  则需要添加配置类</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package space.jachen.yygh.security.config;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.context.annotation.Configuration;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.data.redis.core.RedisTemplate;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.config.annotation.web.builders.WebSecurity;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.config.http.SessionCreationPolicy;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import space.jachen.yygh.security.filter.TokenLoginFilter;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import javax.annotation.Resource;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @author JaChen</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @date 2022/12/23 22:24</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@EnableWebSecurity //@EnableWebSecurity是开启SpringSecurity的默认行为</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@EnableGlobalMethodSecurity(prePostEnabled = true)//开启注解功能，默认禁用注解</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class WebSecurityConfig extends WebSecurityConfigurerAdapter {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Resource</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private RedisTemplate redisTemplate;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    protected void configure(HttpSecurity http) throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 这是配置的关键，决定哪些 接口开启防护，哪些接口绕过防护</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        http</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                //关闭csrf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .csrf().disable()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                // 开启跨域以便前端调用接口</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .cors().and()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .authorizeRequests()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                // 指定某些接口不需要通过验证即可访问。登陆接口肯定是不需要认证的</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .antMatchers(&quot;/yygh/user/login&quot;).permitAll()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                // 这里意思是其它所有接口需要认证才能访问</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .anyRequest().authenticated()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .and()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                //TokenAuthenticationFilter放到UsernamePasswordAuthenticationFilter的前面，</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                // 这样做就是为了除了登录的时候去查询数据库外，其他时候都用token进行认证。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//                .addFilterBefore(new TokenAuthenticationFilter(redisTemplate), UsernamePasswordAuthenticationFilter.class)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .addFilter(new TokenLoginFilter(authenticationManager(), redisTemplate));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //禁用session</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 配置哪些请求不拦截</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 排除swagger相关请求</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param web</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @throws Exception</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void configure(WebSecurity web) throws Exception {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        web.ignoring().antMatchers(&quot;/favicon.ico&quot;,&quot;/swagger-resources/**&quot;, &quot;/webjars/**&quot;, &quot;/v2/**&quot;, &quot;/swagger-ui.html/**&quot;, &quot;/doc.html&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>5、配置用户认证 （过滤器2）</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package space.jachen.yygh.security.filter;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @author JaChen</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @date 2022/12/23 23:04</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.data.redis.core.RedisTemplate;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.core.GrantedAuthority;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.security.core.context.SecurityContextHolder;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.util.StringUtils;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import org.springframework.web.filter.OncePerRequestFilter;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import space.jachen.yygh.common.result.JsonData;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import space.jachen.yygh.common.result.ResultCodeEnum;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import space.jachen.yygh.common.utils.JwtHelper;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import space.jachen.yygh.common.utils.ResponseUtil;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import javax.annotation.Resource;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import javax.servlet.FilterChain;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import javax.servlet.ServletException;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import javax.servlet.http.HttpServletRequest;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import javax.servlet.http.HttpServletResponse;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.io.IOException;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.Collection;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * &lt;p&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 认证解析token过滤器</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * &lt;/p&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class TokenAuthenticationFilter extends OncePerRequestFilter {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Resource</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private RedisTemplate redisTemplate;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public TokenAuthenticationFilter(RedisTemplate redisTemplate) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.redisTemplate = redisTemplate;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain chain)throws IOException, ServletException {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        logger.info(&quot;认证解析token过滤器的url:&quot;+request.getRequestURI());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //如果是登录接口，直接放行</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if(&quot;/yygh/user/login&quot;.equals(request.getRequestURI())) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            chain.doFilter(request, response);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        UsernamePasswordAuthenticationToken authentication = getAuthentication(request);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if(null != authentication) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            SecurityContextHolder.getContext().setAuthentication(authentication);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            //放行请求</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            chain.doFilter(request, response);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            ResponseUtil.out(response, JsonData.build(null, ResultCodeEnum.PERMISSION));//209  没有权限</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private UsernamePasswordAuthenticationToken getAuthentication(HttpServletRequest request) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // token置于header里</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String token = request.getHeader(&quot;token&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        logger.info(&quot;token:&quot;+token);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (!StringUtils.isEmpty(token)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            String username = JwtHelper.getUserName(token);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            logger.info(&quot;username:&quot;+username);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (!StringUtils.isEmpty(username)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                //从Redis中获取权限</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                Collection&lt;GrantedAuthority&gt; authorities = (Collection&lt;GrantedAuthority&gt;) redisTemplate.boundValueOps(username).get();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                return new UsernamePasswordAuthenticationToken(username, null, authorities);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                //返回一个认证对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                //return new UsernamePasswordAuthenticationToken(username, null, Collections.emptyList());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return null;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>现在就可以通过swagger测试登录了。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于Spring Security的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/sentinel/spring-security">Spring Security</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-management-system">SQL优化积累笔记</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-03-02T00:00:00.000Z">2023年3月2日</time> · <!-- -->阅读需 11 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><strong>背景</strong>：<em>因为日常工作和学习中难免会与数据库打交道，其中如何快速的从庞大的数据库中精准的查找到我们想要的信息一直是很热的话题，所以写下此篇笔记，亦在不断地积累有关数据库查询优化方面的经验，从而能高效的使数据传递给外界，给用户更好的体验，这篇文章会一直更新下去</em>。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="or与union的执行效率比较">or与union的执行效率比较<a href="#or与union的执行效率比较" class="hash-link" aria-label="or与union的执行效率比较的直接链接" title="or与union的执行效率比较的直接链接">​</a></h2>
<p>stackoverflow链接: <a href="https://leetcode.cn/link/?target=https://stackoverflow.com/questions/13750475/sql-performance-union-vs-or%EF%BC%89" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/13750475/sql-performance-union-vs-or）</a></p>
<p>当SQL语句有多个or语句时，可以考虑使用union或者union all代替来提高速度。使用or的SQL语句往往无法进行优化，导致速度变慢。但这不是固定的，有时候使用or速度会更快些。具体情况还要经过测试为准。如果加索引的话，也可能实现速度优化。</p>
<p>实验表格如下,实际数据有2,000,000条，从里面返回大约最多1000行左右的数据。</p>
<table><thead><tr><th>X</th><th>Y</th><th>Inline</th><th>CDP</th><th>T</th></tr></thead><tbody><tr><td>12002400</td><td>5801000</td><td>300</td><td>300</td><td>3400</td></tr><tr><td>12002408</td><td>5801005</td><td>300</td><td>301</td><td>3402</td></tr><tr><td>12002416</td><td>5801010</td><td>300</td><td>302</td><td>3404</td></tr><tr><td>12002424</td><td>5801015</td><td>300</td><td>303</td><td>3406</td></tr><tr><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr></tbody></table>
<p>or语句（部分节选）</p>
<p>SELECT * FROM tablename where (cdp= 300 and inline=301) or (cdp= 301 and inline=301) or (cdp= 302 and inline=301) or (cdp= 303 and inline=301) or (cdp= 304 and inline=301) or (cdp= 305 and inline=301) or (cdp= 306 and inline=301) or (cdp= 307 and inline=301)</p>
<p>union all语句（部分节选）</p>
<p>SELECT * FROM tablename where (inline= 300 and cdp=300) union all SELECT * FROM tablename where (inline= 301 and cdp=300) union all SELECT * FROM tablename where (inline= 302 and cdp=300) union all SELECT * FROM tablename where (inline= 303 and cdp=300)
返回不规则的900条数据，前者用了60多秒，后者用了8秒左右。</p>
<p>总结：</p>
<ol>
<li>Union：对两个结果集进行并集操作，不包括重复行，同时进行默认规则的排序； 即：去重+排序</li>
<li>Union All：对两个结果集进行并集操作，包括重复行，不进行排序； 即：不去重+不排序</li>
<li>对于单列来说，用or是没有任何问题的，但是or涉及到多个列的时候，每次select只能选取一个index，如果选择了area，population就需要进行table-scan，即全部扫描一遍，但是使用union就可以解决这个问题，分别使用area和population上面的index进行查询。 但是这里还会有一个问题就是，UNION会对结果进行排序去重，可能会降低一些performance(这有可能是方法一比方法二快的原因），所以最佳的选择应该是两种方法都进行尝试比较。</li>
</ol>
<p>2023/02/09</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="shell脚本批量插入mock数据">shell脚本批量插入mock数据<a href="#shell脚本批量插入mock数据" class="hash-link" aria-label="shell脚本批量插入mock数据的直接链接" title="shell脚本批量插入mock数据的直接链接">​</a></h2>
<p>shell脚本</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#!/bin/bash</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &quot;请输入字段servnumber的值：&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">read serber</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">echo &quot;请输入创建sql语句的数量：&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">read number</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># char=`head /dev/urandom | tr -dc 0-9 | head -c 11`</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">for (( i=0;i&lt;$number;i++ ))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        do</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        pass=`head /dev/urandom | tr -dc a-z | head -c 8`</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        let serber=serber+1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        echo &quot;insert into test(id,username,servnumber,password,createtime) values(&#x27;$i&#x27;,&#x27;user${i}&#x27;,&#x27;${serber}&#x27;,&#x27;$pass&#x27;,now());&quot; &gt;&gt;sql1.txt</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     done</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>尽量避免使用select *from ，尽量精确到想要的结果字段。
尽量避免条件使用or。
记得加上limit 限制行数，避免数据量过大消耗性能。
使用模糊查询时，%放在前面是会使索引失效。
要小心条件字段类型的转换。</p>
<p>2023/02/11</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="线上调优-慢查询日志配置">线上调优-慢查询日志配置<a href="#线上调优-慢查询日志配置" class="hash-link" aria-label="线上调优-慢查询日志配置的直接链接" title="线上调优-慢查询日志配置的直接链接">​</a></h2>
<p>最好 nginxi访问日志，流量重放在测试环境中；迫不得已再线上调</p>
<ul>
<li>第一步：查看是否已经开启了慢查询日志</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql&gt; show variables like &#x27;slow%&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+---------------------+--------------------------------------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| Variable_name       | Value                                |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+---------------------+--------------------------------------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| slow_launch_time    | 2                                    |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| slow_query_log      | OFF                                  |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| slow_query_log_file | /data/mydata/jachen-public-slow.log |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+---------------------+--------------------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>第二步：开启慢查询日志</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">set global slow_query_log = on ;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">日志路径也可以自定义：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">set global slow_query_log_file = &#x27;路径&#x27;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>第三步：查看慢查询的时间临界值</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">show variables like &#x27;%long%&#x27;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>第四步：设置慢查询的时间标准</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">set long_query_time=0.4;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>注意：假如运行时间正好等于long_query_time的情况，并不会被记录下来。也就是说，在mysql源码里是判断大于long_query_time，而非大于等于。</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">永久生效的设置方法：修改配置文件 vi /etc/my.cnf</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[mysqld]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">slow_query_log = 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">long_query_time = 0.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">slow_query_log_file =/usr/local/mysql/mysql_slow.log</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">最后重新连接才能生效，不必重启服务器！</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>执行耗时sql：</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">SELECT * FROM emp;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">SELECT * FROM emp WHERE deptid &gt; 1;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>查询慢查询记录数：</strong></p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">SHOW</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">GLOBAL</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">STATUS</span><span class="token plain"> </span><span class="token operator">LIKE</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;%Slow_queries%&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>查询日志：</strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">vim /var/lib/mysql/bogon-slow.log</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>mysqldumpslow分析工具：</strong></p>
<p>在生产环境中，如果要手工分析日志，查找、分析SQL，显然是个体力活，MySQL提供了日志分析工具mysqldumpslow。退出mysql命令行，执行以下命令：</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">-- 查看mysqldumpslow的帮助信息</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysqldumpslow </span><span class="token comment" style="color:rgb(98, 114, 164)">--help</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- 工作常用参考</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- 1.得到返回记录集最多的10个SQL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysqldumpslow </span><span class="token operator">-</span><span class="token plain">s r </span><span class="token operator">-</span><span class="token plain">t </span><span class="token number">10</span><span class="token plain"> </span><span class="token operator">/</span><span class="token plain">var</span><span class="token operator">/</span><span class="token plain">lib</span><span class="token operator">/</span><span class="token plain">mysql</span><span class="token operator">/</span><span class="token plain">bogon</span><span class="token operator">-</span><span class="token plain">slow</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">log</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- 2.得到访问次数最多的10个SQL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysqldumpslow </span><span class="token operator">-</span><span class="token plain">s c </span><span class="token operator">-</span><span class="token plain">t </span><span class="token number">10</span><span class="token plain"> </span><span class="token operator">/</span><span class="token plain">var</span><span class="token operator">/</span><span class="token plain">lib</span><span class="token operator">/</span><span class="token plain">mysql</span><span class="token operator">/</span><span class="token plain">bogon</span><span class="token operator">-</span><span class="token plain">slow</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">log</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- 3.得到按照时间排序的前10条里面含有左连接的查询语句</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysqldumpslow </span><span class="token operator">-</span><span class="token plain">s t </span><span class="token operator">-</span><span class="token plain">t </span><span class="token number">10</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain">g </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;left join&quot;</span><span class="token plain"> </span><span class="token operator">/</span><span class="token plain">var</span><span class="token operator">/</span><span class="token plain">lib</span><span class="token operator">/</span><span class="token plain">mysql</span><span class="token operator">/</span><span class="token plain">bogon</span><span class="token operator">-</span><span class="token plain">slow</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">log</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- 4.另外建议在使用这些命令时结合 | 和more 使用 ，否则有可能出现爆屏情况</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysqldumpslow </span><span class="token operator">-</span><span class="token plain">s r </span><span class="token operator">-</span><span class="token plain">t </span><span class="token number">10</span><span class="token plain"> </span><span class="token operator">/</span><span class="token plain">var</span><span class="token operator">/</span><span class="token plain">lib</span><span class="token operator">/</span><span class="token plain">mysql</span><span class="token operator">/</span><span class="token plain">bogon</span><span class="token operator">-</span><span class="token plain">slow</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">log </span><span class="token operator">|</span><span class="token plain"> more</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>-a: 将数字抽象成N，字符串抽象成S</p>
</li>
<li>
<p>-s: 是表示按照何种方式排序</p>
</li>
<li>
<ul>
<li>c: 访问次数<!-- -->
<ul>
<li>l: 锁定时间</li>
<li>r: 返回记录</li>
</ul>
</li>
</ul>
</li>
<li>
<ul>
<li>t: 查询时间</li>
<li>al:平均锁定时间</li>
<li>ar:平均返回记录数</li>
<li>at:平均查询时间</li>
</ul>
</li>
<li>
<p>-t: 即为返回前面多少条的数据</p>
</li>
<li>
<p>-g: 后边搭配一个正则匹配模式，大小写不敏感的</p>
</li>
</ul>
<p>2023/02/15</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sql语句执行过程解析">sql语句执行过程解析<a href="#sql语句执行过程解析" class="hash-link" aria-label="sql语句执行过程解析的直接链接" title="sql语句执行过程解析的直接链接">​</a></h2>
<p><img decoding="async" loading="lazy" alt="image-20230223160243626" src="/assets/images/image-20230223160243626-852c258d2994473f82bad8ae86bcd5df.png" width="1081" height="132" class="img_ev3q"></p>
<p>介绍如何开启性能详情</p>
<ul>
<li>第一步：查看性能详情是否开启</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql&gt; show variables like &#x27;%profiling%&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+------------------------+-------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| Variable_name          | Value |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+------------------------+-------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| have_profiling         | YES   |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| profiling              | OFF   |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| profiling_history_size | 15    |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+------------------------+-------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>第二步：开启性能记录功能</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">set profiling = on ;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>第三步：查看性能的记录</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql&gt; show profiles;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+----------+------------+---------------------------------------------------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| Query_ID | Duration   | Query                                             |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+----------+------------+---------------------------------------------------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|        1 | 0.00177775 | show variables like &#x27;%profiling%&#x27;                 |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|        2 | 0.00037900 | select * from test where id=&#x27;087878&#x27;              |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|        3 | 0.34618025 | select * from test where servnumber=&#x27;1367008787&#x27;  |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">|        4 | 0.31986825 | select * from test where servnumber=&#x27;13670087879&#x27; |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+----------+------------+---------------------------------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>第四步：查看语句的执行性能详情</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql&gt; show profile for query 4;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+----------------------+----------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| Status               | Duration |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+----------------------+----------+</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| starting             | 0.000100 |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| checking permissions | 0.000010 |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| Opening tables       | 0.000023 |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| init                 | 0.000045 |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| System lock          | 0.000015 |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| optimizing           | 0.000016 |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| statistics           | 0.000028 |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| preparing            | 0.000020 |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| executing            | 0.000006 |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| Sending data         | 0.319489 |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| end                  | 0.000037 |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| query end            | 0.000012 |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| closing tables       | 0.000012 |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| freeing items        | 0.000040 |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">| cleaning up          | 0.000017 |</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">+----------------------+----------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>性能线程的详细解释官方文档链接</em>：<a href="https://dev.mysql.com/doc/refman/5.7/en/general-thread-states.html" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/doc/refman/5.7/en/general-thread-states.html</a></p>
<p>2023/02/16</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="设计表的null值问题">设计表的NULL值问题<a href="#设计表的null值问题" class="hash-link" aria-label="设计表的NULL值问题的直接链接" title="设计表的NULL值问题的直接链接">​</a></h2>
<p>1、字段不添加null  都是not null，默认值</p>
<p><img decoding="async" loading="lazy" alt="image-20230222093720407" src="/assets/images/image-20230222093720407-7ffbef4dda48f5ec8896c86307b97bf1.png" width="960" height="93" class="img_ev3q"></p>
<p>2、把字段都设置为not null ，添加特殊字段，把数据存储j为JSON格式  </p>
<p>2023/02/18</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="关联查询优化">关联查询优化<a href="#关联查询优化" class="hash-link" aria-label="关联查询优化的直接链接" title="关联查询优化的直接链接">​</a></h2>
<p>1、保证被驱动表的JOIN字段已经创建了索引
2、需要JOIN 的字段，数据类型保持绝对一致。
3、LEFT JOIN 时，选择小表作为驱动表，大表作为被驱动表 。减少外层循环的次数。
4、INNER JOIN 时，MySQL会自动将小结果集的表选为驱动表 。选择相信MySQL优化策略。
5、能够直接多表关联的尽量直接关联，不用子查询。(减少查询的趟数)
6、不建议使用子查询，建议将子查询SQL拆开结合程序多次查询，或使用 JOIN 来代替子查询。
7、衍生表建不了索引</p>
<p>2023/02/19</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="子查询优化">子查询优化<a href="#子查询优化" class="hash-link" aria-label="子查询优化的直接链接" title="子查询优化的直接链接">​</a></h2>
<p>使用连接（JOIN）查询来替代子查询。**连接查询不需要建立临时表 ，其速度比子查询 要快 ，如果查询中使用索引的话，性能就会更好.
例如：尽量不要使用NOT IN 或者 NOT EXISTS，用LEFT JOIN xxx ON xx WHERE xx IS NULL替代</p>
<p>2023/02/22</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="数据库表设计">数据库表设计<a href="#数据库表设计" class="hash-link" aria-label="数据库表设计的直接链接" title="数据库表设计的直接链接">​</a></h2>
<ul>
<li>字段长度：能使用int就不要使用varchar、char，能用varchar(16)就不要使用varchar(256)</li>
<li>字段选择：固定长度的类型最好使用char,能使用tinyinti就不要使用int</li>
<li>默认值：最好给每个字段个默认值，最好不能为null,即not null default</li>
<li>适当索引：为每个表创建合理的索引，如唯一索引组合索引的场景以及普通索引的场景</li>
</ul>
<p>2023/02/28</p>
<hr></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于数据仓库相关的话题" class="tag_zVej tagRegular_sFm0" href="/blog/tags/shujuku">数据库</a></li><li class="tag_QGVx"><a title="关于MySQL的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/mysql">MySQL</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/mysql-CachesBuffers-reason">深入探究mysql8.x去掉CachesBuffers原因</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-02-20T00:00:00.000Z">2023年2月20日</time> · <!-- -->阅读需 10 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><strong>背景</strong>：<em>我们通常理解的mysql5.7过渡到8.0是由于查询缓存很鸡肋，要保证每次查询都是相同的sql查询语句，命中率自然会很低。但是真的只是因为这个原因吗？那么我要是在高并发下请求同一sql的场景这显然也是存在的，那为什么还要去掉这层缓存呢？</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="官方描述">官方描述<a href="#官方描述" class="hash-link" aria-label="官方描述的直接链接" title="官方描述的直接链接">​</a></h2>
<p>MySQL 8.0 在缓存方面也进行了一些改变，以下是一些主要变化：</p>
<ol>
<li>自适应哈希索引：MySQL 8.0 引入了自适应哈希索引，用于在内存中缓存查询结果。这种索引可以根据查询的频率和模式自动调整大小，从而提高查询性能。</li>
<li>持久化内存引擎：MySQL 8.0 引入了 InnoDB 持久化内存引擎，这是一种将数据存储在内存中的引擎。与传统的内存引擎不同，持久化内存引擎可以将数据持久化到磁盘上，以避免数据丢失。</li>
<li>更好的查询缓存：MySQL 8.0 引入了更好的查询缓存机制，用于缓存查询结果。与之前的版本不同，MySQL 8.0 不再使用全局查询缓存，而是改为使用基于查询语句的缓存。</li>
<li>更好的内存管理：MySQL 8.0 改进了内存管理，使得内存使用更加高效。这包括改进了内存分配器、提供了更好的内存监控和警告功能等。</li>
</ol>
<p>其中第三点提到了 MySQL 8.0 引入了更好的查询缓存机制，用于缓存查询结果，这与之前的版本不同，MySQL 8.0 不再使用全局查询缓存，而是改为使用基于查询语句的缓存。这里我们具体展开来看看这个变化。</p>
<p>在之前的 MySQL 版本中，查询缓存是一种可用于缓存 SELECT 语句的结果集的机制。这个机制通过在内存 中缓存查询结果集，以便在以后执行相同的查询时可以直接从缓存中读取结果集，而无需执行查询。这种机制可以大大提高查询性能，特别是在有大量重复查询的情况下。</p>
<p>然而，MySQL 8.0 中的查询缓存与之前版本不同，它不再使用全局查询缓存，而是改为使用基于查询语句的缓存。具体来说，每个查询都会被单独缓存，并且只有相同的查询（包括查询语句和参数）才能从缓存中获取结果集。这种机制可以避免之前版本中遇到的一些问题，比如全局查询缓存锁和内存分配问题。</p>
<p>另外，MySQL 8.0 还支持对查询缓存进行更细粒度的控制，包括可以对某些查询禁用查询缓存，可以在查询语句中指定查询结果集是否需要被缓存等。</p>
<p>虽然 MySQL 8.0 引入了基于查询语句的缓存机制，但是需要注意的是，查询缓存并不总是对性能有益。对于一些查询频率低、数据更新频繁的情况，缓存可能会浪费内存，而不是提高性能。因此，需要根据具体情况来评估是否使用查询缓存。</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="探究去掉查询缓存的原因">探究去掉查询缓存的原因<a href="#探究去掉查询缓存的原因" class="hash-link" aria-label="探究去掉查询缓存的原因的直接链接" title="探究去掉查询缓存的原因的直接链接">​</a></h2>
<p>我们先来看看mysql5.7服务端获取客户端请求的基本流程，查询缓存是在解析与优化模块的开始位置，也就意味着它是以全局查询缓存存在的，那么这样有什么弊端呢？它能否保证高并发写的读写一致呢？</p>
<p><img decoding="async" loading="lazy" alt="image-20230220191808225" src="/assets/images/image-20230220191808225-16977303370541-e4f464f4dacbee7a54fc6a8bfd0161ac.png" width="1597" height="1155" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="管理策略层面 的缺失">管理策略层面的缺失<a href="#管理策略层面的缺失" class="hash-link" aria-label="管理策略层面的缺失的直接链接" title="管理策略层面的缺失的直接链接">​</a></h3>
<p>在高并发下查询同一个sql语句select *from user where id = 1;那么存在查询缓存的确可以提高查询的效率，这是我们普遍认为的正常情况。但是在不正常的情况下是会出大问题的，如果我们已经在内存中的数据在磁盘中进行了update修改，我们就必须要使我们缓存中的数据更新，保证数据的一致性，<strong>但是在mysql5.7中，对内存是没有管理策略的，内存中数据的生效、失效、过期都没有进行标记</strong>。那么如果不能保证缓存数据的一致性就会查到脏数据，如果我们是在对数据一致性要求不高的场景下的程序，那么使用查询缓存是不影响的，总不能正在玩着游戏，你停机游戏对数据进行更新？</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="底层有完善的缓存机制">底层有完善的缓存机制<a href="#底层有完善的缓存机制" class="hash-link" aria-label="底层有完善的缓存机制的直接链接" title="底层有完善的缓存机制的直接链接">​</a></h3>
<p>我们的排序，大数据量的查找，order by ，join操作等，join是左表去匹配右表，左表拿出一行数据到右表一一对比，这个比的过程是绝对不会从磁盘中一一拿出来比的，它底层会把数据加载到内存的缓冲区<strong>buffer</strong>中，再进行比较。</p>
<p>处理连接的瓶颈中并发连接数会有限制，比如500个线程，虽然它从缓存内存中取很快，但是对于select语句，只要做好优化，比如创建好索引，在磁盘中取也是不慢的，而且mysql底层的磁盘是有机的组合的，并且在高频的访问中，它也会有读buffer，甚至还存在写buffer，如果读buffer中的数据没有被修改，它每次也是在内存中 读的，也不会在磁盘中读，所以就没必要再加查询缓存了。</p>
<p><img decoding="async" loading="lazy" alt="image-20230220200748912" src="/assets/images/image-20230220200748912-16977303462983-d6a6d16affe653b8e9f493d7d75b6282.png" width="1115" height="815" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="查询缓存容量小存在瓶颈且命中率也很低">查询缓存容量小，存在瓶颈，且命中率也很低<a href="#查询缓存容量小存在瓶颈且命中率也很低" class="hash-link" aria-label="查询缓存容量小，存在瓶颈，且命中率也很低的直接链接" title="查询缓存容量小，存在瓶颈，且命中率也很低的直接链接">​</a></h3>
<p>这个缓存机制是由一系列小缓存组成的。比如表缓存，记录缓存，key缓存，权限缓存等 。只有相同的SQL语句才会命中查询缓存。两个查询请求在任何字符上的不同（例如：空格、注释、大小写），都会导致缓存不会命中。在两条查询之间 有 INSERT 、 UPDATE 、 DELETE 、 TRUNCATE TABLE 、 ALTER TABLE 、 DROP TABLE 或 DROP DATABASE 语句也会导致缓存失效，所以在MySQL 8之后就抛弃了这个功能。</p>
<p>如果一张表中有8000万条数据，查询缓存显然就会力不从心，如果只存热点数据呢？即便是使用lru算法，我们也无法确定已经存在mysql的缓存数据，即便我们缓存了10w条数据，但是我们不知道是8000w条中的哪一个，就会发生缓存穿透，无法命中。加缓存集群更是无从谈起，所以mysql8.0就直接废弃了。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="替代方案">替代方案<a href="#替代方案" class="hash-link" aria-label="替代方案的直接链接" title="替代方案的直接链接">​</a></h2>
<p>应用层组织缓存，最简单的是使用redis,ehcached等</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a href="#总结" class="hash-link" aria-label="总结的 直接链接" title="总结的直接链接">​</a></h2>
<p>缓存的意义在于快速查询提升系统性能，可以灵活控制缓存的一致性
8.0之前让DBA一直禁用的mysql缓存的限制：</p>
<ol>
<li>MySQL基本没有手段灵活的管理缓存失效和生效，尤其对于频繁更新的表；</li>
<li>SQL必须完全一致才会导致cache命中；</li>
<li>为了节省内存空间，太大的result set不会被cache(query_cache_limit)；</li>
<li>MySQL缓存在分库分表环境下是不起作用的；</li>
<li>执行SQL里有触发器，自定义函数时，MySQL缓存也是不起作用的；</li>
<li>在表的结构或数据发生改变时，基于该表相关cache.立即全部失效。</li>
</ol></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于MySQL的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/mysql">MySQL</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-Sentinel-flow-control">流量防卫兵-Sentinel</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-02-11T00:00:00.000Z">2023年2月11日</time> · <!-- -->阅读需 13 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>随着微服务的流行，服务和服务之间的稳定性变得越来越重要。Sentinel 是面向分布式、多语言异构化服务架构的流量治理组件，主要以流量为切入点，从流量路由、流量控制、流量整形、熔断降级、系统自适应过载保护、热点流量防护等多个维度来帮助开发者保障微服务的稳定性。</em></p>
<p>官方文档：<a href="https://sentinelguard.io/zh-cn/index.html" target="_blank" rel="noopener noreferrer">https://sentinelguard.io/zh-cn/index.html</a></p>
<p><img decoding="async" loading="lazy" alt="image-20230205223154781" src="/assets/images/image-20230205223154781-7978af5a9eed16fe9b2861e489089f0f.png" width="1435" height="781" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1什么是sentinel">1、什么是Sentinel<a href="#1什么是sentinel" class="hash-link" aria-label="1、什么是Sentinel的直接链接" title="1、什么是Sentinel的直接链接">​</a></h2>
<ul>
<li>阿里巴巴开源的分布式系统流控工具</li>
<li>以流量为切入点，从流量控制、熔断降级、系统负载保护等多个维度保护服务的稳定性</li>
<li>丰富的应用场景：消息削峰填谷、集群流量控制、实时熔断下游不可用应用等</li>
<li>完备的实时监控：Sentinel 同时提供实时的监控功能</li>
<li>提供开箱即用的与其它开源框架/库的整合模块，例如与 Spring Cloud、Dubbo、gRPC 的整合</li>
</ul>
<p>在微服务中扮演者治理者的作用</p>
<p><img decoding="async" loading="lazy" alt="image-20230205223327662" src="/assets/images/image-20230205223327662-26c215f68dcd30112146078c58659825.png" width="557" height="244" class="img_ev3q"></p>
<ul>
<li>核心概念：<!-- -->
<ul>
<li>资源：是 Sentinel 中的核心概念之一，可以是java程序中任何内容，可以是服务或者方法甚至代码，总结起来就是我们要保护的东西</li>
<li>规则：定义怎样的方式保护资源，主要包括流控规则、熔断降级规则等</li>
</ul>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="核心概念" src="/assets/images/核心概念-60cc01b2ecff484c0628899f529bdc72.png" width="1470" height="686" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2整合微服务项目实操">2、整合微服务项目实操<a href="#2整合微服务项目实操" class="hash-link" aria-label="2、整合微服务项目实操的直接链接" title="2、整合微服务项目实操的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21安装">2.1、安装<a href="#21安装" class="hash-link" aria-label="2.1、安装的直接链接" title="2.1、安装的直接链接">​</a></h3>
<ul>
<li>
<p>Sentinel 分为两个部分</p>
<ul>
<li>核心库（Java 客户端）不依赖任何框架/库，能够运行于所有 Java 运行时环境，同时对 Dubbo、Spring Cloud 等框架也有较好的支持。</li>
<li>控制台（Dashboard）基于 Spring Boot 开发，打包后可以直接运行，不需要额外的 Tomcat 等应用容器。</li>
</ul>
</li>
<li>
<p>微服务引入Sentinel依赖</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  		</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">com.alibaba.cloud</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">spring-cloud-starter-alibaba-sentinel</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Sentinel控制台搭建</p>
</li>
<li>
<p>文档：<a href="https://github.com/alibaba/Sentinel/wiki/%E6%8E%A7%E5%88%B6%E5%8F%B0" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/Sentinel/wiki/控制台</a></p>
</li>
<li>
<p>控制台包含如下功能:</p>
<ul>
<li>
<p>查看机器列表以及健康情况：收集 Sentinel 客户端发送的心跳包，用于判断机器是否在线。</p>
</li>
<li>
<p>监控 (单机和集群聚合)通过 Sentinel 客户端暴露的监控 API，定期拉取并且聚合应用监控信息，最终可以实现<strong>秒级</strong>的实时监控。</p>
</li>
<li>
<p>规则管理和推送：统一管理推送规则。</p>
</li>
<li>
<p>鉴权：生产环境中鉴权非常重要。这里每个开发者需要根据自己的实际情况进行定制。</p>
</li>
</ul>
<blockquote>
<p>注意：Sentinel 控制台目前仅支持单机部署</p>
</blockquote>
</li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">//启动 Sentinel 控制台需要 JDK 版本为 1.8 及以上版本，</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//-Dserver.port=8080 用于指定 Sentinel 控制台端口为 8080 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//默认用户名和密码都是 sentinel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">给sentinel-dashboard-1.8.2.jar增加权限</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">chomd 777 sentinel-dashboard-1.8.2.jar</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">java -Dserver.port=8080 -Dcsp.sentinel.dashboard.server=localhost:8080 -Dproject.name=sentinel-dashboard -jar sentinel-dashboard-1.8.2.jar</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">守护进程启动</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nohub java -Dserver.port=8080 -Dcsp.sentinel.dashboard.server=localhost:8080 -Dproject.name=sentinel-dashboard -jar sentinel-dashboard-1.8.2.jar</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">简化 默认端口8080</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">java -jar sentinel-dashboard-1.8.2.jar </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>界面效果</p>
<p><img decoding="async" loading="lazy" alt="image-20230205231438988" src="/assets/images/image-20230205231438988-4f7a9805496b274974b237b9d6ab11e6.png" width="1895" height="864" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22限流">2.2、限流<a href="#22限流" class="hash-link" aria-label="2.2、限流的直接链接" title="2.2、限流的直接链接">​</a></h3>
<p>简单实操：</p>
<ul>
<li>
<p>多个微服务接入Sentinel配置</p>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">spring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">cloud</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">sentinel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">transport</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">dashboard</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 127.0.0.1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">8080</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">9999</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#dashboard: 8080 控制台端口</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#port: 9999 本地启的端口，随机选个不能被占用的，与dashboard进行数据交互，会在应用对应的机器上启动一个 Http Server，该 Server 会与 Sentinel 控制台做交互, 若被占用,则开始+1一次扫描 默认为 8719</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>微服务注册上去后，由于Sentinel是<strong>懒加载</strong>模式，所以需要访问微服务后才会在控制台出现</p>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="image-20230205233156696" src="/assets/images/image-20230205233156696-890eea7fa0237a13a2740f08d4e04cd8.png" width="1881" height="514" class="img_ev3q"></p>
<ul>
<li>限流配置实操<!-- -->
<ul>
<li>控制台配置</li>
</ul>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="image-20230205233330855" src="/assets/images/image-20230205233330855-2e03eef42a75ffd561d4583ebae41701.png" width="1590" height="513" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="23流量控制flow-control">2.3、流量控制（flow control）<a href="#23流量控制flow-control" class="hash-link" aria-label="2.3、流量控制（flow control）的直接链接" title="2.3、流量控制（flow control）的直接链接">​</a></h3>
<ul>
<li>
<p>流控文档</p>
<ul>
<li><a href="https://github.com/alibaba/Sentinel/wiki/%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6#%E5%9F%BA%E4%BA%8E%E8%B0%83%E7%94%A8%E5%85%B3%E7%B3%BB%E7%9A%84%E9%99%90%E6%B5%81" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/Sentinel/wiki/流量控制#基于调用关系的限流</a></li>
</ul>
</li>
<li>
<p>原理是监控应用流量的 QPS 或并发线程数等指标，当达到指定的阈值时对流量进行控制，以避免被瞬时的流量高峰冲垮，从而保障应用的高可用性。</p>
</li>
<li>
<p>两种规则</p>
<ul>
<li>基于统计并发线程数的流量控制</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">并发数控制用于保护业务线程池不被慢调用耗尽</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Sentinel 并发控制不负责创建和管理线程池，而是简单统计当前请求上下文的线程数目（正在执行的调用数目）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">如果超出阈值，新的 请求会被立即拒绝，效果类似于信号量隔离。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">流控规则会下发到微服务，微服务如果重启，则流控规则会消失可以持久化配置</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>基于统计QPS的流量控制</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">当 QPS 超过某个阈值的时候，则采取措施进行流量控制</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>控制面板</p>
<ul>
<li>资源名：默认是请求路径，可自定义</li>
<li>针对来源：对哪个微服务进行限流，默认是不区分来源，全部限流，这个是针对 区分上游服务进行限流, 比如 视频服务 被 订单服务、用户服务调用，就可以针对来源进行限流</li>
</ul>
</li>
<li>
<p>流控效果</p>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="image-20230205234311415" src="/assets/images/image-20230205234311415-05f12c51d6dc1d17eff2a3740cfb2544.png" width="616" height="459" class="img_ev3q"></p>
<ul>
<li>
<p>流量控制的效果包括以下几种：</p>
<ul>
<li>
<p>直接拒绝：默认的流量控制方式，当QPS超过任意规则的阈值后，新的请求就会被立即拒绝</p>
</li>
<li>
<p>Warm Up：冷启动/预热，如果系统在此之前长期处于空闲的状态，我们希望处理请求的数量是缓步的增多，经过预期的时间以后，到达系统处理请求个数的最大值</p>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="image-20200908212417778" src="/assets/images/image-20200908212417778-941510ceb76a9e94e4bea1998900632e.png" width="630" height="295" class="img_ev3q"></p>
<ul>
<li>
<p>匀速排队：严格控制请求通过的间隔时间，也即是让请求以均匀的速度通过，对应的是漏桶算法，主要用于处理间隔性突发的流量，如消息队列，想象一下这样的场景，在某一秒有大量的请求到来，而接下来的几秒则处于空闲状态，我们希望系统能够在接下来的空闲期间逐渐处理这些请求，而不是在第一秒直接拒绝多余的请求</p>
<p><img decoding="async" loading="lazy" alt="image" src="/assets/images/68292442-d4af3c00-00c6-11ea-8251-d0977366d9b4-0caca0974cee592b374dcb678a56a586.png" width="792" height="288" class="img_ev3q"></p>
<ul>
<li>注意：<!-- -->
<ul>
<li>匀速排队等待策略是 Leaky Bucket 算法结合虚拟队列等待机制实现的。</li>
<li>匀速排队模式暂时不支持 QPS &gt; 1000 的场景</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="24熔断降级">2.4、熔断降级<a href="#24熔断降级" class="hash-link" aria-label="2.4、熔断降级的直接链接" title="2.4、熔断降级的直接链接">​</a></h3>
<ul>
<li>
<p>文档：<a href="https://github.com/alibaba/Sentinel/wiki/%E7%86%94%E6%96%AD%E9%99%8D%E7%BA%A7" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/Sentinel/wiki/熔断降级</a></p>
</li>
<li>
<p>熔断降级（虽然是两个概念，基本都是互相配合）</p>
<ul>
<li>
<p>对调用链路中不稳定的资源进行熔断降级也是保障高可用的重要措施之一</p>
</li>
<li>
<p>对不稳定的<strong>弱依赖服务调用</strong>进行熔断降级，暂时切断不稳定调用，避免局部不稳定因素导致整体的雪崩</p>
</li>
<li>
<p>熔断降级作为保护自身的手段，通常在客户端（调用端）进行配置</p>
</li>
</ul>
</li>
<li>
<p>什么是Sentinel降级规则</p>
<ul>
<li>
<p>文档：<a href="https://github.com/alibaba/Sentinel/wiki/%E7%86%94%E6%96%AD%E9%99%8D%E7%BA%A7" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/Sentinel/wiki/熔断降级</a></p>
</li>
<li>
<p>就是配置一定规则，然后满足之后就对服务进行熔断降级</p>
</li>
</ul>
</li>
<li>
<p>Sentinel 熔断策略</p>
<ul>
<li>
<p>慢调用比例(响应时间): 选择以慢调用比例作为阈值，需要设置允许的慢调用 RT（即最大的响应时间），请求的响应时间大于该值则统计为慢调用</p>
<ul>
<li>比例阈值：修改后不生效-目前已经反馈给官方那边的bug</li>
<li>熔断时长：超过时间后会尝试恢复</li>
<li>最小请求数：熔断触发的最小请求数，请求数小于该值时即使异常比率超出阈值也不会熔断</li>
</ul>
<p><img decoding="async" loading="lazy" alt="image-20200909121342893" src="/assets/images/image-20200909121342893-d3613bc44174c9dc66daf9bc4f960796.png" width="675" height="365" class="img_ev3q"></p>
</li>
<li>
<p>异常比例：当单位统计时长内请求数目大于设置的最小请求数目，并且异常的比例大于阈值，则接下来的熔断时长内请求会自动被熔断</p>
<ul>
<li>比例阈值</li>
<li>熔断时长：超过时间后会尝试恢复</li>
<li>最小请求数：熔断触发的最小请求数，请求数小于该值时，即使异常比率超出阈值也不会熔断</li>
</ul>
<p><img decoding="async" loading="lazy" alt="image-20200909121357918" src="/assets/images/image-20200909121357918-0e8efcfbea59cd2f5519ba0dc4fdb34a.png" width="671" height="365" class="img_ev3q"></p>
</li>
<li>
<p>异常数：当单位统计时长内的异常数目超过阈值之后会自动进行熔断</p>
<ul>
<li>异常数:</li>
<li>熔断时长：超过时间后会尝试恢复</li>
<li>最小请求数：熔断触发的最小请求数，请求数小于该值时即使异常比率超出阈值也不会熔断</li>
</ul>
<p><img decoding="async" loading="lazy" alt="image-20200909121415806" src="/assets/images/image-20200909121415806-e8845c3d71b6e297664653264d6ef280.png" width="680" height="368" class="img_ev3q"></p>
</li>
</ul>
</li>
</ul>
<p>服务熔断一般有三种状态（如图）</p>
<p><img decoding="async" loading="lazy" alt="image-20230206000459097" src="/assets/images/image-20230206000459097-7884418d52bac808cf36d137d4ac9bdf.png" width="562" height="458" class="img_ev3q"></p>
<ul>
<li>
<p>熔断关闭（Closed）</p>
<ul>
<li>服务没有故障时，熔断器所处的状态，对调用方的调用不做任何限制</li>
</ul>
</li>
<li>
<p>熔断开启（Open）</p>
<ul>
<li>后续对该服务接口的调用不再经过网络，直接执行本地的fallback方法</li>
</ul>
</li>
<li>
<p>半熔断（Half-Open）</p>
<ul>
<li>所谓半熔断就是尝试恢复服务调用，允许有限的流量调用该服务，并监控调用成功率</li>
</ul>
</li>
<li>
<p>熔断恢复：</p>
<ul>
<li>
<p>经过熔断时长后熔断器会进入探测恢复状态（HALF-OPEN 状态）尝试恢复服  务调用，允许有限的流量调用该服务，并监控调用成功率。</p>
</li>
<li>
<p>如果成功率达到预期，则说明服务已恢复，进入熔断关闭状态；如果成功率仍旧很低，则重新进入熔断状态</p>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="25熔断框架比较">2.5、熔断框架比较<a href="#25熔断框架比较" class="hash-link" aria-label="2.5、熔断框架比较的直接链接" title="2.5、熔断框架比较的直接链接">​</a></h3>
<table><thead><tr><th style="text-align:left"></th><th style="text-align:left">Sentinel</th><th style="text-align:left">Hystrix</th><th style="text-align:left">resilience4j</th></tr></thead><tbody><tr><td style="text-align:left">隔离策略</td><td style="text-align:left">信号量隔离（并发线程数限流）</td><td style="text-align:left">线程池隔离/信号量隔离</td><td style="text-align:left">信号量隔离</td></tr><tr><td style="text-align:left">熔断降级策略</td><td style="text-align:left">基于响应时间、异常比率、异常数</td><td style="text-align:left">基于异常比率</td><td style="text-align:left">基于异常比率、响应时间</td></tr><tr><td style="text-align:left">实时统计实现</td><td style="text-align:left">滑动窗口(LeapArray)</td><td style="text-align:left">滑动窗口(RxJava)</td><td style="text-align:left">Ring Bit Buffer</td></tr><tr><td style="text-align:left">动态规则配置</td><td style="text-align:left">支持多种数据源</td><td style="text-align:left">支持多种数据源</td><td style="text-align:left">有限支持</td></tr><tr><td style="text-align:left">扩展性</td><td style="text-align:left">多个扩展点</td><td style="text-align:left">插件的形式</td><td style="text-align:left">接口的形式</td></tr><tr><td style="text-align:left">基于注解支持</td><td style="text-align:left">支持</td><td style="text-align:left">支持</td><td style="text-align:left">支持</td></tr><tr><td style="text-align:left">限流</td><td style="text-align:left">基于QPS，支持基于调用关系的限流</td><td style="text-align:left">有限的支持</td><td style="text-align:left">Rate Limiter</td></tr><tr><td style="text-align:left">流量整形</td><td style="text-align:left">支持预热模式、匀速器模式、预热排队模式</td><td style="text-align:left">不支持</td><td style="text-align:left">简单的Rate Limiter模式</td></tr><tr><td style="text-align:left">系统自适应保护</td><td style="text-align:left">支持</td><td style="text-align:left">不支持</td><td style="text-align:left">不支持</td></tr><tr><td style="text-align:left">控制台</td><td style="text-align:left">提供开箱即用的控制台，可配置规则、查看秒级监控、机器发现等</td><td style="text-align:left">简单的监控查看</td><td style="text-align:left">不提供控制台，可对接其他监控系统</td></tr></tbody></table></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于Sentinel的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/sentinel">Sentinel</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-torna-smart-doc">smart-doc+Trona无侵入式API文档管理平台</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-02-04T00:00:00.000Z">2023年2月4日</time> · <!-- -->阅读需 5 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title=" 后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><strong>背景</strong>：<a href="https://gitee.com/smart-doc-team/smart-doc" target="_blank" rel="noopener noreferrer">smart-doc (opens new window)</a>+ Torna 组成行业领先的文档生成和管理解决方案，使用smart-doc无侵入完成Java源代码分析和提取注释生成API文档，自动将文档推送到Torna企业级接口文档管理平台。</p>
<p>我们先来看看效果图：</p>
<p><img decoding="async" loading="lazy" alt="image-20230204155034231" src="/assets/images/image-20230204155034231-8927707ca601d58dbd82258b557d0cc2.png" width="701" height="380" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="image-20230204155007085" src="/assets/images/image-20230204155007085-08c3ae48ba05fd6f2c9c1faee2dee988.png" width="1037" height="812" class="img_ev3q"></p>
<p>超级简洁 ，而且它是无侵入式的，不需要改动代码，只需要增加配置文件即可</p>
<p>官方仓库地址：<a href="https://gitee.com/durcframework/torna" target="_blank" rel="noopener noreferrer">https://gitee.com/durcframework/torna</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="为什么要用torna">为什么要用Torna？<a href="#为什么要用torna" class="hash-link" aria-label="为什么要用Torna？的直接链接" title="为什么要用Torna？的直接链接">​</a></h2>
<p>接口文档解决方案，目标是让接口文档管理变得更加方便、快捷。Torna采用团队协作的方式管理和维护接口文档，将不同形式的文档纳入进来统一维护。</p>
<p>Torna弥补了传统文档生成工具（如swagger）的不如之处，在保持原有功能的前提下丰富并增强了一些实用的功能。</p>
<ul>
<li>不满足swagger文档预览页面和调试页面的展现方式</li>
<li>不喜欢swagger这种侵入式注解</li>
<li>希望使用javadoc注释生成文档，并进行接口调试</li>
<li>希望把公司所有项目接口文档进行统一管理</li>
<li>希望把项目中的若干文档提供给第三方调用者查看</li>
<li>希望可以统一管理项目中的字典枚举</li>
</ul>
<p>现在已经跟新到1.20.0 它也可以整合swagger使用，但是鉴于swagger侵入性高，官放推荐的是smart-doc+Torna这一技术路线。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何使用">如何使用？<a href="#如何使用" class="hash-link" aria-label="如何使用？的直接链接" title="如何使用？的直接链接">​</a></h2>
<p>我们以win为例进行部署。其他部署环境参照官网即可</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1下载zip本地运行">1、下载zip本地运行<a href="#1下载zip本地运行" class="hash-link" aria-label="1、下载zip本地运行的直接链接" title="1、下载zip本地运行的直接链接">​</a></h3>
<p>1.1、下载地址：<a href="https://gitee.com/durcframework/torna/releases" target="_blank" rel="noopener noreferrer">https://gitee.com/durcframework/torna/releases</a></p>
<p>需要下载俩个jar包</p>
<p><img decoding="async" loading="lazy" alt="image-20230204155607681" src="data:image/png;base64,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" width="303" height="142" class="img_ev3q"></p>
<p>本地解压即可。</p>
<p>1.2、在资源包中找到mysql.sql脚本，导入mysql</p>
<p>1.3、在启动包中找到<code>application.properties</code>配置文件，修改数据库连接配置</p>
<p><img decoding="async" loading="lazy" alt="image-20230204155910470" src="/assets/images/image-20230204155910470-a4bcf860b7ac2bfc46e1115f540f2a37.png" width="643" height="319" class="img_ev3q"></p>
<p>1.4、在启动目录用cmd运行startup.bat文件</p>
<p><img decoding="async" loading="lazy" alt="image-20230204160003417" src="/assets/images/image-20230204160003417-8447e5aa58f6b7ed8568204e97038ded.png" width="885" height="249" class="img_ev3q"></p>
<p>1.5、本地浏览器访问<a href="http://localhost:7700" target="_blank" rel="noopener noreferrer">http://localhost:7700</a></p>
<p>1.6、登录文档管理平台  初始账户 ---&gt; 用户名：<code>admin</code>，密码：<code>123456</code></p>
<p>1.7、后续升级，只需要覆盖<code>torna.jar文件</code>和<code>dist文件夹</code>，然后重启即可</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2torna整合smart-doc教程">2、Torna整合smart-doc教程<a href="#2torna整合smart-doc教程" class="hash-link" aria-label="2、Torna整合smart-doc教程的直接链接" title="2、Torna整合smart-doc教程的直接链接">​</a></h3>
<p>通过这套组合您可以实现：只需要写完Java注释就能把接口信息推送到Torna平台，从而实现接口预览、接口调试。</p>
<p>官方地址：<a href="https://torna.cn/dev/smart-doc.html" target="_blank" rel="noopener noreferrer">https://torna.cn/dev/smart-doc.html</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="21只需规范编写代码注释即可">2.1、只需规范编写代码注释即可<a href="#21只需规范编写代码注释即可" class="hash-link" aria-label="2.1、只需规范编写代码注释即可的直接链接" title="2.1、只需规范编写代码注释即可的直接链接">​</a></h4>
<p><img decoding="async" loading="lazy" alt="image-20230204160646490" src="/assets/images/image-20230204160646490-3440b5293c581b257b8b072b5b85226e.png" width="1016" height="562" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="22torna服务配置">2.2、Torna服务配置<a href="#22torna服务配置" class="hash-link" aria-label="2.2、Torna服务配置的直接链接" title="2.2、Torna服务配置的直接链接">​</a></h4>
<p>全图形化操作 可以根据需求创建空间管理员和使用空间</p>
<p><img decoding="async" loading="lazy" alt="image-20230204160817710" src="/assets/images/image-20230204160817710-e0936e03cbcc23eec05398d5da6d7495.png" width="939" height="440" class="img_ev3q"></p>
<p>创建自己的项目文档名 ，创建好后如左侧样例。</p>
<p><img decoding="async" loading="lazy" alt="image-20230204160930669" src="/assets/images/image-20230204160930669-4b31f095ae98b1792a53fd8cd8b69739.png" width="1375" height="382" class="img_ev3q"></p>
<p>查看token是否生成，一会要在项目里配置</p>
<p><img decoding="async" loading="lazy" alt="image-20230204161207568" src="/assets/images/image-20230204161207568-368ca29953954cbf9f867713ce22fb45.png" width="691" height="273" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="23cloud服务配置">2.3、cloud服务配置<a href="#23cloud服务配置" class="hash-link" aria-label="2.3、cloud服务配置的直接链接" title="2.3、cloud服务配置的直接链接">​</a></h4>
<p>我的demo项目结构是这样的</p>
<p><img decoding="async" loading="lazy" alt="image-20230204161338397" src="/assets/images/image-20230204161338397-9685e34d1b5a4d97b1f08b7968baa479.png" width="438" height="248" class="img_ev3q"></p>
<p>在跟目录的pom中添加smart-doc插件</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">		</span><span class="token comment" style="color:rgb(98, 114, 164)">&lt;!-- smart-doc插件 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">plugin</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">com.github.shalousun</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">smart-doc-maven-plugin</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">version</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">2.4.9</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">version</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">configuration</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token comment" style="color:rgb(98, 114, 164)">&lt;!--指定生成文档的使用的配置文件--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">configFile</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">./src/main/resources/smart-doc.json</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">configFile</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token comment" style="color:rgb(98, 114, 164)">&lt;!--指定项目名称--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">projectName</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">视频项目</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">projectName</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">configuration</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">executions</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">execution</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">phase</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">package</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">phase</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">execution</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">executions</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">plugin</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在web中的resources下添加一个<code>smart-doc.json</code>文件</p>
<p>这里需要注意要在根目录下创建resources包，并标记为资源包</p>
<p><img decoding="async" loading="lazy" alt="image-20230204162619302" src="/assets/images/image-20230204162619302-8705ade822a9b7b3905276b3e3578bfe.png" width="1258" height="970" class="img_ev3q"></p>
<p>我们以video-service为例 其他模块一样</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;outPath&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;target/doc&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;projectName&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;video-cloud项目&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;packageFilters&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;space.jachen.controller.*&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;openUrl&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;http://localhost:7700/api&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;appToken&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;8de92ae464124cff815ce75e7732b9ca&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;debugEnvName&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;本地环境&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;debugEnvUrl&quot;</span><span class="token operator">:</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;http://127.0.0.1:8080&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;tornaDebug&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;replace&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>参数说明:</p>
<ul>
<li>outPath：固定填这个不用变</li>
<li>projectName：项目名称</li>
<li>packageFilters：Controller接口对应的package目录，多个用<code>;</code>隔开</li>
<li>openUrl：Torna中的OpenAPI接口</li>
<li>appToken：Torna中的OpenAPI token</li>
<li>debugEnvName：Torna中调试环境名称</li>
<li>debugEnvUrl：Torna中调试环境地址</li>
<li>tornaDebug：是否开启调试，初次使用建议开始，后面稳定了关闭</li>
<li>replace：是否替换文档，建议true</li>
</ul>
<p>over，已经配置完成，接下来最后一步，推送到torna</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="24推送文档到torna">2.4、推送文档到Torna<a href="#24推送文档到torna" class="hash-link" aria-label="2.4、推送文档到Torna的直接链接" title="2.4、推送文档到Torna的直接链接">​</a></h4>
<p>在项目根目录输入maven命令：</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mvn smart-doc:torna-rest -pl :jachen-cloud -am</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>其中<code>-pl :shop-web -am</code>表示推送哪个子模块</p>
<p>看到最后的</p>
<p><img decoding="async" loading="lazy" alt="image-20230204162947190" src="/assets/images/image-20230204162947190-2fe984307f4f0005f2b9cd82a109c775.png" width="1082" height="173" class="img_ev3q"></p>
<p>表示推送成功，即可前往Torna接口列表查看文档了</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于文档工具相关的话题" class="tag_zVej tagRegular_sFm0" href="/blog/tags/wenjian-gongju">文档工具</a></li><li class="tag_QGVx"><a title="关于Torna的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/torna">Torna</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-ribbon">负载均衡之Ribbon实现</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-01-31T00:00:00.000Z">2023年1月31日</time> · <!-- -->阅读需 8 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><strong>背景</strong>：<em>Ribbon是一个用于客户端负载均衡的开源项目，它基于Netflix Hystrix库，用于提供客户端侧负载均衡算法。它可以在微服务架构中帮助您控制客户端对服务器的访问，以实现负载均衡、断路器和智能路由。Ribbon提供了一组API，可以在您的应用程序代码中集成负载均衡功能，从而提高系统的可用性和稳定性。</em></p>
<p>这个是开源地址：<a href="https://github.com/Netflix/ribbon" target="_blank" rel="noopener noreferrer">https://github.com/Netflix/ribbon</a></p>
<p>在接受这个厉害的组件前先 <strong>讲讲什么负载均衡和常见的解决方案</strong></p>
<ul>
<li>
<p>什么是负载均衡（Load Balance）</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">分布式系统中一个非常重要的概念，当访问的服务具有多个实例时，需要根据某种“均衡”的策略决定请求发往哪个节点，这就是所谓的负载均衡，</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">原理是将数据流量分摊到多个服务器执行，减轻每台服务器的压力，从而提高了数据的吞吐量</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>软硬件角度负载均衡的种类</p>
<ul>
<li>通过硬件来进行解决，常见的硬件有NetScaler、F5、Radware和Array等商用的负载均衡器，但比较昂贵的</li>
<li>通过软件来进行解决，常见的软件有LVS、Nginx等,它们是基于Linux系统并且开源的负载均衡策略</li>
</ul>
</li>
<li>
<p>从端的角度负载均衡有两种</p>
<ul>
<li>服务端负载均衡</li>
<li>客户端负载均衡</li>
</ul>
<p><img decoding="async" loading="lazy" src="https://file.xdclass.net/note/2020/alibaba-cloud/img/image-20200908114732828.png" alt="image-20200908114732828" class="img_ev3q"></p>
</li>
<li>
<p>常见的负载均衡策略（看组件的支持情况）</p>
<ul>
<li>节点轮询<!-- -->
<ul>
<li>简介：每个请求按顺序分配到不同的后端服务器</li>
</ul>
</li>
<li>weight 权重配置<!-- -->
<ul>
<li>简介：weight和访问比率成  正比，数字越大，分配得到的流量越高</li>
</ul>
</li>
<li>固定分发<!-- -->
<ul>
<li>简介：根据请求按访问ip的hash结果分配，这样每个用户就可以固定访问一个后端服务器</li>
</ul>
</li>
<li>随机选择、最短响应时间等等</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="alibabacloud集成ribbon实现负载均衡">AlibabaCloud集成Ribbon实现负载均衡<a href="#alibabacloud集成ribbon实现负载均衡" class="hash-link" aria-label="AlibabaCloud集成Ribbon实现负载均衡的直接链接" title="AlibabaCloud集成Ribbon实现负载均衡的直接链接">​</a></h2>
<p>我们来看看它在哪个包下？这个是Nacos整合ribbon的包</p>
<p><img decoding="async" loading="lazy" alt="image-20230202235459188" src="/assets/images/image-20230202235459188-7777810af36395c55c63179e4e22fd3c.png" width="781" height="192" class="img_ev3q"></p>
<ul>
<li>
<p>什么是Ribbon</p>
<p>Ribbon是一个客户端负载均衡工具，通过Spring Cloud封装，可以轻松和AlibabaCloud整合</p>
</li>
<li>
<p>订单服务增加@LoadBalanced 注解</p>
</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@LoadBalanced</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public RestTemplate restTemplate() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return new RestTemplate();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>接着我的上一篇文章，<a href="https://blog.jiguanchen.space/blog/product-nacos" target="_blank" rel="noopener noreferrer">https://blog.jiguanchen.space/blog/product-nacos</a></p>
<ul>
<li>调用实战</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Video v = restTemplate.getForObject(&quot;http://jachen-video-service&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                + &quot;/api/v1/video/getById/&quot; + id, Video.class);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> // 注意:方便看到负载均衡效果，在video类增加这个字段，记录当前机器ip+端口</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>它的实操非常简单，那它底层的源码是怎么走的呢？我们断点看一下。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ribbon负载均衡源码走读">Ribbon负载均衡源码走读<a href="#ribbon负载均衡源码走读" class="hash-link" aria-label="Ribbon负载均衡源码走读的直接链接" title="Ribbon负载均衡源码走读的直接链接">​</a></h2>
<ul>
<li>分析思路<!-- -->
<ul>
<li>通过直接找入口</li>
</ul>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="image-20230203000427363" src="/assets/images/image-20230203000427363-521a21a79d522b95a055567b5fc0be68.png" width="770" height="397" class="img_ev3q"></p>
<ul>
<li>分析@LoadBalanced<!-- -->
<ul>
<li>1）首先从注册中心获取provider的列表</li>
<li>2）通过一定的策略选择其中一个节点</li>
<li>3）再返回给restTemplate调用</li>
</ul>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="image-20230203000859449" src="/assets/images/image-20230203000859449-ebe99daff7c5048036e882282edfa9c2.png" width="1486" height="614" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="image-20230203001105830" src="/assets/images/image-20230203001105830-3ab46d4ae4323ec1b86459b2e221db84.png" width="1757" height="549" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="image-20230203001158208" src="/assets/images/image-20230203001158208-facb9efd313ae0145932e092113f3645.png" width="1232" height="454" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="image-20230203001503881" src="/assets/images/image-20230203001503881-8a45d2c5414ab195b5850da756092dfd.png" width="1105" height="493" class="img_ev3q"></p>
<p>最 后返回调用的服务</p>
<p><img decoding="async" loading="lazy" alt="image-20230203001601629" src="/assets/images/image-20230203001601629-acc3837a10473f9854cf4cb1212fbbe0.png" width="1703" height="839" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ribbon支持的负载均衡策略">Ribbon支持的负载均衡策略<a href="#ribbon支持的负载均衡策略" class="hash-link" aria-label="Ribbon支持的负载均衡策略的直接链接" title="Ribbon支持的负载均衡策略的直接链接">​</a></h2>
<table><thead><tr><th>策略类</th><th>命名</th><th>描述</th></tr></thead><tbody><tr><td>RandomRule</td><td>随机策略</td><td>随机选择server</td></tr><tr><td>RoundRobinRule</td><td>轮询策略</td><td>按照顺序选择server（默认）</td></tr><tr><td>RetryRule</td><td>重试策略</td><td>当选择server不成功，短期内尝试选择一个可用的server</td></tr><tr><td></td><td></td><td></td></tr><tr><td>AvailabilityFilteringRule</td><td>可用过滤策略</td><td>过滤掉一直失败并被标记为circuit tripped的server，过滤掉那些高并发链接的server（active connections超过配置的阈值）</td></tr><tr><td>WeightedResponseTimeRule</td><td>响应时间加权重策略</td><td>根据server的响应时间分配权重，以响应时间作为权重，响应时间越短的服务器被选中的概率越大，综合了各种因素，比如：网络，磁盘，io等，都直接影响响应时间</td></tr><tr><td>ZoneAvoidanceRule</td><td>区域权重策略</td><td>综合判断server所在区域的性能，和server的可用性，轮询选择server</td></tr></tbody></table>
<p>怎么配置呢？</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">订单服务增加配置</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">jachen-video-service:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  ribbon:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>策略选择： 1、如果每个机器配置一样，则建议不修改策略 (推荐) 2、如果部分机器配置强，则可以改为 WeightedResponseTimeRule</li>
</ul>
<p><strong>上面就是ribbon的底层实现，它还是美中不足的。存在的问题：不规范，风格不统一，维护性比较差</strong></p>
<p>那么为什么存在这些问题呢？</p>
<p>我们来看上面的代码</p>
<p><img decoding="async" loading="lazy" alt="image-20230204225604362" src="data:image/png;base64,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" width="610" height="113" class="img_ev3q"></p>
<p><em>每次我们都要去在代码里这样拼路径，如果我的方法特别多呢？很显然这种方法是不可取的，所以也就引出了Feign组件</em></p>
<p>什么是Feign</p>
<div class="language-tex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tex codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">SpringCloud提供的伪http客户端(本质还是用http)，封装了Http调用流程，更适合面向接口化</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">让用Java接口注解的方式调用Http请求.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">不用像Ribbon中通过封装HTTP请求报文的方式调用 Feign默认集成了Ribbon</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>官方文档：<a href="https://spring.io/projects/spring-cloud-openfeign" target="_blank" rel="noopener noreferrer">https://spring.io/projects/spring-cloud-openfeign</a></p>
<ul>
<li>Nacos支持Feign,可以直接集成实现  负载均衡的效果 可以使用springboot等注解</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="改造微服务-集成open-feign">改造微服务 集成Open-Feign<a href="#改造微服务-集成open-feign" class="hash-link" aria-label="改造微服务 集成Open-Feign的直接链接" title="改造微服务 集成Open-Feign的直接链接">​</a></h2>
<ul>
<li>
<p>Feign让方法调用更加解耦</p>
</li>
<li>
<p>使用feign步骤讲解</p>
<ul>
<li>
<p>加入依赖(order客户端)</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">org.springframework.cloud</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">spring-cloud-starter-openfeign</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>配置注解(order客户端)</p>
</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">//启动类增加</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@EnableFeignClients</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>增加一个远程调用接口(可以在order模块里面也可以单独拿出去自己一个模块)</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">//订单服务增加接口，服务名称记得和nacos保持一样</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@FeignClient(name=&quot;jachen-video-service&quot;) </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>编写代码</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">@GetMapping(value = &quot;/api/v1/video/find_by_id&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Video findById(@PathVariable int videoId);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 一定注意上面错误的 一定要注意路径一定完整 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// @RequestParam里面都要指定</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 如果参数要用restful风格接收 用@PathVariable</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 路径的参数如果和方法里参数不一样 一定要加(&quot;id&quot;)参数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@GetMapping(&quot;/api/v1/video/getById/{id}&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Video getById(@RequestParam(&quot;id&quot;) Integer id);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>注入videoservice（在order客户端controller层加入）就像在本地使用一样简单</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private VideoService videoService;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Video v = videoService.getById(id);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Ribbon和feign两个的区别和选择</p>
<div class="language-tex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tex codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">选择feign</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">默认集成了ribbon</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">写起来更加思路清晰和方便</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">采用注解方式进行配置，配置熔断等方式方便</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于负载均衡相关的话题" class="tag_zVej tagRegular_sFm0" href="/blog/tags/fuzongbanlian">负载均衡</a></li><li class="tag_QGVx"><a title="关于Ribbon的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/ribbon">Ribbon</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-nacos-service-management">服务治理之Nacos</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-01-30T00:00:00.000Z">2023年1月30日</time> · <!-- -->阅读需 11 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><strong>背景</strong>：<em>Nacos官网这样介绍自己：一个更易于构建云原生应用的动态服务发现、配置管理和服务管理平台。那么它到底是什么？它是怎么使用的呢？它的出现帮助我们解决了哪些问题？这是本文探究的重点。</em></p>
<p>Nacos官方文档：<a href="https://nacos.io/zh-cn/docs/what-is-nacos.html%E3%80%82" target="_blank" rel="noopener noreferrer">https://nacos.io/zh-cn/docs/what-is-nacos.html。</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nacos到底是什么">Nacos到底是什么？<a href="#nacos到底是什么" class="hash-link" aria-label="Nacos到底是什么？的直接链接" title="Nacos到底是什么？的直接链接">​</a></h2>
<p>Nacos就是注册中心+配置中心的组合（Nacos = Eureka+Config+Bus）</p>
<p>Nacos 的关键特性包括:</p>
<ul>
<li>
<p><strong>服务发现和服务健康监测</strong></p>
<p>Nacos 支持基于 DNS 和基于 RPC 的服务发现。服务提供者使用 <a href="https://nacos.io/zh-cn/docs/sdk.html" target="_blank" rel="noopener noreferrer">原生SDK</a>、<a href="https://nacos.io/zh-cn/docs/open-api.html" target="_blank" rel="noopener noreferrer">OpenAPI</a>、或一个<a href="https://nacos.io/zh-cn/docs/other-language.html" target="_blank" rel="noopener noreferrer">独立的Agent TODO</a>注册 Service 后，服务消费者可以使用<a href="https://nacos.io/zh-cn/docs/xx" target="_blank" rel="noopener noreferrer">DNS TODO</a> 或<a href="https://nacos.io/zh-cn/docs/open-api.html" target="_blank" rel="noopener noreferrer">HTTP&amp;API</a>查找和发现服务。</p>
<p>Nacos 提供对服务的实时的健康检查，阻止向不健康的主机或服务实例发送请求。Nacos 支持传输层 (PING 或 TCP)和应用层 (如 HTTP、MySQL、用户自定义）的健康检查。 对于复杂的云环境和网络拓扑环境中（如 VPC、边缘网络等）服务的健康检查，Nacos 提供了 agent 上报模式和服务端主动检测2种健康检查模式。Nacos 还提供了统一的健康检查仪表盘，帮助您根据健康状态管理服务的可用性及流量。</p>
</li>
<li>
<p><strong>动态配置服务</strong></p>
<p>动态配置服务可以让您以中心化、外部化和动态化的方式管理所有环境的应用配置和服务配置。</p>
<p>动态配置消除了配置变更时重新部署应用和服务的需要，让配置管理变得更加高效和敏捷。</p>
<p>配置中心化管理让实现无状态服务变得更简单，让服务按需弹性扩展变得更容易。</p>
<p>Nacos 提供了一个简洁易用的UI (<a href="http://console.nacos.io/nacos/index.html" target="_blank" rel="noopener noreferrer">控制台样例 Demo</a>) 帮助您管理所有的服务和应用的配置。Nacos 还提供包括配置版本跟踪、金丝雀发布、一键回滚配置以及客户端配置更新状态跟踪在内的一系列开箱即用的配置管理特性，帮助您更安全地在生产环境中管理配置变更和降低配置变更带来的风险。</p>
</li>
<li>
<p><strong>动态 DNS 服务</strong></p>
<p>动态 DNS 服务支持权重路由，让您更容易地实现中间层负载均衡、更灵活的路由策略、流量控制以及数据中心内网的简单DNS解析服务。动态DNS服务还能让您更容易地实现以 DNS 协议为基础的服务发现，以帮助您消除耦合到厂商私有服务发现 API 上的风险。</p>
<p>Nacos 提供了一些简单的 <a href="https://nacos.io/zh-cn/docs/xx" target="_blank" rel="noopener noreferrer">DNS APIs TODO</a> 帮助您管理服务的关联域名和可用的 IP<!-- -->:PORT<!-- --> 列表.</p>
</li>
<li>
<p><strong>服务及其元数据管理</strong></p>
<p>Nacos 能让您从微服务平台建设的视角管理数据中心的所有服务及元数据，包括管理服务的描述、生命周期、服务的静态依赖分析、服务的健康状态、服务的流量管理、路由及安全策略、服务  的 SLA 以及最首要的 metrics 统计数据。</p>
</li>
</ul>
<p>据说nacos在阿里巴巴内部有超过10万的实例运行，已经过了类似双十一等各种大型流量的考验.....</p>
<p><em>举个简单的例子 现在有一个Order订单的服务要去远程调用Video视频的服务完成下单操作。</em></p>
<p>OrderController类：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @author JaChen</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @date 2023/1/31 17:26</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@RestController</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@RequestMapping(&quot;api/v1/order&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class OrderController {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    RestTemplate restTemplate;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 下单的方法</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param id</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @GetMapping(&quot;/save/{id}&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public Object save(@PathVariable Integer id){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Video v = restTemplate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // 这里路径是写死的 如果ip变了 我们每次都要更改源码</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .getForObject(&quot;http://127.0.0.1:9000/api/v1/video/getById/&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        + id, Video.class);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (v != null) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            VideoOrder.builder()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    .videoId(v.getId())</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    .videoTitle(v.getTitle())</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    .createTime(new Date());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return ResponseUtil.resultMap(false,444,&quot;下单失败&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return ResponseUtil.resultMap(true,200,&quot;下单成功&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                ,VideoOrder.VideoOrderBuilder.class);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>VideoController类</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @author JaChen</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @date 2023/1/31 16:21</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@RestController</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@RequestMapping(&quot;api/v1/video&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class VideoController {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    VideoService videoService;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @GetMapping(&quot;getById/{id}&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public Object getById(@PathVariable Integer id){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Video video = videoService.getById(id);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return ResponseUtil.resultMap(true,200,&quot;查询成功&quot;,video);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>当Order服务去调用Video服务的时候，.getForObject(&quot;<a href="http://127.0.0.1:9000/api/v1/video/getById/%22+id" target="_blank" rel="noopener noreferrer">http://127.0.0.1:9000/api/v1/video/getById/&quot;+id</a>, Video.class);这里路径是写死的 ，如果服务的ip换了或者新增其他服务 ，需要我们去更改源码 ，得不偿失，那么有没有一个应用，可以在Order服务完成下单操作时就知道哪些服务是“活着”的呢？Nacos一个更易于构建云原生应用的动态服务发现、配置管理和服务管理平台随时应运而生，所有服务启动前都会把自己注册到Nacos注册中心进行统一管理，同时，比如订单服务想去远程调用我们的其他服务 可以去注册中心查找这些服务的状态信息，实现动态去获取他们的地址，这样就避免了自身源码的改动，也为实现负载均衡等其他功能提供了基础。</p>
<p>总结</p>
<p>什么是注册中心（服务治理）</p>
<ul>
<li>服务注册：服务提供者provider，启动的时候向注册中心上报自己的网络信息<!-- -->
<ul>
<li>服务发现：服务消费者consumer,启动的时候向注册中心上报自己的网络信息，拉取provider的相关网络信息</li>
</ul>
</li>
<li>核心:服务管理,是有个服务注册表，心跳机制动态维护，服务实例在启动时注册到服务注册表，并在关闭时注销。</li>
</ul>
<p><img decoding="async" loading="lazy" alt="nacosMap" src="/assets/images/nacosMap-3c656c929f7f9c46ba81eb46125c51d8.jpg" width="1880" height="1198" class="img_ev3q"></p>
<ul>
<li>特性大图：要从功能特性，非功能特性，全面介绍我们要解的问题域的特性诉求</li>
<li>架构大图：通过清晰架构，让您快速进入 Nacos 世界</li>
<li>业务大图：利用当前特性可以支持的业务场景，及其最佳实践</li>
<li>生态大图：系统梳理 Nacos 和主流技术生态的关系</li>
<li>优势大图：展示 Nacos 核心竞争力</li>
<li>战略大图：要从战略到战术层面讲 Nacos 的宏观优势</li>
</ul>
<p><strong>为什么要用</strong></p>
<ul>
<li>微服务应用和机器越来越多，调用方需要知道接口的网络地址，如果靠配置文件的方式去控制网络地址，对于动态新增机器，维护带来很大问题</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nacos是怎么使用的呢">Nacos是怎么使用的呢？<a href="#nacos是怎么使用的呢" class="hash-link" aria-label="Nacos是怎么使用的呢？的直接链接" title="Nacos是怎么使用的呢？的直接链接">​</a></h2>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1安装">1、安装<a href="#1安装" class="hash-link" aria-label="1、安装的直接链接" title="1、安装的直接链接">​</a></h4>
<p>1.1 Linux/Mac安装Nacos</p>
<ul>
<li>解压安装包</li>
<li>进入bin目录</li>
<li>启动 sh startup.sh -m standalone</li>
<li>访问 localhost:8848/nacos/index.html</li>
<li>默认账号密码 nacos/nacos</li>
</ul>
<p>1.2 Win安装</p>
<ul>
<li>解压安装包</li>
<li>进入bin目录</li>
<li>启动 startup.cmd -m standalone</li>
<li>访问 localhost:8848/nacos/index.html</li>
<li>默认账号密码 nacos/nacos</li>
</ul>
<p>默认：MODE=&quot;cluster&quot;集群方式启动，如果单机启动需要设置-m tandalone参数，否则，启动失败。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2登录页面">2、登录页面<a href="#2登录页面" class="hash-link" aria-label="2、登录页面的直接链 接" title="2、登录页面的直接链接">​</a></h4>
<p><a href="http://localhost:8848/nacos/index.html#/login" target="_blank" rel="noopener noreferrer">http://localhost:8848/nacos/index.html#/login</a></p>
<p><img decoding="async" loading="lazy" alt="image-20230131223518460" src="/assets/images/image-20230131223518460-6897647a81cb06dc0ed4f300747493d3.png" width="1371" height="557" class="img_ev3q"></p>
<p>果然是国内的技术 页面看着就是亲切~</p>
<p>官网文档:<a href="https://spring.io/projects/spring-cloud-alibaba#learn" target="_blank" rel="noopener noreferrer">https://spring.io/projects/spring-cloud-alibaba#learn</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3配置">3、配置<a href="#3配置" class="hash-link" aria-label="3、配置的直接链接" title="3、配置的直接链接">​</a></h4>
<p>3.1在Order服务和Video服务都 添加相关依赖</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">&lt;!--添加nacos客户端--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">com.alibaba.cloud</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">groupId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">spring-cloud-starter-alibaba-nacos-discovery</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">artifactId</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">dependency</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>3.2 在yml文件配置server-addr</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">cloud</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">nacos</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token key atrule">server-addr</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> 127.0.0.1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token number">8848</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>3.3 在启动类上开启服务注册</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">@EnableDiscoveryClient</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>现在我们已经把这俩个服务注册到了Nacos上</p>
<p><img decoding="async" loading="lazy" alt="image-20230131230001317" src="/assets/images/image-20230131230001317-db074c0e0b27d0768bf68cc67f1bf28e.png" width="1888" height="555" class="img_ev3q"></p>
<p>3.4 引入DiscoveryClient用于查找服务的客户端并修改OrderController.java</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">// 获取服务列表 (可能是集群)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        List&lt;ServiceInstance&gt; instanceList = discoveryClient</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .getInstances(&quot;jachen-video-service&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ServiceInstance instance = instanceList.get(0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Video v = restTemplate.getForObject(instance.getUri()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                + &quot;/api/v1/video/getById/&quot; + id, Video.class);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>3.5 Nacos怎么开启负载均衡呢？</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * 远程调用</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @return RestTemplate对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // 在RestTemplate请求的时候开启负载均衡。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @LoadBalanced</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public RestTemplate getRestTemplate(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return new RestTemplate();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>一个注解就搞定了。使用Ribbon可以这样直接指定服务名</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 获取服务列表 (可能是集群)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        List&lt;ServiceInstance&gt; instanceList = discoveryClient</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                .getInstances(&quot;jachen-video-service&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Video v = restTemplate.getForObject(&quot;http://jachen-video-service&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                + &quot;/api/v1/video/getById/&quot; + id, Video.class);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>为什么可以实现负载均衡呢？</p>
<p><img decoding="async" loading="lazy" alt="image-20230131233001382" src="/assets/images/image-20230131233001382-0e8384fbd244df87a97a4c7010fe6fdb.png" width="1015" height="679" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结：<a href="#总结" class="hash-link" aria-label="总结：的直接链接" title="总结：的直接链接">​</a></h2>
<ol>
<li>Nacos是一个开源的分布式服务发现、配置管理和服务管理平台。</li>
<li>功能全面：Nacos不仅支持服务注册与发现，还支持配置管理和服务管理。</li>
<li>易于使用：Nacos的接口简洁明了，容易上手。</li>
<li>性能优秀：Nacos采用了高性能的分布式架构，能够承受大量的服务注册与查询。</li>
<li>活跃的社区：Nacos有活跃的社区支持，问题能够得到快速解决。</li>
</ol></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于注册中心相关的话题" class="tag_zVej tagRegular_sFm0" href="/blog/tags/zhucezhongxin">注册中心</a></li><li class="tag_QGVx"><a title="关于Nacos的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/nacos">Nacos</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/talk-about-redis-cache-exceptions-and-solutions">Redis缓存常见异常及解决方案</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-12-27T00:00:00.000Z">2022年12月27日</time> · <!-- -->阅读需 15 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><strong>背景</strong>：<em>Redis是一种流行的内存数据结构存储，广泛用作数据库、缓存和消息代理。Redis 主要用来做缓存使用，在提高数据查询效率、保护数据库等方面起到了关键性的作用，很大程度上提高系统的性能。当然在使用过程中，也会出现一些异常情景，导致 Redis 失去缓存作用。</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="redis常见应用">Redis常见应用<a href="#redis常见应用" class="hash-link" aria-label="Redis常见应用的直接链接" title="Redis常见应用的直接链接">​</a></h2>
<ol>
<li>缓存：Redis通常用作缓存，以存储常用数据，以减少数据库查询次数。</li>
<li>会话管理：Redis用于存储Web应用程序中的用户会话数据。</li>
<li>实时分析：Redis用于处理和分析大量的实时数据。</li>
<li>队列管理：Redis用于实现消息队列，以异步分发和处理任务。</li>
<li>排行榜和计数：Redis用于维护游戏、社交媒体和其他应用中项目的实时排名和计数。</li>
<li>发布/订阅消息：Redis支持发布/订阅消息模式，并用于实时聊天和通知系统。</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="redis常见缓存异常">Redis常见缓存异常<a href="#redis常见缓存异常" class="hash-link" aria-label="Redis常见缓存异常的直接链接" title="Redis常见缓存异常的直接链接">​</a></h2>
<p>缓存雪崩 缓存穿透 缓存击穿</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1缓存雪崩">1、缓存雪崩<a href="#1缓存雪崩" class="hash-link" aria-label="1、缓存雪崩的直接链接" title="1、缓存雪崩的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="11现象">1.1现象<a href="#11现象" class="hash-link" aria-label="1.1现象的直接链接" title="1.1现象的直接链接">​</a></h4>
<ul>
<li>发生在缓  存数据在同一时刻大量失效，比如缓存数据的过期时间设置为同一时刻。</li>
<li>由于缓存中的数据失效，大量的请求直接请求后端数据，导致系统请求量瞬间增加，造成系统压力过大，从而宕机。</li>
</ul>
<p><img decoding="async" loading="lazy" alt="image-20230130104242186" src="/assets/images/image-20230130104242186-e4f0b4b1debe0d650cdbca530f870ef7.png" width="466" height="217" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="12原因">1.2原因<a href="#12原因" class="hash-link" aria-label="1.2原因的直接链接" title="1.2原因的直接链接">​</a></h4>
<ul>
<li>缓存服务不可用。</li>
<li>缓存服务可用，但是大量 KEY 同时失效。</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="13解决方案">1.3解决方案<a href="#13解决方案" class="hash-link" aria-label="1.3解决方案的直接链接" title="1.3解决方案的直接链接">​</a></h4>
<ol>
<li>缓存服务不可用
redis 的部署方式主要有单机、主从、哨兵和 cluster 模式。</li>
</ol>
<ul>
<li>单机
只有一台机器，所有数据都存在这台机器上，当机器出现异常时，redis 将失效，可能会导致 redis 缓存雪崩。</li>
<li>主从
主从其实就是一台机器做主，一个或多个机器做从，从节点从主节点复制数据，可以实现读写分离，主节点做写，从节点做读。
优点：当某个从节点异常时，不影响使用。
缺点：当主节点异常时，服务将不可用。</li>
<li>哨兵
哨兵模式也是一种主从，只不过增加了哨兵的功能，用于监控主节点的状态，当主节点宕机之后会进行投票在从节点中重新选出主节点。
优点：高可用，当主节点异常时，自动在从节点当中选择一个主节点。
缺点：只有一个主节点，当数据比较多时，主节点压力会很大。</li>
<li>cluster 模式
集群采用了多主多从，按照一定的规则进行分片，将  数据分别存储，一定程度上解决了哨兵模式下单机存储有限的问题。
优点：高可用，配置了多主多从，可以使数据分区，去中心化，减小了单台机子的负担.
缺点：机器资源使用比较多，配置复杂。</li>
<li>小结
从高可用得角度考虑，使用哨兵模式和 cluster 模式可以防止因为 redis 不可用导致的缓存雪崩问题。</li>
</ul>
<ol start="2">
<li>大量 KEY 同时失效
可以通过设置永不失效、设置不同失效时间、使用二级缓存和定时更新缓存失效时间</li>
</ol>
<ul>
<li>设置永不失效
如果所有的 key 都设置不失效，不就不会出现因为 KEY 失效导致的缓存雪崩问题了。redis 设置 key 永远有效的命令如下：
PERSIST key
缺点：会导致 redis 的空间资源需求变大。</li>
<li>设置随机失效时间
如果 key 的失效时间不相同，就不会在同一时刻失效，这样就不会出现大量访问数据库的情况。
redis 设置 key 有效时间命令如下：
Expire key
示例代码如下，通过 RedisClient 实现</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">* 随机设置小于30分钟的失效时间</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">* @param redisKey</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">* @param value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">private void setRandomTimeForReidsKey(String redisKey,String value){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//随机函数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Random rand = new Random();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//随机获取30分钟内（30*60）的随机数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">int times = rand.nextInt(1800);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//设置缓存时间（缓存的key,缓存的值，失效时间：单位秒）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">redisClient.setNxEx(redisKey,value,times);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>使用二级缓存
二级缓存是使用两组缓存，1 级缓存和 2 级缓存，同一个 Key 在两组缓存里都保存，但是他们的失效时间不同，这样 1 级缓存没有查到数据时，可以在二级缓存里查询，不会直接访问数据库。
示例代码如下：</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CacheTest test = new CacheTest();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//从1级缓存中获取数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String value = test.queryByOneCacheKey(&quot;key&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//如果1级缓存中没有数据，再二级缓存中查找</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if(StringUtils.isBlank(value)){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">value = test.queryBySecondCacheKey(&quot;key&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//如果二级缓存中没有，从数据库中查找</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if(StringUtils.isBlank(value)){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">value =test.getFromDb();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//如果数据库中也没有，就返回空</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if(StringUtils.isBlank(value)){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">System.out.println(&quot;数据不存在!&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}else{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//二级缓存中保存数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">test.secondCacheSave(&quot;key&quot;,value);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//一级缓存中保存数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">test.oneCacheSave(&quot;key&quot;,value);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">System.out.println(&quot;数据库中返回数据!&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}else{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//一级缓存中保存数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">test.oneCacheSave(&quot;key&quot;,value);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">System.out.println(&quot;二级缓存中返回数据!&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">System.out.println(&quot;一级缓存中返回数据!&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>异步更新缓存时间</p>
<p>每次访问缓存时，启动一个线程或者建立一个异步任务来，更新缓存时间。</p>
<p>示例代码如下：</p>
</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class CacheRunnable implements Runnable {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">private ClusterRedisClientAdapter redisClient;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">* 要更新的key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public String key;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public CacheRunnable(String key){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">this.key =key;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public void run() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//更细缓存时间</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">redisClient.expire(this.getKey(),1800);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public String getKey() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">return key;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public void setKey(String key) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">this.key = key;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CacheTest test = new CacheTest();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//从缓存中获取数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String value = test.getFromCache(&quot;key&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if(StringUtils.isBlank(value)){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//从数据库中获取数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">value = test.getFromDb(&quot;key&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//将数据放在缓存中</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">test.oneCacheSave(&quot;key&quot;,value);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//返回数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">System.out.println(&quot;返回数据&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}else{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//异步任务更新缓存</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CacheRunnable runnable = new CacheRunnable(&quot;key&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">runnable.run();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//返回数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">System.out.println(&quot;返回数据&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2缓存穿透">2、缓存穿透<a href="#2缓存穿透" class="hash-link" aria-label="2、缓存穿透的直接链接" title="2、缓存穿透的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="21现象">2.1现象<a href="#21现象" class="hash-link" aria-label="2.1现象的直接链接" title="2.1现象的直接链接">​</a></h4>
<ul>
<li>发生在请求的数据不存在于缓存，但是请求依然会到达后端服务器。</li>
<li>由于请求的数据不存在，每次请求都会到达后端服务器，导致大量的无效请求，增加了后端的压力。</li>
</ul>
<p><img decoding="async" loading="lazy" alt="image-20230130110129433" src="/assets/images/image-20230130110129433-feec4a9784b5878620fadfead17e626d.png" width="442" height="207" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="22异常原因">2.2异常原因<a href="#22异常原因" class="hash-link" aria-label="2.2异常原因的直接链接" title="2.2异常原因的直接链接">​</a></h4>
<ul>
<li>非法调用</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="23解决方案">2.3解决方案<a href="#23解决方案" class="hash-link" aria-label="2.3解决方案的直接链接" title="2.3解决方案的直接链接">​</a></h4>
<ol>
<li>对于不存在的数据设置一个空值，设置有效期</li>
<li>对请求数据做限流</li>
<li>哈希/布隆过滤器预处理</li>
<li>使用布尔值进行标识（例如：0或1）表示数据是否存在</li>
<li>双重检查机制（Cache Aside Pattern）</li>
</ol>
<p><em>TODO 这里只写了第一种解决方案，剩下的以后补充...</em></p>
<ul>
<li>缓存空值
当缓存和数据库中都没有值时，可以在缓存中存放一个空值，这样就可以减少重复查询空值引起的系统压力增大，从而优化了缓存穿透问题。
示例代码如下：</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">private String queryMessager(String key){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//从缓存中获取数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String message = getFromCache(key);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//如果缓存中没有 从数据库中查找</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if(StringUtils.isBlank(message)){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">message = getFromDb(key);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//如果数据库中也没有数据 就设置短时间的缓存</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if(StringUtils.isBlank(message)){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//设置缓存时间（缓存的key,缓存的值，失效时间：单位秒）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">redisClient.setNxEx(key,null,60);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}else{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">redisClient.setNxEx(key,message,1800);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">return message;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>缺点：大量的空缓存导致资源的浪费，也有可能导致缓存和数据库中的数据不一致。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3缓存击穿">3、缓存击穿<a href="#3缓存击穿" class="hash-link" aria-label="3、缓存击穿的直接链接" title="3、缓存击穿的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="31现象">3.1现象<a href="#31现象" class="hash-link" aria-label="3.1现象的直接链接" title="3.1现象的直接链接">​</a></h4>
<p>当一个高流量的请求访问同一个缓存数据时，如果该数据的缓存失效，那么所有的请求都会直接请求数据库，造成数据库压力过大。</p>
<p>与缓存穿透区别：缓存击穿是因为某个数据被大量请求，导致其缓存失效，从而打击数据库；缓存穿透是因为请求了不存在的数据，导致所有请求都需要访问数据库。</p>
<p><img decoding="async" loading="lazy" alt="image-20230130111239309" src="/assets/images/image-20230130111239309-55a5b514708d305b7d9938695fc84f32.png" width="449" height="221" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="32异常原因">3.2异常原因<a href="#32异常原因" class="hash-link" aria-label="3.2异常原因的直接链接" title="3.2异常原因的直接链接">​</a></h4>
<ul>
<li>热点 KEY 失效的同时，大量<strong>相同</strong> KEY 请求同时访问。</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="33解决方案">3.3解决方案<a href="#33解决方案" class="hash-link" aria-label="3.3解决方案的直接链接" title="3.3解决方案的直接链接">​</a></h4>
<ol>
<li>加锁机制：对于特定的数据请求加锁，避免大量请求造成的缓存失效。</li>
<li>分布式锁：使用分布式锁来确保对特定数据的更新操作是原子性的。</li>
<li>后备机制：在缓存失效时使用后备机制，保证缓存请求能够得到响应。</li>
<li>限流机制：对请求数据进行限流，防止大量请求造成的压力。</li>
<li>对于过期的数据进行异步删除：避免因数据过期导致的缓存击穿。</li>
</ol>
<ul>
<li>
<p>分布式锁</p>
<p>使用分布式锁，同一时间只有 1 个请求可以访问到数据库，其他请求等待一段时间后，重复调用。</p>
<p>示例代码如下</p>
</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">* 根据key获取数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">* @param key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">* @return</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">* @throws InterruptedException</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public String queryForMessage(String key) throws InterruptedException {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//初始化返回结果</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">String result = StringUtils.EMPTY;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//从缓存中获取数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">result = queryByOneCacheKey(key);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//如果缓存中有数据，直接返回</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if(StringUtils.isNotBlank(result)){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">return result;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}else{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//获取分布式锁</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if(lockByBusiness(key)){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//从数据库中获取数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">result = getFromDb(key);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//如果数据库中有数据，就加在缓存中</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if(StringUtils.isNotBlank(result)){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">oneCacheSave(key,result);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//如果没有获取到分布式锁，睡眠一下，再接着查询数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Thread.sleep(500);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">return queryForMessage(key);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">return result;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>还可以预先设置热门数据，通过一些监控方法，及时收集热点数据，将数据预先保存在缓存中。</p>
<p>总结：</p>
<ul>
<li>缓存雪崩是因为缓存数据的失效导致的请求增加，造成系统压力过大，宕机。</li>
<li>缓存穿透是因为请求的数据不存在，导致请求直接到达后端，增加了后端的压力。</li>
<li>缓存击穿是因为某个数据被大量请求，导致其缓存失效，从而打击数据库。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="其他常见的redis错误及其解决方法">其他常见的Redis错误及其解决方法：<a href="#其他常见的redis错误及其解决方法" class="hash-link" aria-label="其他常见的Redis错误及其解决方法：的直接链接" title="其他常见的Redis错误及其解决方法：的直接链接">​</a></h2>
<ol>
<li>连接被拒绝：当Redis没有运行或防火墙阻止了连接时会发生此错误。解决方案：检查Redis是否正在运行，如果防火墙阻止了连接，请为Redis添加一个例外。</li>
<li>达到最大客户端数：当太多客户端试图同时连接到Redis时会发生此错误。解决方案：增加Redis配置文件中的maxclients设置，或添加更多的Redis实例。</li>
<li>内存不足：当Redis的内存用尽时会发生此错误。解决方案：减小存储在Redis中的数据的大小，为服务器添加更多内存，或使用Redis的逐出策略自动删除最近最少使用的项目。</li>
<li>语法错误：当命令以错误的语法发送到Redis时会发生此错误。解决方案：检查命令的语法，然后重试。</li>
<li>未找到键：当尝试检索不存在的键的值时会发生此错误。解决方案：使用EXISTS命令在尝试检索其值之前检查键是否存在。</li>
<li>将数据加载到内存：当Redis从磁盘重新加载数据到内存时会发生此错误。解决方案：等待重新加载完成，或增加Redis配置文件中的保存间隔。</li>
</ol></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于中间件相关的话题" class="tag_zVej tagRegular_sFm0" href="/blog/tags/zhongjianjian">中间件</a></li><li class="tag_QGVx"><a title="关于Redis的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/redis">Redis</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/talk-about-redis-api">jedis实操redisAPI</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-12-10T00:00:00.000Z">2022年12月10日</time> · <!-- -->阅读需 14 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p>为了加深对原生redis命令的认识，我又手写了边通过jedis调用原生redis API 的实操，<em>Redis命令十分丰富，包括的命令组有Cluster、Connection、Geo、Hashes、HyperLogLog、Keys、Lists、Pub/Sub、Scripting、Server、Sets、Sorted Sets、Strings、Transactions一共14个redis命令组两百多个redis命令，Redis中文命令大全。您可以通过下面的检索功能快速查找命令，已下是全部已知的redis命令列表。如果您有兴趣的话也可以查看我们的<a href="http://www.redis.cn/map.html" target="_blank" rel="noopener noreferrer">网站结构图</a>,它以节点图的形式展示了所有redis命令。</em></p>
<p>Redis官网：<a href="https://redis.io/" target="_blank" rel="noopener noreferrer">https://redis.io/</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="一使用java操作redis方式">一、使用Java操作Redis方式<a href="#一使用java操作redis方式" class="hash-link" aria-label="一、使用Java操作Redis方式的直接链接" title="一、使用Java操作Redis方式的直接链接">​</a></h2>
<p>1、Jedis</p>
<div class="language-tex codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tex codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Jedis 是直连模式，在多个线程间共享一个 Jedis 实例时是线程不安全的,需要使用连接池</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">其API提供了比较全面的Redis命令的支持，相比于其他Redis 封装框架更加原生</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Jedis中的方法调用是比较底层的暴露的Redis的API，Java方法基本和Redis的API保持着一致</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">使用阻塞的I/O，方法调用同步，程序流需要等到socket处理完I/O才能执行，不支持异步操作</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2、Lettuce</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">高级Redis客户端，用于线程安全同步，异步响应</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">基于Netty的的事件驱动，可以在多个线程间并发访问, 通过异步的方式可以更好的  利用系统资源</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>我就用Jedis操作了.....</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="二亲笔演练redis五大常用命令组">二、亲笔演练Redis五大常用命令组<a href="#二亲笔演练redis五大常用命令组" class="hash-link" aria-label="二、亲笔演练Redis五大常用命令组的直接链接" title="二、亲笔演练Redis五大常用命令组的直接链接">​</a></h2>
<p>1、使用连接池</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package space.jachen.jedis;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import redis.clients.jedis.Jedis;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import redis.clients.jedis.JedisPool;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import redis.clients.jedis.JedisPoolConfig;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * TODO： 测试jedis与redis建立连接  使用线程池</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @author JaChen</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @date 2022/12/10 15:37</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Test2 {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 建立连接池配置信息</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        JedisPoolConfig poolConfig = new JedisPoolConfig();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        poolConfig.setMaxTotal(200);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        poolConfig.setMaxIdle(32);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        poolConfig.setMaxWaitMillis(10*100);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        poolConfig.setBlockWhenExhausted(true);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        poolConfig.setTestOnBorrow(true);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 创建一个连接池</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        JedisPool pool = new JedisPool(poolConfig, &quot;192.168.253.128&quot;, 6379);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 从连接池获取一个现成的连接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Jedis jedis = pool.getResource();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;jedis = &quot; + jedis);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 不使用的时候放回连接池</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2、操作String</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package space.jachen.jedis;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import redis.clients.jedis.Jedis;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import redis.clients.jedis.JedisPool;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import redis.clients.jedis.JedisPoolConfig;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @author JaChen</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @date 2022/12/10 15:41</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class TestString {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 1、建立连接池配置信息</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        JedisPoolConfig poolConfig = new JedisPoolConfig();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        poolConfig.setMaxTotal(200);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        poolConfig.setMaxIdle(32);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        poolConfig.setMaxWaitMillis(10*100);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        poolConfig.setBlockWhenExhausted(true);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        poolConfig.setTestOnBorrow(true);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 2、创建一个连接池</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        JedisPool pool = new JedisPool(poolConfig, &quot;192.168.253.128&quot;, 6379);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 3、从连接池获取一个现成的连接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Jedis jedis = pool.getResource();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;jedis = &quot; + jedis);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 4、操作String</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;===============String==============&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // TODO：存储字符串的类型，key-value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  notice:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  1、值的长度不能超过512 MB</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  2、key命名规范，不要过长，冒号分割，业务名:表名:ID</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // TODO: 应用 ：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  1、验证码</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  2、计时器、发号器</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  3、重复订单提交令牌</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  4、热点商品卡片(序列化对象存储)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  5、分布式锁</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String setName = jedis.set(&quot;name&quot;, &quot;jachen&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;setName = &quot; + setName);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.get(&quot;name&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.set(&quot;age&quot;,&quot;18&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.get(&quot;age&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // incr 对应 的值 进行加1操作，并返回新值。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.incr(&quot;age&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.get(&quot;age&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 将key对应的数字加increment。(如果key不存在，操作之前，key会被置为零。)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.incrBy(&quot;age&quot;,10);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.get(&quot;age&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.set(&quot;cart&quot;,&quot;887766&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.get(&quot;cart&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 批量设置或获取多个key的值</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.mset(&quot;tell&quot;, &quot;110&quot;, &quot;weight&quot;, &quot;65kg&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.mget(&quot;tell&quot;,&quot;weight&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.setnx(&quot;sex&quot;,&quot;0&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.get(&quot;sex&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 原子性操作</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 将key设置值为value，如果key不存在等同SET命令。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.msetnx(&quot;k1&quot;,&quot;v1&quot;,&quot;k2&quot;,&quot;v2&quot;,&quot;sex&quot;,&quot;0&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.mget(&quot;k1&quot;,&quot;k2&quot;,&quot;sex&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 当key存在时什么也不做,  是set if not exists的简写。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.msetnx(&quot;k1&quot;,&quot;v1&quot;,&quot;k2&quot;,&quot;v2&quot;,&quot;sex&quot;,&quot;1&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.mget(&quot;k1&quot;,&quot;k2&quot;,&quot;sex&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 设置key对应字符串value，</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 并且设置key在给定的seconds时间之后超时过期,原子操作</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.setex(&quot;car&quot;,2,&quot;887766&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.get(&quot;car&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Thread.sleep(3000);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            throw new RuntimeException(e);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.get(&quot;car&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 5、不使用的时候放回连接池</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>运行结果：</p>
<p><img decoding="async" loading="lazy" alt="image-20221210231902515" src="/assets/images/image-20221210231902515-afec2d8acfbc609531f330a48ce9eaf6.png" width="804" height="400" class="img_ev3q"></p>
<p>3、操作List</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package space.jachen.jedis;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import redis.clients.jedis.Jedis;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @author JaChen</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @date 2022/12/10 21:05</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class TestList {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 1、获取一个Jedis连接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Jedis jedis = new Jedis(&quot;192.168.253.128&quot;,6379);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 2、操作List</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // TODO: 字符串列表，按照插入顺序排序</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  存储结构：双向链表，插入删除时间复杂度O(1)快,查找为O(n)慢</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  notice：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  1、通常添加一个元素到列表的头部（左边）或者尾部（右边）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  2、存储的都是string字符串类型</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  3、支持分页操作，高并发项目中，第一页数据都是来源list，第二页和更多信息则是通过数据库加载</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  4、一个列表最多可以包含 232 - 1 个元素 (4294967295, 每个列表不超过40亿个元素)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // TODO: 应用：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  1、简单队列</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  2、最新评论列表</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  3、非实时排行榜：定时计算榜单，如手机日销榜单</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;===============List===============&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ① 将一个或多个值插入到列表头部  key value1 [value2]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.lpush(&quot;phone&quot;,&quot;mate5&quot;,&quot;iphone14&quot;,&quot;iphone11&quot;,&quot;iphone5s&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.llen(&quot;phone&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.lrange(&quot;phone&quot;,0,-1));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ② 移除并获取列表最后一个元素</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String rpop = jedis.rpop(&quot;phone&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;rpop = &quot; + rpop);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ③ 在key对应的list的尾部添加一个元素</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.rpush(&quot;netbook&quot;,&quot;DELL&quot;,&quot;Mac&quot;,&quot;外星人&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.lrange(&quot;netbook&quot;,0,-1));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ④ 从key对应的list的尾部删除一个元素，并返回该元素</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.lpop(&quot;netbook&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ⑤ 移出并获取列表的最后一个元素，</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // BRPOP LIST1 LIST2 .. LISTN TIMEOUT</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.del(&quot;netbook&quot;,&quot;iphone&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.lrange(&quot;iphone&quot;,0,-1));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.rpush(&quot;iphone&quot;,&quot;a&quot;,&quot;b&quot;,&quot;c&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        List&lt;String&gt; list = jedis.brpop(&quot;iphone&quot;, &quot;netbook&quot;, &quot;1&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (String s : list) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(s);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ⑥ 移除元素,可以指定移除个数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.lrem(&quot;iphone&quot;,1,&quot;a&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.lrange(&quot;iphone&quot;,0,-1));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 3、关闭连接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>运行结果：</p>
<p><img decoding="async" loading="lazy" alt="image-20221210232207004" src="/assets/images/image-20221210232207004-8b5b8d44c2b5b0ab278ba1ff89b619d6.png" width="805" height="278" class="img_ev3q"></p>
<p>4、操作Set</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package space.jachen.jedis;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import redis.clients.jedis.Jedis;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.Set;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @author JaChen</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @date 2022/12/10 21:40</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class TestSet {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 1、获取一个Jedis连接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Jedis jedis = new Jedis(&quot;192.168.253.128&quot;,6379);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // TODO: 将一个或多个成员元素加入到集合中，已经存在于集合的成员元素将被忽略</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  notice: 集合是通过哈希表实现的</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // TODO: 应用：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  1、去重</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  2、社交应用关注、粉丝、共同好友</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  3、统计网站的PV、UV、IP</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  4、大数据里面的用户画像标签集合</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 2、操作Set</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;===============Set==============&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ① 添加一个或多个指定的member元素到集合的 key中.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 指定的一个或者多个元素member 如果已经在集合key中存在则忽略</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.sadd(&quot;user1&quot;,&quot;u1&quot;,&quot;beijing&quot;,&quot;18&quot;,&quot;iphone11&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.sadd(&quot;user2&quot;,&quot;u2&quot;,&quot;shanghai&quot;,&quot;19&quot;,&quot;iphone12&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.sadd(&quot;user3&quot;,&quot;u3&quot;,&quot;beijing&quot;,&quot;19&quot;,&quot;iphone13&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ② 返回集合存储的key的基数 (集合元素的数量).</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.scard(&quot;user1&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.scard(&quot;user2&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.scard(&quot;user3&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ③ 返回的集合元素是第一个key的集合与后面所有key的集合的差集</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.sdiff(&quot;user1&quot;, &quot;user2&quot;, &quot;user3&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ④ 返回指定所有的集合的成员的交集.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.sinter(&quot;user1&quot;, &quot;user2&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ⑤ 返回成员 member 是否是存储的集合 key的成员.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.sismember(&quot;user1&quot;,&quot;beijing&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ⑥ 在key集合中移除指定的元素. 如果指定的元素不是key集合中的元素则忽略</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.srem(&quot;user1&quot;,&quot;iphone11&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.scard(&quot;user1&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ⑦ 返回给定的多个集合的并集中的所有成员.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Set&lt;String&gt; sunion = jedis.sunion(&quot;user1&quot;, &quot;user2&quot;, &quot;user3&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (String s : sunion) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.print(s + &quot; &quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ⑧ 返回key集合所有的元素.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Set&lt;String&gt; user1 = jedis.smembers(&quot;user1&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (String s : user1) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.print(s + &quot; &quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // key的存活时间</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;\njedis.ttl(\&quot;user1\&quot;) = &quot; + jedis.ttl(&quot;user1&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 3、关闭连接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>运行结果：</p>
<p><img decoding="async" loading="lazy" alt="image-20221210232225594" src="/assets/images/image-20221210232225594-187b2a05c21971eb0aa0a33f84fd95ea.png" width="656" height="287" class="img_ev3q"></p>
<p>5、操作Hash</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package space.jachen.jedis;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import redis.clients.jedis.Jedis;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.HashMap;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @author JaChen</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @date 2022/12/10 22:03</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class TestHash {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 1、获取一个Jedis连接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Jedis jedis = new Jedis(&quot;192.168.253.128&quot;,6379);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 2、Hash操作</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // TODO：string类型的field和value的映射表，hash特别适合用于存储对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  notice：每个 hash 可以存储 232 - 1 键值对（40多亿）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // TODO：应用:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  1、购物车</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  2、用户个人信息</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  3、商品详情</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;===============Hash==============&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ① 设置 key 指定的哈希集中指定字段的值</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.hset(&quot;class&quot;,&quot;redis&quot;,&quot;80&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.hget(&quot;class&quot;,&quot;redis&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        HashMap&lt;String, String&gt; hashMap = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        hashMap.put(&quot;java&quot;,&quot;100&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        hashMap.put(&quot;c++&quot;,&quot;90&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        hashMap.put(&quot;c&quot;,&quot;96&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.hmset(&quot;class&quot;,hashMap);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ② 返回 key 指定的哈希集中所有的字段和值</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.hgetAll(&quot;class&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ③ 从 key 指定的哈希集中移除指定的域</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.hdel(&quot;class&quot;,&quot;c&quot;,&quot;c++&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.hgetAll(&quot;class&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ④ 返回hash里面field是否存在</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.hexists(&quot;class&quot;,&quot;c&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ⑤ 增加 key 指定的哈希集中指定字段的数值,  如果是-1 则是递减</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // HINCRBY key field increment</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.hincrBy(&quot;class&quot;,&quot;java&quot;,-5);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.hgetAll(&quot;class&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.hincrBy(&quot;class&quot;,&quot;java&quot;,-5);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.hgetAll(&quot;class&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 3、关闭Jedis连接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>运行结果：</p>
<p><img decoding="async" loading="lazy" alt="image-20221210232256172" src="/assets/images/image-20221210232256172-38f5860d9372b383dbb843c6e5de58af.png" width="464" height="234" class="img_ev3q"></p>
<p>6、操作SortedSet</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">package space.jachen.jedis;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import redis.clients.jedis.Jedis;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.HashMap;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @author JaChen</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * @date 2022/12/10 22:36</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class TestSortedSet {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 1、获取一个Jedis连接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Jedis jedis = new Jedis(&quot;192.168.253.128&quot;,6379);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 2、操作SortedSet 可叫zSet</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // TODO:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  1、有序集合可以看做是在Set集合的的基础上为集合中的每个元素维护了一个顺序值: score,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  它允许集合中的元素可以按照score进行排序</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  2、如果某个成员已经是有序集的成员，</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  那么更新这个成员的分数值，分数值可以是整数值或双精度浮点数。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  3、用于将一个或多个成员元素及其分数值加入到有序集当中</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  notice:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  1、底层使用到了Ziplist压缩列表和“跳跃表”两种存储结构</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  2、如果重复添加相同的数据，score值将被反复覆盖，保留最后一次修改的结果</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // TODO：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  应用：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  1、实时排行榜：商品热销榜、体育类应用热门球队、积分榜</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  2、优先级任务、队列</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  3、朋友圈 文章点赞-取消，逻辑：用户只能点赞或取消，</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //  统计一篇文章被点赞了多少次，可以直接取里面有多少个成员</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;===============SortedSet==============&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ① 向有序集合添加一个或多个成员，或者更新已存在成员的分数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.zadd(&quot;goods&quot;,100,&quot;iPhone14&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ② 获取有序集合的成员数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.zcard(&quot;goods&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ③ 有序集合中对指定成员的分数加上增量 increment</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.zincrby(&quot;goods&quot;,10,&quot;iPhone14&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.zscore(&quot;goods&quot;,&quot;iPhone14&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.zincrby(&quot;goods&quot;,10,&quot;iPhone14&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.zscore(&quot;goods&quot;,&quot;iPhone14&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        HashMap&lt;String, Double&gt; hashMap = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        hashMap.put(&quot;meta8&quot;,60D);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        hashMap.put(&quot;iPhone12&quot;,101D);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        hashMap.put(&quot;iPhone6s&quot;,30D);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.zadd(&quot;goods&quot;,hashMap);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ④ 计算在有序集合中指定区间分数的成员数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.zcount(&quot;goods&quot;,10,150));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ⑤ 通过索引区间返回有序集合指定区间内的成员, 成员的位置按分数值递增(从小到大)来排序</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.zrange(&quot;goods&quot;,0,-1));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 根据score正序输出</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.zrangeByScore(&quot;goods&quot;,0D,100));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ⑥ 通过索引区间返回有序集合指定区间内的成员, 成员的位置按分数值递增(从大到小)来排序</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.zrevrange(&quot;goods&quot;,0,-1));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ⑦ 返回有序集合中指定成员的排名，有序集成员按分数值递减(从大到小)排序</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.zrevrank(&quot;goods&quot;,&quot;meta8&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ⑧ 返回有序集key中成员member的排名。其中有序集成员按score值递增(从小到大)顺序排列</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(jedis.zrank(&quot;goods&quot;,&quot;meta8&quot;));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 3、 关闭jedis连接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        jedis.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>运行结果：</p>
<p><img decoding="async" loading="lazy" alt="image-20221210232340442" src="/assets/images/image-20221210232340442-63a8d6907d711168cbb838ece464def3.png" width="680" height="278" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a href="#总结" class="hash-link" aria-label="总结的直接链接" title="总结的直接链接">​</a></h2>
<p>除了要了解这些数据结构的常用场景之前，还有继续加深对他们底层实现的了解，比如SortedSet底层为什么要使用跳 跃表呢？为什么使用红黑树等等。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于中间件相关的话题" class="tag_zVej tagRegular_sFm0" href="/blog/tags/zhongjianjian">中间件</a></li><li class="tag_QGVx"><a title="关于Redis的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/redis">Redis</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/talk-about-SpringMVC-implementation-process">SpringMVC架构实现流程</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-09-12T00:00:00.000Z">2022年9月12日</time> · <!-- -->阅读需 7 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p>**起因：**SpringMVC<em>是 Spring 框架提供的一款基于 MVC 模式的轻量级 Web 开发框架，为了让自己更清晰的认识SpringMVC底层的实现流程，对SpringMVC有更加深层次的认识，对它进行了使用流程的使用与总结</em>。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="一什么是springmvc">一、什么是SpringMVC<a href="#一什么是springmvc" class="hash-link" aria-label="一、什么是SpringMVC的直接链接" title="一、什么是SpringMVC的直接链接">​</a></h2>
<p>Spring MVC 使用 MVC 架构模式的思想，将 Web 应用进行职责解构，把一个复杂的 Web 应用划分成模型（Model）、控制器（Contorller）以及视图（View）三层。</p>
<ul>
<li>Model：负责对请求进行处理，并将结果返回给 Controller；</li>
<li>View：负责将请求的处理结果进行渲染，展示在客户端浏览器上；</li>
<li>Controller：是 Model 和 View 交互的纽带；主要负责接收用户请求，并调用 Model 对请求处理，然后将 Model 的处理结果传递给 View。</li>
</ul>
<p>Spring MVC 本质是对 Servlet 的进一步封装，其最核心的组件是 DispatcherServlet，它是 Spring MVC 的前端控制器，主要负责对请求和响应的统一地处理和分发。Controller 接收到的请求其实就是 DispatcherServlet 根据一定的规则分发给它的。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="二springmvc常用组件">二、SpringMVC常用组件<a href="#二springmvc常用组件" class="hash-link" aria-label="二、SpringMVC常用组件的直接链接" title="二、SpringMVC常用组件的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="spring-mvc-核心组件简要说明">Spring MVC 核心组件简要说明<a href="#spring-mvc-核心组件简要说明" class="hash-link" aria-label="Spring MVC 核心组件简要说明的直接链接" title="Spring MVC 核心组 件简要说明的直接链接">​</a></h3>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="spring-mvc-核心组件说明">Spring MVC 核心组件说明<a href="#spring-mvc-核心组件说明" class="hash-link" aria-label="Spring MVC 核心组件说明的直接链接" title="Spring MVC 核心组件说明的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-前端控制器dispatcherservlet">1. 前端控制器（DispatcherServlet）<a href="#1-前端控制器dispatcherservlet" class="hash-link" aria-label="1. 前端控制器（DispatcherServlet）的直接链接" title="1. 前端控制器（DispatcherServlet）的直接链接">​</a></h4>
<p><strong>DispatcherServlet</strong> 是 Spring MVC 的核心组件，本质上是一个 Servlet，负责统一接收并分发所有的请求。它作为整个流程的控制中心，协调各个组件完成任务，从而降低了组件之间的耦合性，增强了系统的可扩展性。</p>
<ul>
<li><strong>提供者</strong>：框架自带</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-处理器映射器handlermapping">2. 处理器映射器（HandlerMapping）<a href="#2-处理器映射器handlermapping" class="hash-link" aria-label="2. 处理器映射器（HandlerMapping）的直接链接" title="2. 处理器映射器（HandlerMapping）的直接链接">​</a></h4>
<p><strong>HandlerMapping</strong> 的作用是根据请求的 URL 或 HTTP 方法查找对应的处理器（Handler），也就是具体的控制器方法。</p>
<ul>
<li><strong>提供者</strong>：框架自带</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-处理器handler">3. 处理器（Handler）<a href="#3-处理器handler" class="hash-link" aria-label="3. 处理器（Handler）的直接链接" title="3. 处理器（Handler）的直接链接">​</a></h4>
<p><strong>Handler</strong> 是具体的控制器方法（Controller），负责在 DispatcherServlet 的调度下处理用户的具体请求，并返回响应数据。</p>
<ul>
<li><strong>提供者</strong>：自己编写</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-处理器适配器handleradapter">4. 处理器适配器（HandlerAdapter）<a href="#4-处理器适配器handleradapter" class="hash-link" aria-label="4. 处理器适配器（HandlerAdapter）的直接链接" title="4. 处理器适配器（HandlerAdapter）的直接链接">​</a></h4>
<p><strong>HandlerAdapter</strong> 负责调用与 HandlerMapping 映射到的处理器方法。它通过特定的规则执行处理器（Handler），确保方法能够被正确调用。</p>
<ul>
<li><strong>提供者</strong>：框架自带</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="5-视图解析器viewresolver">5. 视图解析器（ViewResolver）<a href="#5-视图解析器viewresolver" class="hash-link" aria-label="5. 视图解析器（ViewResolver）的直接链接" title="5. 视图解析器（ViewResolver）的直接链接">​</a></h4>
<p><strong>ViewResolver</strong> 的功能是将逻辑视图名解析为物理视图路径。例如，将逻辑视图名 <code>result</code> 解析为 <code>/WEB-INF/templates/result.html</code>，并将解析后的视图返回给 DispatcherServlet。</p>
<ul>
<li><strong>提供者</strong>：框架自带</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="6-视图view">6. 视图（View）<a href="#6-视图view" class="hash-link" aria-label="6. 视图（View）的直接链接" title="6. 视图（View）的直接链接">​</a></h4>
<p><strong>View</strong> 是最终的展示层，用于将模型数据（Model）通过页面呈现给用户。通常是由 JSP、Thymeleaf 或其他模板引擎生成的页面。</p>
<ul>
<li><strong>提供者</strong>：自己编写</li>
</ul>
<hr>
<ol>
<li>DispatcherServlet（前端控制器）、HandlerMapping（处理器映射器）、HandlerAdapter（处理器适配器）、Handler（处理器）、ViewResolver（视图解析器）和 View（视图）。</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="三springmvc 基本流程图">三、SpringMVC基本流程图<a href="#三springmvc基本流程图" class="hash-link" aria-label="三、SpringMVC基本流程图的直接链接" title="三、SpringMVC基本流程图的直接链接">​</a></h2>
<p><img decoding="async" loading="lazy" alt="image-20221204230911409" src="/assets/images/image-20221204230911409-604f1a5c54260f4c22538bd29dd056b2.png" width="1012" height="671" class="img_ev3q"></p>
<p>1、浏览器发送请求——&gt;DispatcherServlet</p>
<p>该请求会被 DispatcherServlet（前端控制器）拦截；前端控制器收到请求后自己不进行处理，而是委托给其他组件进行处理，作为统一访问点，进行全局的流程控制。</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">&lt;!-- DS：前端控制器 --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">servlet</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">servlet-name</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">ds</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">servlet-name</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">servlet-class</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">org.springframework.web.servlet.DispatcherServlet</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">servlet-class</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">init-param</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">param-name</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">contextConfigLocation</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">param-name</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">param-value</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">classpath:applicationContext-web.xml</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">param-value</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">init-param</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;</span><span class="token tag" style="color:rgb(255, 121, 198)">load-on-startup</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain">1</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">load-on-startup</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&lt;/</span><span class="token tag" style="color:rgb(255, 121, 198)">servlet</span><span class="token tag punctuation" style="color:rgb(248, 248, 242)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2、DispatcherServlet——&gt;HandlerMapping</p>
<p>DispatcherServlet 调用 HandlerMapping（处理器映射器）找到具体的处理器（Handler）及拦截器，最后以 HandlerExecutionChain 执行链的形式返回给 DispatcherServlet。</p>
<p>3、DispatcherServlet——&gt;HandlerAdapter</p>
<p>DispatcherServlet 将执行链返回的 Handler 信息发送给 HandlerAdapter（处理器适配器）。处理器适配器将会把处理器包装为适配器，从而支持多种类型的处理器，即适配器设计模式的应用，从而很容易支持很多类型的处理器。</p>
<p>4、HandlerAdapter——&gt;Handler</p>
<p>根据 Handler 信息找到并执行相应的 Handler（即 Controller 控制器）对请求进行处理，Handler 执行完毕后会返回给 HandlerAdapter 一个 ModelAndView 对象（Spring MVC 的底层对象，包括 Model 数据模型和 View 视图信息）。</p>
<p>5、DispatcherServlet——&gt;ViewResolver</p>
<p>DispatcherServlet 接收到 ModelAndView 对象后，会请求 ViewResolver（视图解析器）对视图进行解析。</p>
<p>6、DispatcherServlet——&gt;View</p>
<p>ViewResolver 解析完成后，会将 View 视图并返回给 DispatcherServlet。DispatcherServlet 接收到具体的 View 视图后，进行视图渲染，将 Model 中的模型数据填充到 View 视图中的 request 域，生  成最终的 View（视图）。</p>
<p>7、DispatcherServlet——&gt;响应</p>
<p>返回控制权给DispatcherServlet，由它响应用户，到此一个流程结束。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="四springmvc的优势">四、SpringMVC的优势<a href="#四springmvc的优势" class="hash-link" aria-label="四、SpringMVC的优势的直接链接" title="四、SpringMVC的优势的直接链接">​</a></h2>
<p>Spring MVC 框架内部采用松耦合、可插拔的组件结构，具有高度可配置性，比起其他的 MVC 框架更具有扩展性和灵活性。此外，Spring MVC 的注解驱动（annotation-driven）和对 REST 风格的支持，也是它最具有特色的功能。</p>
<p>Spring MVC 是 Spring 框架的众多子项目之一，自 Spring 框架诞生之日起就包含在 Spring 框架中了，它可以与 Spring 框架无缝集成，在性能方面具有先天的优越性。对于开发者来说，Spring MVC 的开发效率要明显高于其它的 Web 框架，因此 Spring MVC 在企业中得到了广泛的应用，成为目前业界最主流的 MVC 框架之一。</p>
<p>Spring MVC 基于原生的 Servlet 实现，通过功能强大的前端控制器 DispatcherServlet，对请求和响应进行统一处理。</p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/talk-about-reduce-context-switch-overhead">减少切换上下文开销</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-05-20T00:00:00.000Z">2022年5月20日</time> · <!-- -->阅读需 2 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>我们怎么能减少切换上下文带来的开销呢？</em></p>
<p>cpu为线程分配时间片，时间片非常短（毫秒级别），cpu不停的切换线程执行，在切换前会保存上一个任务的状态，以便下次切换回这个任务时，可以再加载这个任务的状态，让我们感觉是多个程序同时运行的。</p>
<p>上下文的频繁切换，会带来一定的性能开销</p>
<p>那么<strong>如何减少上下文切换的开销</strong>？</p>
<p>1、<strong>无锁并发编程</strong>
无锁并发编程。多线程竞争锁时，会引起上下文切换，所以多线程处理数据时，可以用一些办法来避免使用锁，如将数据的ID按照Hash算法取模分段，不同的线程2处理不同段的数据</p>
<p>2、<strong>CAS</strong>
Java的Atomic包使用CAS算法来更新数据，而不需要加锁。使用最少线程</p>
<p>3、<strong>使用最少线程</strong>
避免创建不需要的线程，比如任务很少，但是创建了很多线程来处理，这样会造成大量线程都处于等待状态</p>
<p>4、<strong>协程</strong>
在单线程里实现多任务的调度，并在单线程里维持多个任务间的切换。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/guc">GUC</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/talk-about-redis-persistence">RDB和AOF持久化小结</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-05-17T00:00:00.000Z">2022年5月17日</time> · <!-- -->阅读需 7 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><strong>背景</strong>：简单总结了一些Redis的两种持久化方式 RDB和AOF</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="redis-rdb持久化流程">Redis RDB持久化流程<a href="#redis-rdb持久化流程" class="hash-link" aria-label="Redis RDB持久化流程的直接链接" title="Redis RDB持久化流程的直接链接">​</a></h2>
<p>RDB其实就是把数据以快照的形式保存在磁盘上，也是默认的持久化方式。这种方式是将内存中的数据以快照的方式写入到二进制文件中，默认文件名dump.rdb</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="rdb-的触发条件有手动触发和自动触发两种">RDB 的触发条件有手动触发和自动触发两种：<a href="#rdb-的触发条件有手动触发和自动触发两种" class="hash-link" aria-label="RDB 的触发条件有手动触发和自动触发两种：的直接链接" title="RDB 的触发条件有手动触发和自动触发两种：的直接链接">​</a></h5>
<p><strong>手动触发：</strong>
Save命令：
会同步阻塞redis服务器进程 直到rdb文件创建完毕为止 在服务器阻塞期间不能处理命令请求（基本已经弃用了）
Bgsave命令：
会在主线程fork一个子进程 由子进程去创建一份rdb文件 临时存储数据 父进程继续执行其他指令。</p>
<p><strong>自动触发：</strong>
1、Save m n：
在配置文件中设置 save m n 指定当m秒内发生n次变化时 会发生bgsave。
2、其他自动触发机制
在主从复制场景下 从节点执行全量操作 则主节点会执行bgsave
执行shutdown命令 会自动执行rdb持久化。</p>
<p><strong>优势：</strong></p>
<ul>
<li>
<p>RDB文件紧凑 全量备份 非常时候适合用于备份和灾难恢复</p>
</li>
<li>
<p>生产RDB文件的时候 redis主进程会fork()一个子进程处理所有工作，主进程不需要进行任何磁盘IO操作</p>
</li>
<li>
<p>RDB在恢复  大数据集时的速度比ADF的恢复速度快很多</p>
</li>
</ul>
<p><strong>劣势：</strong></p>
<ul>
<li>当进行快照持久化时，会开启一个子进程专门负责快照持久化 子进程会拥有父进程的内存数据 父进程修改内存 子进程无影响 所以在快照持久化期间修改的数据不会被保存 可能丢失数据。</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="redis-aof持久化流程">Redis AOF持久化流程<a href="#redis-aof持久化流程" class="hash-link" aria-label="Redis AOF持久化流程的直接链接" title="Redis AOF持久化流程的直接链接">​</a></h2>
<p>AOF的工作机制很简单，redis会将每个收到的写的命令通过write函数追加到文件中 也就是我们所说的日志记录</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="持久化原理">持久化原理：<a href="#持久化原理" class="hash-link" aria-label="持久化原理：的直接链接" title="持久化原理：的直接链接">​</a></h5>
<p>每当有一个写命令过来 就直接保存在我们的AOF文件中
文件重写原理：
AOF持久化的文件会越来越大 ，为了压缩AOF文件的持久化文件。Redis提供了bgrewriteaof命令 将内存中的数据以命令的方式保存在临时文件中，同时会frok出一条新进程来将文件重写。重写AOF文件的操作，并没有读取旧的AOF文件，而是将整个内存的数据库内容用命令的方式重写了个新的AOF文件，于快照类似。</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="三种触发机制">三种触发机制：<a href="#三种触发机制" class="hash-link" aria-label="三种触发机制：的直接链接" title="三种触发机制：的直接链接">​</a></h5>
<p>每修改同步always：同步持久化 每次发生数据变更会被立即记录到磁盘  性能较差 但数据完整性比较好。
每秒同步everysec：异步操作 每秒记录 如果一秒内宕dang机，有数据丢失。
no：操作系统控制的写  回 性能好 宕机时丢失数据较多</p>
<p><strong>优势：</strong></p>
<ul>
<li>
<p>AOF可以更好的保护数据不丢失 一般会每隔1秒 通过一个后台线程执行一次fsync操作 最多丢失1秒数据</p>
</li>
<li>
<p>AOF日志文件即使过大的时候 出现后台重写操作 也不会影响客户端的读写</p>
</li>
<li>
<p>三种写回策略体现了一个重要的原则 trade-off 取舍 ，指在性能和可靠性保证之间做出取舍 即用空间换时间 体现出了redis的高性能。</p>
</li>
</ul>
<p><strong>劣势：</strong></p>
<ul>
<li>
<p>对于同一份数据来说 AOF日志文件通常比RDB数据快照文件更大</p>
</li>
<li>
<p>AOF开启后 支持QPS会比EDB支持的写QPS低 因为AOF一般会配置fsync一次日志文件 每秒一次fsync 性能也很高</p>
</li>
<li>
<p>以前AOF发生过bug 就是AOF记录的日志 进行数据恢复的时候 没有恢复一模一样的数据处理。</p>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a href="#总结" class="hash-link" aria-label="总结的直接链接" title="总结的直接链接">​</a></h2>
<ol>
<li>Redis 默认开启RDB持久化方式，在指定的时间间隔内，执行指定次数的写操作，则将内存中的数据写入到磁盘中。</li>
<li>RDB 持久化适合大规模的数据恢复但它的数据一致性和完整性较差。</li>
<li>Redis 需要手动开启AOF持久化方式，默认是每秒将写操作日志追加到AOF文件中。</li>
<li>AOF 的数据完整性比RDB高，但记录内容多了，会影响数据恢复的效率。</li>
<li>Redis 针对 AOF文件大的问题，提供重写的瘦身机制。</li>
<li>若只打算用Redis 做缓存，可以关闭持久化。</li>
<li>若打算使用Redis 的持久化。建议RDB和AOF都开启。其实RDB更适合做数据的备份，留一后手。AOF出问题了，还有RDB。</li>
</ol></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/中间件">中间件</a></li><li class="tag_QGVx"><a title="关于Redis的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/redis">Redis</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/talk-about-transaction-isolation-levels">浅谈事务隔离级别</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-02-25T00:00:00.000Z">2022年2月25日</time> · <!-- -->阅读需 5 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em><strong>背景</strong>：今天在复习事务的隔离级别的时候总结了一些新的想法，之前只知道事务的隔离级别分为读未提交、读已提交、可重复读、序列化四个隔离级别，而在并发运行中，出现的隔离级别中的脏读、幻读和不可重复读的区别，以及他们的触发条件不是很清，经过了一番折腾，这里总结了一些想法。</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1那么究竟什么是脏读幻读和不可重复读呢">1、那么究竟什么是脏读、幻读和不可重复读呢？<a href="#1那么究竟什么是脏读幻读和不可重复读呢" class="hash-link" aria-label="1、那么究竟什么是脏读、幻读和不可重复读呢？的直接链接" title="1、那么究竟什么是脏读、幻读和不可重复读呢？的直接链接">​</a></h2>
<ul>
<li>脏读：一个事务读取了另一个事务未提交数据；</li>
<li>不可重复读：同一个事务中前后两次读取同一条记录不一样。因为被其他事务修改了并且提交了。</li>
<li>幻读：一个事务读取了另一个事务新增、删除的记录情况，记录数不一样，像是出现幻觉。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2什么是事务的隔离级别呢如何查看隔离级别dos-命令">2、什么是事务的隔离级别呢？如何查看隔离级别？(dos 命令)<a href="#2什么是事务的隔离级别呢如何查看隔离级别dos-命令" class="hash-link" aria-label="2、什么是事务的隔离级别呢？如何查看隔离级别？(dos 命令)的直接链接" title="2、什么是事务的隔离级别呢？如何查看隔离级别？(dos 命令)的直接链接">​</a></h2>
<p>事务隔离是数据库处理的基础之一。隔离是首字母缩略词 <a href="https://dev.mysql.com/doc/refman/8.0/en/glossary.html#glos_acid" target="_blank" rel="noopener noreferrer">ACID</a>中的 I ；隔离级别是在多个事务同时进行更改和执行查询时微调性能与结果的可靠性、一致性和可再现性之间的平衡的设置。</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mysql支持四个隔离级别：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">read-uncommitted：会出现脏读、不可重复读、幻读</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">read-committed：可以避免脏读，会出现不可重复读、幻读</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">repeatable-read：可以避免脏读、不可重复读、幻读。但是两个事务不能操作（写update,delete）同一个行。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">serializable：可以避免脏读、不可重复读、幻读。但是两个事务不能操作（写update,delete）同一个表。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">修改隔离级别：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">set transaction_isolation=&#x27;隔离级别&#x27;;  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#mysql8之前 transaction_isolation变量名是 tx_isolation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">查看隔离级别：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select @@transaction_isolation; 默认为：repeatable-read可重复读</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">*/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>数据库提供的 4 种事务隔离级别：</strong></p>
<table><thead><tr><th>隔离级别</th><th>描述</th></tr></thead><tbody><tr><td>read-uncommitted</td><td>允许A事务读取其他事务未提交和已提交的数据。会出现脏读、不可重复读、幻读问题</td></tr><tr><td>read-committed</td><td>只允许A事务读取其他事务已提交的数据。可以避免脏读，但仍然会出现不可重复读、幻读问题</td></tr><tr><td>repeatable-read</td><td>确保事务可以多次从一个字段中读取相同的值。在这个事务持续期间，禁止其他事务对这个字段进行更新。可以避免脏读和不可重复读。但是幻读问题仍然存在。注意：mysql中使用了MVCC多版本控制技术，在这个级别也可以避免幻读。</td></tr><tr><td>serializable</td><td>确保事务可以从一个表中读取相同的行，相同的记录。在这个事务持续期间，禁止其他事务对该表执行插入、更新、删除  操作。所有并发问题都可以避免，但性能十分低下。</td></tr></tbody></table>
<p><img decoding="async" loading="lazy" alt="image-20211202002655521" src="/assets/images/image-20211202002655521-c351dff0778fbbe99a4f25b7d3b69fe3.png" width="1336" height="539" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="image-20211202002704464" src="/assets/images/image-20211202002704464-52b519465267410aefeb172925524fa0.png" width="1336" height="476" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="image-20211202002714841" src="/assets/images/image-20211202002714841-a8688cdf8b5e913ec56e5cac6382da3e.png" width="1336" height="493" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="image-20211202002723256" src="/assets/images/image-20211202002723256-532094975a1a532ffddc3354ebda749d.png" width="1336" height="429" class="img_ev3q"></p>
<p><strong>总结</strong>：</p>
<ol>
<li>脏读：是在读未提交时发生的，事务A读取了事务B还未提交的数据，是一种错误。</li>
<li>幻读：发生在读未提交、读已提交和可重复读级别都会出现，它强调的是记录数不一样，即增删的情况。事务A读取了事务B已提交的数据，发生了幻读，它不是错误。</li>
<li>不可重复读：发生在读未提交和读已提交的隔离级别，它强调的是数据内容发生改变，即修改的情况。事务A读取了事务B已提交的数据，事务A前后两次读取同一条记录不一样，它也不是错误。</li>
</ol></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于数据仓库相关的话题" class="tag_zVej tagRegular_sFm0" href="/blog/tags/shujuku">数据库</a></li><li class="tag_QGVx"><a title="关于MySQL的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/mysql">MySQL</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/talk-https">浅谈https非对称加密</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-02-22T00:00:00.000Z">2022年2月22日</time> · <!-- -->阅读需 7 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><strong>背景</strong>：<em>在互联网上，许多敏感信息被传输，例如账号密码、信用卡信息等等，如果这些信息被黑客窃取，就会导致严重的安全问题。为了保障网络安全，人们开发了一种名为HTTPS的安全协议</em>。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="http协议的缺陷">HTTP协议的缺陷<a href="#http协议的缺陷" class="hash-link" aria-label="HTTP协议的缺陷的直接链接" title="HTTP协议的缺陷的直接链接">​</a></h2>
<p>HTTP（Hyper Text Transfer Protocol）是一种客户端和服务器之间通信的协议，它是Web应用程序的基础。HTTP协议的通信过程中，数据是明文传输的，这使得黑客可以通过中间人攻击来窃取数据，例如通过网络钓鱼或假冒WiFi热点等方式。此外，黑客还可以通过重放攻击或篡改攻击来破坏数据传输的完整性和机密性。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="https的优势">HTTPS的优势<a href="#https的优势" class="hash-link" aria-label="HTTPS的优势的直接链接" title="HTTPS的优势的直接链接">​</a></h2>
<p>为了保证数据的安全性和完整性，人们开发了HTTPS协议。HTTPS（Hyper Text Transfer Protocol Secure）是一种安全协议，它使用SSL / TLS协议来保护数据传输。与HTTP不同，HTTPS的数据传输是经过加密的，黑客无法窃取数据。此外，HTTPS协议还可以防止重放攻击和篡改攻击，从而保证了数据传输的完整性和安全性。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="https的实现技术">HTTPS的实现技术<a href="#https的实现技术" class="hash-link" aria-label="HTTPS的实现技术的直接链接" title="HTTPS的实现技术的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="非对称加密">非对称加密<a href="#非对称加密" class="hash-link" aria-label="非对称加密  的直接链接" title="非对称加密的直接链接">​</a></h3>
<p>HTTPS使用非对称加密算法来保护数据传输的机密性。非对称加密算法使用一对公钥和私钥来加密和解密数据。公钥可以公开发布，任何人都可以使用它来加密数据，但只有持有相应私钥的人才能解密数据。因此，即使黑客拦截了数据，也无法解密。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="数字证书">数字证书<a href="#数字证书" class="hash-link" aria-label="数字证书的直接链接" title="数字证书的直接链接">​</a></h3>
<p>数字证书用于验证通信双方的身份，并确保数据传输的安全性。数字证书中包含了以下信息：</p>
<ul>
<li>证书颁发机构（CA）的名称和地址</li>
<li>证书持有人的名称和地址</li>
<li>证书的有效期限</li>
<li>证书的公钥</li>
</ul>
<p>证书颁发机构（CA）是一家受信任的第三方机构，用于签发和验证数字证书。CA会对证书持有人的身份进行严格的验证，并为其签署数字证书。由于CA是受信任的第三方机构，因此数字证书可以被广泛地接受和使用。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="https的连接过程">HTTPS的连接过程<a href="#https的连接过程" class="hash-link" aria-label="HTTPS的连接过程的直接链接" title="HTTPS的连接过程的直接链接">​</a></h2>
<p>以下是HTTPS连接的步骤：</p>
<ol>
<li>客户端连接服务器。</li>
<li>客户端发送SSL / TLS协议版本和加密算法。</li>
<li>服务器发送SSL / TLS协议版本和加密算法。<!-- -->
<ol>
<li>客户端验证数字证书，验证服务器身份。</li>
<li>如果数字证书有效并可信，则客户端生成一个随机值并使用服务器的公钥加密它。</li>
<li>服务器使用其私钥解密客户端发送的随机值。</li>
<li>客户端和服务器都使用该随机值生成对称密钥。</li>
<li>客户端向服务器发送已使用对称密钥加密 的“完成”通知。</li>
<li>服务器使用对称密钥解密“完成”通知，然后使用对称密钥对数据进行加密和解密。</li>
</ol>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="https的连接过程-1">HTTPS的连接过程<a href="#https的连接过程-1" class="hash-link" aria-label="HTTPS的连接过程的直接链接" title="HTTPS的连接过程的直接链接">​</a></h2>
<p>客户端：</p>
<ol>
<li>连接服务器。</li>
<li>发送SSL / TLS协议版本和加密算法。</li>
<li>接收SSL / TLS协议版本和加密算法。</li>
<li>验证数字证书，验证服务器身份。</li>
<li>如果数字证书有效并可信，则生成一个随机值并使用服务器的公钥加密它。</li>
<li>使用生成的随机值生成对称密钥。</li>
<li>向服务器发送已使用对称密钥加密的“完成”通知。</li>
<li>对称加密和解密数据。</li>
</ol>
<p>服务器：</p>
<ol>
<li>接收客户端连接。</li>
<li>接收SSL / TLS协议版本和加密算法。</li>
<li>发送SSL / TLS协议版本和加密算法。</li>
<li>发送数字证书。</li>
<li>如果数字证书有效并可信，则使用私钥解密客户端发送的随机值。</li>
<li>使用生成的随机值生成对称密钥。</li>
<li>接收已使用对称密钥加密的“完成”通知。</li>
<li>对称加密和解密数据。</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a href="#总结" class="hash-link" aria-label="总结的直接链接" title="总结的直接链接">​</a></h2>
<p>HTTPS是一种安全协议，它使用SSL / TLS协议来保护数据传输。HTTPS使用非对称加密算法和数字证书来保证数据传输的机密性和安全性。HTTPS连接的步骤包括客户端连接服务器、发送SSL / TLS协议版本和加密算法、验证数字证书、生成随机值、生成对称密钥、发送“完成”通知和对称加密和解密数据。HTTPS可以保护数据的安全性和完整性，从而有效地防止黑客攻击  。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/https">https</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/talk-about-equals-method">浅谈equals方法</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-01-26T00:00:00.000Z">2022年1月26日</time> · <!-- -->阅读需 6 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p>​		<em>equals是Java中非常常见的方法，equals不只是字符串区别于==的一个比较的方法，继承Object的类都可以重写equals方法，因为类很多，有时候会记得很乱，所以这里总结一下和它相关的一些知识点。</em></p>
<p>话不多说，上源码，以下基于JDK1.8文档总结</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-object类中">1 、Object类中<a href="#1-object类中" class="hash-link" aria-label="1 、Object类中的直接链接" title="1 、Object类中的直接链接">​</a></h2>
<p>Indicates whether some other object is &quot;equal to&quot; this one. 指示其他对象是否“等于”此对象。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public boolean equals(Object obj) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      return (this == obj);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>重写equals方法</strong></p>
<p>子类重写equals方法时，要遵循如下规则：</p>
<ul>
<li>自反性：对于任何非空引用值 x，x.equals(x) 都应返回 true。</li>
<li>对称性：对于任何非空引用值 x 和 y，当且仅当 y.equals(x) 返回 true 时，x.equals(y) 才应返回 true。</li>
<li>传递性：对于任何非空引用值 x、y 和 z，如果 x.equals(y) 返回 true，并且 y.equals(z) 返回 true，那么 x.equals(z) 应返回 true。</li>
<li>一致性：对于任何非空引用值 x 和 y，多次调用 x.equals(y) 始终返回 true 或始终返回 false，前提是对象上 equals 比较中所用的信息没有被修改。</li>
<li>对于任何非空引用值 x，x.equals(null) 都应返回 false。</li>
</ul>
<p>​		当此方法被重写时，通常有必要重写 hashCode 方法，以维护 hashCode 方法的常规协定，该协定声明相等对象必须具有相等的哈希码。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2string类中">2、String类中<a href="#2string类中" class="hash-link" aria-label="2、String类中的直接链接" title="2、String类中的直接链接">​</a></h2>
<p>Compares this string to the specified object. 将此字符串与指定对象进行比较。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public boolean equals(Object anObject) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (this == anObject) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (anObject instanceof String) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String anotherString = (String)anObject;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int n = value.length;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (n == anotherString.value.length) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            char v1[] = value;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            char v2[] = anotherString.value;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            int i = 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            while (n-- != 0) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                if (v1[i] != v2[i])</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                i++;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return true;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3arrays类中">3、Arrays类中<a href="#3arrays类中" class="hash-link" aria-label="3、Arrays类中的直接链接" title="3、Arrays类中的直接链接">​</a></h2>
<p>Returns <tt>true</tt> if the two specified arrays of longs are <i>equal</i> to one another.
如果两个数组以相同的顺序包含相同的元素，那么它们就是相等的。另外，如果两个数组引用都为空，则认为两个数组引用相等。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public static boolean equals(long[] a, long[] a2) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (a==a2)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (a==null || a2==null)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int length = a.length;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (a2.length != length)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    for (int i=0; i&lt;length; i++)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (a[i] != a2[i])</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return true;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4collection类">4、Collection类<a href="#4collection类" class="hash-link" aria-label="4、Collection类的直接链接" title="4、Collection类的直接链接">​</a></h2>
<p>Compares the specified object with this collection for equality.  将指定的对象与此集合进行比较以获得相等性。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">boolean equals(Object o);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5set类hashsetlinkedhashsettreeset">5、Set类（HashSet、LinkedHashSet、TreeSet...）<a href="#5set类hashsetlinkedhashsettreeset" class="hash-link" aria-label="5、Set类（HashSet、LinkedHashSet、TreeSet...）的直接链接" title="5、Set类（HashSet、LinkedHashSet、TreeSet...）的直接链接">​</a></h2>
<p>Compares the specified object with this set for equality.   比较指定对象与此集合是否相等。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public boolean equals(Object o) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (o == this)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return true;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (!(o instanceof Set))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Collection&lt;?&gt; c = (Collection&lt;?&gt;) o;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (c.size() != size())</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return containsAll(c);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } catch (ClassCastException unused)   {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } catch (NullPointerException unused) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public int hashCode() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int h = 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Iterator&lt;E&gt; i = iterator();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        while (i.hasNext()) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            E obj = i.next();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (obj != null)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                h += obj.hashCode();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return h;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6list类arraylistlinkedlistvectorstack">6、List类（ArrayList、LinkedList、Vector、Stack...）<a href="#6list类arraylistlinkedlistvectorstack" class="hash-link" aria-label="6、List类（ArrayList、LinkedList、Vector、Stack...）的直接链接" title="6、List类（ArrayList、LinkedList、Vector、Stack...）的直接链接">​</a></h2>
<p>Compares the specified object with this list for equality.比较指定对象与此列表是否相等。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public boolean equals(Object o) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (o == this)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (!(o instanceof List))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ListIterator&lt;E&gt; e1 = listIterator();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ListIterator&lt;?&gt; e2 = ((List&lt;?&gt;) o).listIterator();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    while (e1.hasNext() &amp;&amp; e2.hasNext()) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        E o1 = e1.next();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Object o2 = e2.next();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (!(o1==null ? o2==null : o1.equals(o2)))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return !(e1.hasNext() || e2.hasNext());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//Returns the hash code value for this list.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public int hashCode() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int hashCode = 1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (E e : this)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            hashCode = 31*hashCode + (e==null ? 0 : e.hashCode());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return hashCode;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//Vector</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public synchronized boolean equals(Object o) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return super.equals(o);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public synchronized int hashCode() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return super.hashCode();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//Stack</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">class Stack&lt;E&gt; extends Vector&lt;E&gt;{}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7map类hashtablehashmaplinkedhashmaptreemap">7、Map类（Hashtable、HashMap、LinkedHashMap、TreeMap...）<a href="#7map类hashtablehashmaplinkedhashmaptreemap" class="hash-link" aria-label="7、Map类（Hashtable、HashMap、LinkedHashMap、TreeMap...）的直接链接" title="7、Map类（Hashtable、HashMap、LinkedHashMap、TreeMap...）的直接链接">​</a></h2>
<p>Compares the specified object with this map for equality. 比较指定对象与此映射是否相等。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public boolean equals(Object o) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (o == this)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return true;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (!(o instanceof Map))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Map&lt;?,?&gt; m = (Map&lt;?,?&gt;) o;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (m.size() != size())</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Iterator&lt;Entry&lt;K,V&gt;&gt; i = entrySet().iterator();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        while (i.hasNext()) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Entry&lt;K,V&gt; e = i.next();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            K key = e.getKey();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            V value = e.getValue();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if (value == null) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                if (!(m.get(key)==null &amp;&amp; m.containsKey(key)))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            } else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                if (!value.equals(m.get(key)))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    } catch (ClassCastException unused) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    } catch (NullPointerException unused) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return true;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public int hashCode() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int h = 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Iterator&lt;Entry&lt;K,V&gt;&gt; i = entrySet().iterator();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        while (i.hasNext())</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            h += i.next().hashCode();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return h;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="8number类以integer为例">8、Number类以Integer为例<a href="#8number类以integer为例" class="hash-link" aria-label="8、Number类以Integer为例的直接链接" title="8、Number类以Integer为例的直接链接">​</a></h2>
<p><img decoding="async" loading="lazy" alt="image-20221019090440643" src="data:image/png;base64,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" width="1416" height="58" class="img_ev3q"></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public boolean equals(Object obj) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return (this == obj);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// Integer</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public boolean equals(Object obj) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (obj instanceof Integer) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return value == ((Integer)obj).intValue();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * The value of the {@code Integer}.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @serial</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private final int value;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * Constructs a newly allocated {@code Integer} object that</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * represents the specified {@code int} value.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     * @param   value   the value to be represented by the</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     *                  {@code Integer} object.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public Integer(int value) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.value = value;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>9、File类中</p>
<p>Tests this abstract pathname for equality with the given object. 测试此抽象路径名是否与给定对象相等。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public boolean equals(Object obj) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if ((obj != null) &amp;&amp; (obj instanceof File)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return compareTo((File)obj) == 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    return false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// Compares two abstract pathnames lexicographically.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public int compareTo(File pathname) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return fs.compare(this, pathname);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">* The FileSystem object representing the platform&#x27;s local file system.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> private static final FileSystem fs = DefaultFileSystem.getFileSystem();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">* Compare two abstract pathnames lexicographically.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public abstract int compare(File f1, File f2);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/talk-about-lock">悲观锁乐观锁小结</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-01-17T00:00:00.000Z">2022年1月17日</time> · <!-- -->阅读需 2 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>一点点关于乐观和悲观锁的想法 简单记录一下..</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="悲观锁">悲观锁<a href="#悲观锁" class="hash-link" aria-label="悲观锁的直接链接" title="悲观锁的直接链接">​</a></h2>
<p>就是很悲观的看待问题。</p>
<p>主观认为每次去拿数据都认为会被别人修改，所以每次拿数据的时候都会上锁，这样别人想拿到这个数据就会block直到它拿到锁。如果发生并发冲突，会屏蔽一切可能违反数据完整性的操作 悲观锁之所以悲观。就在于此。所以对商品加上锁，就可以安心的做判断和更新。因为这个时候不会有别人更新这条商品库存。Java synchronized就是悲观锁的一种实现，每次线程要修改数据时都会先获得锁 保证同一时刻只有一个线程 能操作数据 其他线程会被block（阻塞）</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="乐观锁">乐观锁<a href="#乐观锁" class="hash-link" aria-label="乐观锁的直接链接" title="乐观锁的直接链接">​</a></h2>
<p>就是非常乐观的看待问题 无需加锁。</p>
<p>但是会在表中增加版本字段，更新时where语句中增加版本的判断 算是CAS （compare and swap）比较并替换的操作 在商品库存场景中number起到了版本控制 相当于 version 的作用 总的来说就是 假设不会发生冲突 只在提交操作时检查是否违反了数据的完整性 乐观锁适用于读多写少的应用场合。这样可以提高吞吐量</p>
<p>也有的会加时间戳。</p>
<p>实现分布式锁 ： Redis 和 Zookeeper</p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/talk-about-fuben-information-group-interview">法本信息组面试题</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-03-04T00:00:00.000Z">2021年3月4日</time> · <!-- -->阅读需 3 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>在徒弟那淘来的法本信息项目组前端面经</em></p>
<p><strong>法本信息项目组1一面：</strong></p>
<ol>
<li>自我介绍</li>
<li>挑了一个项目问了干什么的，负责什么</li>
<li>技术问题</li>
</ol>
<ul>
<li>怎么理解盒模型</li>
<li>display有哪些属性</li>
<li>rem和em的区别</li>
<li>说一下js的数据类型</li>
<li>数组中比较常用的方法说几个</li>
<li>slice和splice有什么区别</li>
<li>原型和原型链说一下</li>
<li>原型链继承有了解过吗</li>
<li>有了解过事件队列和事件循环吗（这里就是问事件轮询）</li>
<li>那么事件轮询的任务队列有哪些</li>
<li>怎么执行的</li>
<li>那哪些是宏任务，哪些是微任务</li>
<li>闭包是怎么理解的</li>
<li>解释一下什么柯里化函数</li>
<li>你们现在react使用hook做还是class做</li>
<li>有哪些常用的hook</li>
<li>怎么理解useEffect的</li>
<li>useCallback和useMemo的区别</li>
<li>你们平时有用过ts吗</li>
<li>先说一下ts是什么</li>
<li>ts的联合类型怎么写</li>
<li>什么是ts函数的重载</li>
<li>ts接口说一下</li>
<li>怎么理解ts里面的泛型</li>
<li>你们平常有做过移动端的东西吗</li>
<li>有没有考虑性能的问题，出了一个场景题：比如移动端中上拉加载，已经有几万个数据了，那么现在如何保证现在的页面不卡顿呢？</li>
<li>那么可视区渲染，可视区怎么算的，需要多少条数据撑开这个可视区</li>
<li>webpack用过吗？有自己用webpack开发过脚手架嘛</li>
<li>你这边还有什么问题吗
4.笔试题</li>
<li>给一个链接，写题（后台管理系统）</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="法本信息项目组2一面">法本信息项目组2一面：<a href="#法本信息项目组2一面" class="hash-link" aria-label="法本信息项目组2一面：的直接链接" title="法本信息项目组2一面：的直接链接">​</a></h4>
<p>1.笔试题（手淘的登录注册界面，包括表单验证）</p>
<p>2.电话面试：直接拿写的笔试题来问，问某个模块为什么这么写，问为什么安装某某包，问原生js和antd，基本都是基于自己写的笔试题问，然后问了一下数组去重的方法，问如果不用new Set()怎么实现，如果用filter的话怎么实现，先说原理再说代码怎么写，最后问了一下filter的参数有哪些</p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/talk-about-interview-questions">前端面试题</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-02-22T00:00:00.000Z">2021年2月22日</time> · <!-- -->阅读需 3 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>记录了很多常见面试问题（无答案）</em></p>
<ol>
<li>基本数据类型</li>
<li>检测数据类型的方法</li>
<li>Typeof null返回什么</li>
<li>不使用三方变量交换 a = 30 b =40的值</li>
<li>哪些类型转换成布尔值是false</li>
<li>保留2位小数点</li>
<li>判断一个数字是否是整数</li>
<li>取200-300之间的随机数</li>
<li>截取字符串有哪些方法</li>
<li>预解析?</li>
<li>全局变量和局部变量的区别</li>
<li>什么是作用域链</li>
<li>什么是闭包 应用在哪里?</li>
<li>节流 防抖</li>
<li>箭头函数和普通函数的区别?为什么箭头函数不能用于构造函数?</li>
<li>函数的this指向 定时器 事件</li>
<li>改变this指向的方法 区别?</li>
<li>自调用函数?</li>
<li>清空一个数组的方法有哪些?</li>
<li>数组的方法</li>
<li>数组去重的方法</li>
<li>统计某个元素出现的次数</li>
<li>数组排序</li>
<li>多维数组 多维数组扁平化</li>
<li>for循环和forEach的区别</li>
<li>for in和for of的区别</li>
<li>遍历对象的方法 遍历所有的key value?</li>
<li>创建一个对象的方式有哪些?</li>
<li>new一个对象发生了什么?</li>
<li>原型链,原型的作用什么?</li>
<li>继承的方式有哪些?</li>
<li>Object.create的作用</li>
<li>深拷贝和浅拷贝,如何实现深拷贝 lodash,JSON方法的缺点?</li>
<li>获取dom的方式有哪些?</li>
<li>创建 修改 替换 增加 dom</li>
<li>获取浏览器的版本信息</li>
<li>js操作页面跳转</li>
<li>历史记录有哪些方法?</li>
<li>本地存储 区别</li>
<li>ES6新特性</li>
<li>let const var</li>
<li>Set Map</li>
<li>处理异步的方法</li>
<li>promise的方法 allsetled</li>
<li>事件循环</li>
<li>即时通讯用什么方式webcoket 和http请求的区别</li>
<li>三次握手 4次握手</li>
<li>gc机制和IIFE</li>
<li>面向对象的特性 继承 封装多态</li>
<li>触发回流的条件 触发重绘的条件?</li>
<li>get post请求的区别</li>
</ol></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-mysql8-0-linux">傻瓜式安装mysql8.0-Linux</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2020-02-23T00:00:00.000Z">2020年2月23日</time> · <!-- -->阅读需 2 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>安装mysql8.0以CentOS为例，傻瓜式安装？haha<del>平时傻瓜式安装习惯了，今天来尝试一些指定版本的手动安装，真香啊</del></em></p>
<p>一、 查看并卸载mariadb</p>
<p>centos7中会自带的mariadb  与 mysql冲突  所以我们要把它卸载</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> rpm -qa | grep mariadb</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> rpm -e --nodeps mariadb-libs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20221209213550740" src="data:image/png;base64,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" width="440" height="69" class="img_ev3q"></p>
<p>二、下载mysql安装包</p>
<p>下载安装包 <a href="https://downloads.mysql.com/archives/community/" target="_blank" rel="noopener noreferrer">https://downloads.mysql.com/archives/community/</a></p>
<p>三、上传到opt中的mysql 目录,然后解压</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> tar -xvf mysql-8.0.30-1.el7.x86_64.rpm-bundle.tar</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20221209213752847" src="/assets/images/image-20221209213752847-d1092373f613571e57d8e080a0489c33.png" width="672" height="205" class="img_ev3q"></p>
<p>四、安装依赖关系顺序安装执行 （有先后顺序、倒序卸载）</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> rpm -ivh mysql-community-common-8.0.30-1.el7.x86_64.rpm</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> rpm -ivh mysql-community-client-plugins-8.0.30-1.el7.x86_64.rpm</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> rpm -ivh mysql-community-libs-8.0.30-1.el7.x86_64.rpm </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> rpm -ivh mysql-community-client-8.0.30-1.el7.x86_64.rpm</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> rpm -ivh mysql-community-icu-data-files-8.0.30-1.el7.x86_64.rpm</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> rpm -ivh mysql-community-server-8.0.30-1.el7.x86_64.rpm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20221209214139803" src="/assets/images/image-20221209214139803-9998dd720a238f0e51cce9d08ef36a09.png" width="676" height="574" class="img_ev3q"></p>
<p>五、对mysql进行初始化</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> mysqld --initialize --console</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>六、修改mysql安装目录的所有用户和所属组</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> chown -R mysql:mysql /var/lib/mysql/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>七、开启mysql 服务</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> systemctl start mysqld</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>八、查看mysql的临时密码</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> cat /var/log/mysqld.log | grep localhost</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>九、登录mysql</p>
<p><img decoding="async" loading="lazy" alt="image-20221209214718110" src="/assets/images/image-20221209214718110-0c9b00cafcee148349bf6df33823916c.png" width="701" height="285" class="img_ev3q"></p>
<p>到这基本就ok了，但是我们总不能用这个临时密码登录吧，所以要修改我们mysql密码</p>
<p>十、修改密码</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">alter user &#x27;root&#x27;@&#x27;localhost&#x27; identified by &#x27;123456&#x27;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>十一、修改root用户的登录IP限制</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> use mysql;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> update user set host =&#x27;%&#x27; where user=&#x27;root&#x27;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20221209215546129" src="/assets/images/image-20221209215546129-a9339fd4d8e9782aa705a16e7181553a.png" width="620" height="364" class="img_ev3q"></p>
<p>十二、重启mysql服务</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">systemctl restart mysqld</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>🆗；现在我们用本地可视化工具Navicat尝试连接</p>
<p><img decoding="async" loading="lazy" alt="image-20221209215749697" src="/assets/images/image-20221209215749697-69d5774df61337d2922ccf0f61b3c8be.png" width="795" height="694" class="img_ev3q"></p>
<p>十三、如果你想卸载，请逆序依次执行，要注意一定把/var/lib/mysql目录删掉。</p>
<p><img decoding="async" loading="lazy" alt="image-20221209140020730" src="/assets/images/image-20221209140020730-a27146126d4289e15fee451abe8a38f0.png" width="423" height="124" class="img_ev3q"></p>
<p>over~</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于Linux的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/linux">Linux</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-Linux">Linux常用命令</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2020-01-02T00:00:00.000Z">2020年1月2日</time> · <!-- -->阅读需 8 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>在这里总结了一些常用的Linux命令~</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="一基础命令">一、基础命令：<a href="#一基础命令" class="hash-link" aria-label="一、基础命令：的直接链接" title="一、基础命令：的直接链接">​</a></h2>
<p>1、	cd命令：切换目录</p>
<p><img decoding="async" loading="lazy" alt="img" src="/assets/images/clip_image001-6b27a82bdafc4dc119e17fc88b5d4cfc.png" width="587" height="135" class="img_ev3q"></p>
<p>2、	ls命令：列出目录内容</p>
<p><img decoding="async" loading="lazy" alt="img" src="/assets/images/clip_image002-3025ce16b61285f28c7ffc4461b72f87.jpg" width="576" height="219" class="img_ev3q"></p>
<p>3、	pwd命令：查询所在的目录</p>
<p><img decoding="async" loading="lazy" alt="image-20221207211508849" src="data:image/png;base64,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" width="416" height="106" class="img_ev3q"></p>
<p>4、cat命令：查看小文件内容</p>
<p><img decoding="async" loading="lazy" alt="image-20221207211649448" src="/assets/images/image-20221207211649448-477aca8a88f551b28e3d1fcd22def614.png" width="748" height="255" class="img_ev3q"></p>
<p>5、more命令：查看大文件内容</p>
<p><img decoding="async" loading="lazy" alt="image-20221207212018383" src="/assets/images/image-20221207212018383-baf9357f9da8d70751fbfbf3ceb62527.png" width="612" height="653" class="img_ev3q"></p>
<p>6、head命令：查看前n行</p>
<p><img decoding="async" loading="lazy" alt="image-20221207212139775" src="/assets/images/image-20221207212139775-0fef68336aaf6b64dde74ac9591d69e3.png" width="683" height="175" class="img_ev3q"></p>
<p>7、tail命令：查看文件后面n行</p>
<p><img decoding="async" loading="lazy" alt="image-20221207212447511" src="/assets/images/image-20221207212447511-10e94bb5a5eaf2ba2a02f89d82422c90.png" width="768" height="164" class="img_ev3q"></p>
<p>8、touch命令：创建一个空文件</p>
<p><img decoding="async" loading="lazy" alt="image-20221207212656485" src="/assets/images/image-20221207212656485-73fd5a5e93940b6f7571134e4f1121fc.png" width="613" height="199" class="img_ev3q"></p>
<p>9、mkdir命令：创建目录</p>
<p><img decoding="async" loading="lazy" alt="image-20221207213048534" src="data:image/png;base64,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" width="575" height="55" class="img_ev3q"></p>
<p>10：rm命令：删除文件或目录</p>
<p><img decoding="async" loading="lazy" alt="image-20221207213128621" src="data:image/png;base64,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" width="549" height="77" class="img_ev3q"></p>
<p>11、cp命令：拷贝文件</p>
<p><img decoding="async" loading="lazy" alt="image-20221207213347413" src="/assets/images/image-20221207213347413-23a4f86eae49729895d320a42fd38fcd.png" width="629" height="128" class="img_ev3q"></p>
<p>12、mv命令：移动或更名现有的文件或目录</p>
<p><img decoding="async" loading="lazy" alt="image-20221207213519218" src="/assets/images/image-20221207213519218-5aa7898b55e60a4f6390b4c75906dacc.png" width="591" height="308" class="img_ev3q"></p>
<p>13、echo命令：标准输出命令</p>
<p><img decoding="async" loading="lazy" alt="image-20221207213826413" src="data:image/png;base64,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" width="678" height="59" class="img_ev3q"></p>
<p>14、man命令和help命令：查看帮助文档和查看内部命令帮助</p>
<p><img decoding="async" loading="lazy" alt="image-20221207214926181" src="/assets/images/image-20221207214926181-db08528f1a4bb24a9f8768068b960e47.png" width="729" height="231" class="img_ev3q"></p>
<p>15、clear命令：清屏</p>
<p>16、grep命令：查找文件里符合条件的字符串。-i 忽略大小写</p>
<p><img decoding="async" loading="lazy" alt="image-20221207215302936" src="data:image/png;base64,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" width="625" height="42" class="img_ev3q"></p>
<p>17、find命令：查询文件  顺序查找 效率低</p>
<p><img decoding="async" loading="lazy" alt="image-20221207215517304" src="data:image/png;base64,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" width="543" height="35" class="img_ev3q"></p>
<p>18、locate命令：根据索引查找  配合updatedb使用</p>
<p><img decoding="async" loading="lazy" alt="image-20221207215617990" src="data:image/png;base64,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" width="519" height="111" class="img_ev3q"></p>
<p>19、cal：查看日历</p>
<p><img decoding="async" loading="lazy" alt="image-20221207215745650" src="data:image/png;base64,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" width="393" height="167" class="img_ev3q"></p>
<p>20、tar命令：压缩文件、解压缩文件</p>
<p><img decoding="async" loading="lazy" alt="image-20221207220536963" src="/assets/images/image-20221207220536963-43ea7d5841aa39fe0be767ff91e59e65.png" width="649" height="221" class="img_ev3q"></p>
<p>21、poweroff：关机命令</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="二网络配置命令">二、网络配置命令<a href="#二网络配置命令" class="hash-link" aria-label="二、网络配置命令的直接链接" title="二、网络配置命令的直接链接">​</a></h2>
<p>对比 windows图形化这样的↓</p>
<p><img decoding="async" loading="lazy" alt="image-20221209170451421" src="/assets/images/image-20221209170451421-e11656ce317f033c6e80a41334d47d9f.png" width="419" height="566" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="image-20221209170508186" src="/assets/images/image-20221209170508186-62d4b39f58bab70f26c7e5a0ee4abf45.png" width="463" height="549" class="img_ev3q"></p>
<p>1、ifconfig/ ip addr命令： 查看网络配置信息</p>
<p><img decoding="async" loading="lazy" alt="image-20221209170846498" src="/assets/images/image-20221209170846498-dbb2f5a8dbb2b5dd198be55c14225fd3.png" width="685" height="544" class="img_ev3q"></p>
<p>2、 为什么修改ip为固定ip呢？</p>
<p>如使用Linux作为服务器使用，应采用固定IP地址，而不是自动分配IP，避免变化。</p>
<p>3、怎么修改呢？</p>
<p>vim /etc/sysconfig/network-scripts/ifcfg-ens33</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#静态分配IP，而不再使用DHCP动态分配</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">BOOTPROTO=&quot;static&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#IP和子网掩码</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">IPADDR=192.168.74.128</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NETMASK=255.255.255.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#网关和DNS服务器</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GATEWAY=192.168.74.2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">DNS1=8.8.8.8</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#IP地址的前24为代表网络地址，后面是主机地址</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PREFIX=24</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">解释：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">DEVICE=eth0    #接口名（设备,网卡）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">BOOTPROTO=none  # IP的配置方法[none|static|bootp|dhcp]（引导时不使用协议|静态分配IP|BOOTP协议|DHCP	协议）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">BROADCAST=192.168.1.255   #广播地址</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">HWADDR=00:0C:2x:6x:0x:xx   #MAC地址</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">IPADDR=192.168.1.23        #IP地址</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NETMASK=255.255.255.0     # 网络掩码</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NETWORK=192.168.1.0       #网络地址</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ONBOOT=yes              #系统启动的时候网络接口是否有效（yes/no）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">TYPE=Ethernet              #网络类型（通常是Ethemet）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="三进程命令">三、进程命令<a href="#三进程命令" class="hash-link" aria-label="三、进程命令的直接链接" title="三、进程命令的直接链接">​</a></h2>
<p>对比 win👇</p>
<p><img decoding="async" loading="lazy" alt="image-20221209171644329" src="/assets/images/image-20221209171644329-b22557b1c710270f3f0bc1da92fc9797.png" width="664" height="511" class="img_ev3q"></p>
<p>1、ps命令：   proess</p>
<p><img decoding="async" loading="lazy" alt="image-20221209172412180" src="/assets/images/image-20221209172412180-8b385e7a2c7d30024c0798a7ff9853ab.png" width="764" height="213" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="image-20221209172352111" src="data:image/png;base64,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" width="399" height="112" class="img_ev3q"></p>
<p>-aux参数： ps –aux|grep xxx  结合管道符使用</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">System V展示风格：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">USER：用户名称</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PID：进程号</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">%CPU：进程占用CPU的百分比</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">%MEM：进程占用物理内存的百分比</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VSZ：进程占用的虚拟内存大小（单位：KB）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RSS：进程占用的物理内存大小（单位：KB）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">TT：终端名称,缩写</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">STAT：进程状态，其中S-睡眠，s-该进程是会话的先导进程，N-进程拥有比普通优先级更低的优先级，R-正在运行，D-短期等待，Z-僵死进程，T-被跟踪或者被停止等等</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">STARTED：进程的启动时间</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">TIME：CPU时间，即进程使用CPU的总时间</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">COMMAND：启动进程所用的命令和参数，如果过长会被截断显示</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20221209173408216" src="/assets/images/image-20221209173408216-f74e849fdbb805fbdc68308824a89bba.png" width="659" height="207" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="image-20221209173026044" src="/assets/images/image-20221209173026044-033d39a7eda2aef33416307e5824bdc9.png" width="663" height="71" class="img_ev3q"></p>
<p>-a : 显示当前总段的所有进行信息   -u : 以用户的格式显示进程信息     -x : 显示后台进程运行的参数</p>
<p>-ef参数：以全格式显示当前所有的进程  -e 显示所有进程。-f 全格式。 ps -ef|grep xxx</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">BSD风格：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">UID：用户ID </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PID：进程ID </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PPID：父进程ID </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">C：CPU用于计算执行优先级的因子。数值越大，表明进程是CPU密集型运算，执行优先级会降低；数值越小，表明进程是I/O密集型运算，执行优先级会提高</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">STIME：进程启动的时间</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">TTY：完整的终端名称</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">TIME：CPU时间</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CMD：启动进程所用的命令和参数</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20221209173335705" src="/assets/images/image-20221209173335705-1534b7091abcad0bc8ed38f66cb39aba.png" width="649" height="153" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" alt="image-20221209173302440" src="data:image/png;base64,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" width="593" height="71" class="img_ev3q"></p>
<p>2、kill命令：</p>
<p>kill pid杀死指定pid对应的进程.</p>
<p>kill pid 告诉进程，你需要被关闭，请自行停止运行并退出</p>
<p>kill -9 pid：强行杀死进程 告诉进程，你被终结了，请立刻退出</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="四服务类命令centos">四、服务类命令（centos）<a href="#四服务类命令centos" class="hash-link" aria-label="四、服务类命令（centos）的直接链接" title="四、服务类命令（centos）的直接链接">​</a></h2>
<p>对比---win👇</p>
<p><img decoding="async" loading="lazy" alt="image-20221209173715127" src="/assets/images/image-20221209173715127-6cbe11dd0fc11c82a0f9d1f46238680f.png" width="598" height="580" class="img_ev3q"></p>
<p>1、service</p>
<ul>
<li>管理方式：</li>
</ul>
<p>service 服务名 start</p>
<p>​    service 服务名 stop</p>
<p>​    service 服务名 restart</p>
<p>​    service 服务名 reload</p>
<p>​    service 服务名 status</p>
<ul>
<li>查看方法：/etc/init.d/服务名</li>
<li>通过 chkconfig 命令设置自启动</li>
</ul>
<p>​	查看服务chkconfig  --list|grep xxx</p>
<p>​    chkconfig  --level 5  服务名  on</p>
<ul>
<li>运行级别：</li>
</ul>
<p><img decoding="async" loading="lazy" alt="image-20221209174235215" src="/assets/images/image-20221209174235215-d75b57456ff9a86f34b59fd051931f74.png" width="865" height="56" class="img_ev3q"></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">查看默认级别： vi /etc/inittab</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Linux系统有7种运行级别(runlevel)：常用的是级别3和5</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">运行级别0：系统停机状态，系统默认运行级别不能设为0，否则不能正常启动</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">运行级别1：单用户工作状态，root权限，用于系统维护，禁止远程登陆</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">运行级别2：多用户状态(没有NFS)，不支持网络</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">运行级别3：完全的多用户状态(有NFS)，登陆后进入控制台命令行模式</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">运行级别4：系统未使用，保留</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">运行级别5：X11控制台，登陆后进入图形GUI模式</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">运行级别6：系统正常关闭并重启，默认运行级别不能设为6，否则不能正常启动</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2、systemctl：</p>
<ul>
<li>有方便统一的管理方式（常用的方法）</li>
</ul>
<p>​       systemctl start 服务名(xxxx.service)</p>
<p>​       systemctl restart 服务名(xxxx.service)</p>
<p>​       systemctl stop 服务名(xxxx.service)</p>
<p>​       systemctl reload 服务名(xxxx.service)</p>
<p>​       systemctl status 服务名(xxxx.service)</p>
<ul>
<li>
<p>l查看服务的方法 /usr/lib/systemd/system</p>
</li>
<li>
<p>查看服务的命令</p>
</li>
</ul>
<p>​       systemctl list-unit-files</p>
<p>​       systemctl --type service</p>
<ul>
<li>通过systemctl命令设置自启动</li>
</ul>
<p>​       自启动systemctl enable service_name</p>
<p>​       不自启动systemctl disable service_name</p>
<ul>
<li>运行级别</li>
</ul>
<p><img decoding="async" loading="lazy" alt="img" src="data:image/jpeg;base64,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eF4YiDAFXdtlySXOMfLk4x3wOKo2dxBpv2g3N0LhrsmJ/IbOFPWT688D61T/ALE1b/oG3H/fI/xo/sTVv+gbcf8AfI/xpJU0rcw26m/KTrI39mzvNcQMPs/kwgMPMYbwRkdegPXtVwyGOFbeOe3YQxwhS1wq7ZFO4nnt8xFZn9iat/0Dbj/vkf40f2Hq3/QNuP8Avkf403yP7SEudfZZs5jOr6e8c9qsMbl2VZwcO5Jb8BwM+1V5Zp9lgbaW1nmEsvywgIjLgZBBA6jNZ39h6t/0Dbj/AL5H+NH9h6t/0DLj/vkf40kofzL+v+HHef8AKzVVY41EDJA7papG0Pm4G4y7sZz2Az1q9JeRgqWvFjg3l4ys2N7h2+U4/hIIyfpXOf2Hqv8A0DLj/vkf40f2Hq3/AEDbj/vkf40nGm95DUpraJft76SzErahJBKBIzeTuLsznnHBwFz3NNlumg0mYb7WGSQqI1tJTnH8WQDwMcVS/sPVv+gbcf8AfI/xo/sTVv8AoG3H/fI/xqv3d78yJ/eWtZlE9DXp+k/8gay/694//QRXnx0TVsH/AIltx/3yP8a9D0yN4tLtI5FKukCKynqCFGRXPjJRklZm+EjJN3RaooorzzvCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD//Z" width="554" height="34" class="img_ev3q"></p>
<ul>
<li>查看默认级别： vim /etc/inittab</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Centos7运行级别简化为：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">multi-user.target等价于原运行级别3（多用户有网，无图形界面）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">graphical.target等价于原运行级别5（多用户有网，有图形界面）</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>3、netstat</p>
<p>查看系统的网络情况</p>
<p>-an 按一定顺序排列输出</p>
<p>-p 显示哪个进程在调用</p>
<p>netstat –anp|grep 8080 查看占用8080端口的进程</p>
<p>如果出现端口冲突，可以先使用该命令找到占用端口的进程，再使用kill杀死进程</p>
<p><img decoding="async" loading="lazy" alt="image-20221209174534275" src="/assets/images/image-20221209174534275-c0073d7ad75f8c7639dc52691289b776.png" width="864" height="308" class="img_ev3q"></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于Linux的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/linux">Linux</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-java-jdk8-new-features">JDK8新特性</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2019-12-10T00:00:00.000Z">2019年12月10日</time> · <!-- -->阅读需 2 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>主要介绍了JDK8的一些新特性，也算不上新特性，出来好多年了....</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="jdk8新特性">JDK8新特性<a href="#jdk8新特性" class="hash-link" aria-label="JDK8新特性的直接链接" title="JDK8新特性的直接链接">​</a></h2>
<p>1、interface中可以有static⽅法，但必须有⽅法实现体，该⽅方法只属于该接⼝，接口名直接调⽤用该方法
2、接⼝中新增default关键字修饰的方法，default方法只能定义在接⼝中，可以在子类或子接⼝中被重写。default定义的⽅方法必须有⽅方法体
3、父接口的default方法如果在子接口或子类被重写，那么⼦接口实现对象、子类对象，调⽤用该方法，以重写为准
4、本类、接⼝如果没有重写父类（即接⼝）的default方法，则在调⽤default⽅法时，使⽤用⽗类定义的default⽅方法逻辑</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public interface IPay{  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // static修饰符定义静态⽅法  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    static void staticMethod() {  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;接⼝中的静态⽅法&quot;);  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // default修饰符定义默认方法 ,默认方法不是抽象方法，可以不重写也可以重写 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    default void defaultMethod() {  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;接⼝中的默认⽅法&quot;);  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">// static⽅法必须通过接⼝类调⽤用  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> IPay.staticMethod();  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> //default⽅法必须通过实现类的对象调⽤用  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> new IPay().defaultMethod();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-java-exception-finally-must-execute">异常处理中finally必执行</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2019-11-25T00:00:00.000Z">2019年11月25日</time> · <!-- -->阅读需 1 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>课程代码演示 面试题，返回结果最终是finally为准</em>（尽量不要在finally里面使用return，会忽略try catch里面的return，容易造成未知的bug）</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">try{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   // 可能发生异常的代码</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}catch(ExceptionName1 e1){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   //出异常的时候处理</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}catch(ExceptionName2 e2){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   //出异常的时候处理</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">try{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   // 可能发生异常的代码</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}catch(ExceptionName1 e1){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   //出异常的时候处理</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}finally{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    //肯定执行的代码</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">try{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   // 可能发生异常的代码</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}finally{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    //肯定执行的代码</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static int divide(int num1, int num2){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            int result = num1/num2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return result;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }catch (Exception e){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(&quot;出异常&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }finally {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(&quot;finally执⾏了&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">             return -2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                 //   return -1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>不管是否存在异常输出都是-2</p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-java-flow-control-statement">Java流程控制语句</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2019-08-12T00:00:00.000Z">2019年8月12日</time> · <!-- -->阅读需 38 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>程序设计需要有流程控制语句来完成用户的要求，根据用户的输入决定程序要进入什么流程，即“做什么”以及“怎么做”等。</em>从结构化程序设计角度出发，程序有 3 种结构：顺序结构、选择结构和循环结构。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="一表达式和语句">一、表达式和语句<a href="#一表达式和语句" class="hash-link" aria-label="一、表达式和语句的直接链接" title="一、表达式和语句的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1表达式">1、表达式：<a href="#1表达式" class="hash-link" aria-label="1、表达式：的直接链接" title="1、表达式：的直接链接">​</a></h3>
<p>1、变量或常量 + 运算符 构成的计算表达式
2、new 表达式，结果是一个数组或类的对象。
3、方法调用表达式，结果是方法返回值或void（无返回值）。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2语句">2、语句：<a href="#2语句" class="hash-link" aria-label="2、语句：的直接链接" title="2、语句：的直接链接">​</a></h3>
<p>程序的功能是由语句来完成的，语句分为单语句和复合语句。</p>
<p>单语句：
1、空语句，什么功能都没有。它就是单独的一个分号；(需避免)
2、表达式语句，就是表达式后面加分号;</p>
<p><strong>不是所有表达式加分号都能称为一个独立的语句的，只有以下三种表达式加上分号才能构成一个独立的语句：</strong></p>
<ul>
<li>
<p>计算表达式中的赋值表达式、自增自减表达式</p>
</li>
<li>
<p>new表达式</p>
</li>
<li>
<p>方法调用表达式</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">//空语句</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//表达式语句</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">i++; //自增表达式 + ;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">System.out.println(&quot;hello&quot;);  //方法调用表达式 + ;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>复合语句分为：</p>
<p>（1）分支语句：if...else，switch...case</p>
<p>（2）循环语句：for,while,do...while</p>
<p>（3）跳转语句：break,continue,return,throw</p>
<p>（4）try语句：try...catch...finally</p>
<p>（5）同步语句：synchronized</p>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="二顺序结构">二、顺序结构<a href="#二顺序结构" class="hash-link" aria-label="二、顺序结构的直接链接" title="二、顺序结构的直接链接">​</a></h2>
<p>顺序结构就是程序从上到下逐行地执行。表达式语句都是顺序执行的。并 且上一行对某个变量的修改对下一行会产生影响。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void test1() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int x = 1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int y = 2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;x = &quot; + x);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;y = &quot; + y);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //对x、y的值进行修改</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        x++;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        y = 2 * x + y;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        x = x * 10;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;x = &quot; + x);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;y = &quot; + y);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20220922140246151" src="/assets/images/image-20220922140246151-2edc5b97529b503f73cf53d93388987a.png" width="638" height="201" class="img_ev3q"></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="三输入输出语句">三、输入输出语句<a href="#三输入输出语句" class="hash-link" aria-label="三、输入输出语句的直接链接" title="三、输入输出语句的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31输出语句">3.1、输出语句<a href="#31输出语句" class="hash-link" aria-label="3.1、输出语句的直接链接" title="3.1、输出语句的直接链接">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1两种常见的输出语句">1、两种常见的输出语句<a href="#1两种常见的输出语句" class="hash-link" aria-label="1、两种常见的输出语句的直接链接" title="1、两种常见的输出语句的直接链接">​</a></h4>
<p><strong>换行输出语句</strong>：输出内容后进行换行，格式如下：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">System.out.println(输出内容);//输出内容之后，紧接着换行</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>不换行输出语句</strong>：输出内容后不换行，格式如下</p>
<p>System.out.print(输出内容);////输出内容之后不换行</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public void test2() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String name = &quot;季冠臣&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int age = 18;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //对比如下两组代码：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(name);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(age);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(name);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(age);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(); //()里面为空，效果等同于换行，输出一个换行符</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //等价于 System.out.print(&quot;\n&quot;); 或  System.out.print(&#x27;\n&#x27;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //System.out.print();//错误，()里面不能为空   核心类库PrintStream类中没有提供print()这样的方法</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //对比如下两组代码：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(&quot;姓名：&quot; + name +&quot;,&quot;);//&quot;&quot;中的内容会原样显示</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;年龄：&quot; + age);//&quot;&quot;中的内容会原样显示</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(&quot;name = &quot; + name + &quot;,&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;age = &quot; + age);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制  代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20220922164329556" src="/assets/images/image-20220922164329556-5d41246d03aa3f0a5ef7fd8423a03a58.png" width="708" height="226" class="img_ev3q"></p>
<blockquote>
<p>注意事项：</p>
<p>​	换行输出语句，括号内可以什么都不写，只做换行处理</p>
<p>​	不换行输出语句，括号内什么都不写的话，编译报错</p>
<p>​	如果()中有多项内容，那么必须使用 + 连接起来</p>
<p>​	如果某些内容想要原样输出，就用&quot;&quot;引起来，而要输出变量中的内容，则不要把变量名用&quot;&quot;引起来</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2格式化输出选讲">2、格式化输出（选讲）<a href="#2格式化输出选讲" class="hash-link" aria-label="2、格式化输出（选讲）的直接链接" title="2、格式化输出（选讲）的直接链接">​</a></h4>
<ul>
<li>
<p>%d：十进制整数</p>
</li>
<li>
<p>%f：浮点数</p>
</li>
<li>
<p>%c：单个字符</p>
</li>
<li>
<p>%b：boolean值</p>
</li>
<li>
<p>%s：字符串</p>
</li>
<li>
<p>....</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public void test3() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        byte b = 127;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int age = 18;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        long bigNum = 123456789L;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        float weight = 123.4567F;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        double money = 589756122.22552;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        char gender = &#x27;男&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        boolean marry = true;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String name = &quot;张三&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.printf(&quot;byte整数：%d，年龄：%d，&quot; +</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                &quot;大整数：%d，身高：%f，身高：%.1f，钱：%f，&quot; +</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                &quot;钱：%.2f，性别：%c，婚否：%b，姓名：%s&quot;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                b,age,bigNum,weight,weight,money,money,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                gender,marry,name);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20220303160140762" src="data:image/png;base64,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" width="716" height="151" class="img_ev3q"></p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3关于几个转义字符的输出效果说明">3、关于几个转义字符的输出效果说明<a href="#3关于几个转义字符的输出效果说明" class="hash-link" aria-label="3、关于几个转义字符的输出效果说明的直接链接" title="3、关于几个转义字符的输出效果说明的直接链接">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public void test4() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;hello\tjava&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;hello\rjava&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;hello\njava&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public void test5() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;hello\tworld\tjava.&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;chailinyan\tis\tbeautiful.&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;姓名\t基本工资\t年龄&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;张三\t10000.0\t23&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32输入语句">3.2、输入语句<a href="#32输入语句" class="hash-link" aria-label="3.2、输入语句的直接链接" title="3.2、输入语句的直接链接">​</a></h3>
<p>键盘输入代码的四个步骤：</p>
<p>1、申请资源，创建Scanner类型的对象
2、提示输入xx
3、接收输入内容
4、全部输入完成之后，释放资源，归还资源</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1各种类型的数据输入">1、各种类型的数据输入<a href="#1各种类型的数据输入" class="hash-link" aria-label="1、各种类型的数据输入的直接链接" title="1、各种类型的数据输入的直接链接">​</a></h4>
<p>示例代码：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">//如果在.java源文件上面没有这句import语句，</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//那么在代码中每次使用Scanner就要用java.util.Scanner的全名称，比较麻烦</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">键盘输入代码的四个步骤：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1、申请资源，创建Scanner类型的对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2、提示输入xx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">3、接收输入内容</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">4、全部输入完成之后，释放资源，归还资源</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">如果你在键盘输入过程中，遇到java.util.InputMismatchException异常，</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">说明你输入的数据，其类型与接收数据的变量的类型不匹配。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     public void test6() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //1、准备Scanner类型的对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //Scanner是一个引用数据类型，它的全名称是java.util.Scanner</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //input就是一个引用数据类型的变量了，赋给它的值是一个对象（对象的概念我们后面学习，暂时先这么叫）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //new Scanner(System.in)是一个new表达式，该表达式的结果是一个对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //引用数据类型  变量 = 对象;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //这个等式的意思可以理解为用一个引用数据类型的变量代表一个对象，所以这个变量的名称又称为对象名</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //我们也把input变量叫做input对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Scanner input = new Scanner(System.in);//System.in默认代表键盘输入</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //这里变量名是input，下面就用input</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //2、提示输入xx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(&quot;请输入一个整数：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //3、接收输入内容</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int num = input.nextInt();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;num = &quot; + num);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //列出其他常用数据类型的输入</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        /*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        long bigNum = input.nextLong();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        double d = input.nextDouble();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        boolean b = input.nextBoolean();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String s = input.next();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        char c = input.next().charAt(0);//先按照字符 串接收，然后再取字符串的第一个字符（下标为0）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //释放资源</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        input.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20220922171118305" src="/assets/images/image-20220922171118305-68845e1dc9e29255d84b1a3698f5fc63.png" width="669" height="138" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2next与nextline">2、next()与nextLine()<a href="#2next与nextline" class="hash-link" aria-label="2、next()与nextLine()的直接链接" title="2、next()与nextLine()的直接链接">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">next()方法：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	遇到空格等空白符，就认为输入结束</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nextLine()方法：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	遇到回车换行，才认为输入结束</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void test7() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //申请资源</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Scanner input = new Scanner(System.in);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(&quot;请输入姓名：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //String name = input.next();//张 三  只能接收张，后面的空格和三无法接收，被下面的输入接收</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String name = input.nextLine();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;name = &quot; + name);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(&quot;请输入年龄：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int age = input.nextInt();	//23回车换行  这里只接收23，回车换行被下面的输入接收</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        input.nextLine();//读取23后面的回车换行，但是这个不需要接收，只有下面一个输入是nextLine()情况下才需要这样，如果下面的输入是next()或者是nextInt(),nextDouble()等就不需要这么干</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;age = &quot; + age);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(&quot;请输入电话号码：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String tel = input.nextLine();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;tel = &quot; + tel);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //释放资源</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        input.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20220922171943776" src="/assets/images/image-20220922171943776-bb3a540c9731355288a42ac2f8014ae8.png" width="733" height="162" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="四分支语句">四、分支语句<a href="#四分支语句" class="hash-link" aria-label="四、分支语句的直接链接" title="四、分支语句的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41单分支条件判断">4.1、单分支条件判断<a href="#41单分支条件判断" class="hash-link" aria-label="4.1、单分支条件判断的直接链接" title="4.1、单分支条件判断的直接链接">​</a></h3>
<p><strong>if语句第一种格式：</strong> if</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">if(条件表达式)｛</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  	语句体;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">｝</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>执行流程</strong></p>
<ul>
<li>首先判断条件表达式看其结果是true还是false</li>
<li>如果是true就执行语句体</li>
<li>如果是false就不执行语句体</li>
</ul>
<p><img decoding="async" loading="lazy" alt="if" src="data:image/jpeg;base64,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hUwqYVMKmFTCphUwqYVF/wCDhgNMCInUFV/bBFICA4mreQWHqMzMzMzM3+QB1GZmZmZmYNUhCRa3tbcR4bW9rbiPDa3tbaHIDIOXiOrWAgw2RAQBKsSRNEo2wvIQDNdiSIpqlqThsIMOo0fDa3tbaAXEVxBA8jHogMx4sOeFEVdLwPRkECH5bvtBRKQUDldXBKEFmV6tdAWUD+GApGN0iyABNMlwRoDUiZLpoeG1va20EE7oWBdSYNtUI/jX+YFA9hJZoRvKPonTBvqFGXsCt11lY/ign5EMq0AotmJhPI0dFe/mN1rFwz00PDa3tbcR4bW9rbiPDa3tbcR4bWDySCYRUyuZXMrmVzK5lcyuZXMrmVzK5/3JqJlcyuZXMrmVzK5lcyuZXMrmVwOIIiy+JNxAXJn6binAOISxH2QYLAiIfTN36gGUBAfZcUr71//aAAwDAQACAAMAAAAQ888888888888888888888888888+d888888888888888881o8888888888888881YgCg7888888888881YgCCCCCg788888888XiCWPigD3CCv8A+PPPPPPDg0Agoggj/vfP/PPPPPPPDgwAj/vfPPP/ADzzzzzzzzw773zzzzz/AM8888888888fK88888/88888wzzzzwCzzzzz/8A/PPPPAggggggggggglv/ADzzzwIIIIcAc8IIIJb/AM8888CCCCQzjACCCCW888888CCCCCCCCCCCCWPV8888uOOOOOBBBBBBx28888888888qjNNNNNNN88888gDDDDDjDDDDD3888888CCCCJBDPCCCCW888888CCCCI6UhhCCCW888888CCCCCCCCCCCCW888888BCCCCCBCCCCCe88888888888+S888888888888888888e888888888/8QAJBEBAAIBAwQDAQEBAAAAAAAAAQARYSAhMTBAUXEQQaHh8LH/2gAIAQMBAT8Q7viWlPZALYNRdgAtn0Spa/Hp5g3qALZ9EqWur08wb0StsQv4coilcQEL6JsVUHAPmxW6X4/v8iBdfv8ANfPzdDfWrQgG8gBR8cvro8/N0N/lWhAN5ACjRy+unz8tNwAKNXL66gKtTnq5fWpLZZlJlJlJlJlJub/UykykykykykESycvrsrhnL66UFtS20bIsL08M5fXSlTcbE4Sw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" width="297" height="382" class="img_ev3q"></p>
<p>案例：从键盘第一个小的整数赋值给small，第二个大的整数赋值给big，如果输入的第一个整数大于第二个整数，就交换。输出显示small和big变量的值。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void test8() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Scanner input = new Scanner(System.in);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(&quot;请输入第一个整数：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int small = input.nextInt();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(&quot;请输入第二个整数：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int big = input.nextInt();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (small &gt; big) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            int temp = small;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            small = big;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            big = temp;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;small=&quot; + small + &quot;,big=&quot; + big);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        input.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42双分支条件判断">4.2、双分支条件判断<a href="#42双分支条件判断" class="hash-link" aria-label="4.2、双分支条件判断的直接链接" title="4.2、双分支条件判断的直接链接">​</a></h3>
<p><strong>if语句第二种格式：</strong> if...else</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">if(关系表达式) { </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  	语句体1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  	语句体2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>执行流程</p>
<ul>
<li>
<p>首先判断关系表达式看其结果是true还是false</p>
</li>
<li>
<p>如果是true就执行语句体1</p>
</li>
<li>
<p>如果是false就执行语句体2</p>
</li>
</ul>
<p><img decoding="async" loading="lazy" alt="ifelse" src="/assets/images/ifelse-b8a0b03aed2764cb821c1d238b41c043.jpg" width="443" height="386" class="img_ev3q"></p>
<p>案例：从键盘输入一个整数，判定是偶数还是奇数</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void test9() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // 判断给定的数据是奇数还是偶数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Scanner input = new Scanner(System.in);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(&quot;请输入整数：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int a = input.nextInt();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if(a % 2 == 0) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(a + &quot;是偶数&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } else{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(a + &quot;是奇数&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        input.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="43多分支条件判断">4.3、多分支条件判断<a href="#43多分支条件判断" class="hash-link" aria-label="4.3、多分支条件判断的直接链接" title="4.3、多分支条件判断的直接链接">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">if (判断条件1) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  	执行语句1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">} else if (判断条件2) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  	执行语句2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">...</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}else if (判断条件n) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> 	执行语句n;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">} else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  	执行语句n+1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>执行流程</strong></p>
<ul>
<li>首先判断关系表达式1看其结果是true还是false</li>
<li>如果是true就执行语句体1，然后结束当前多分支</li>
<li>如果是false就继续判断关系表达式2看其结果是true还是false</li>
<li>如果是true就执行语句体2，然后结束当前多分支</li>
<li>如果是false就继续判断关系表达式…看其结果是true还是false</li>
<li>…</li>
<li>如果没有任何关系表达式为true，就执行语句体n+1，然后结束当前多分支。</li>
</ul>
<p><img decoding="async" loading="lazy" alt="ifelseif" src="/assets/images/ifelseif-50e2509104d9306992c4a9380b8ebed3.jpg" width="888" height="661" class="img_ev3q"></p>
<p>案例：通过指定考试成绩，判断学生等级，成绩范围[0,100]</p>
<ul>
<li>90-100      优秀</li>
<li>80-89        好</li>
<li>70-79        良</li>
<li>60-69        及格</li>
<li>60以下    不及格</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void test10() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Scanner input = new Scanner(System.in);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(&quot;请输入成绩[0,100]：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int score = input.nextInt();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if(score&lt;0 || score&gt;100){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(&quot;你的成绩是错误的&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }else if(score&gt;=90 &amp;&amp; score&lt;=100){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(&quot;你的成绩属于优秀&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }else if(score&gt;=80 &amp;&amp; score&lt;90){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(&quot;你的成绩属于好&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }else if(score&gt;=70 &amp;&amp; score&lt;80){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(&quot;你的成绩属于良&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }else if(score&gt;=60 &amp;&amp; score&lt;70){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(&quot;你的成绩属于及格&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(&quot;你的成绩属于不及格&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        input.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="44ifelse嵌套">4.4、if...else嵌套<a href="#44ifelse嵌套" class="hash-link" aria-label="4.4、if...else嵌套的直接链接" title="4.4、if...else嵌套的直接链接">​</a></h3>
<p>在if的语句块中，或者是在else语句块中，
又包含了另外一个条件判断（可以是单分支、双分支、多分支）</p>
<p>执行的特点：</p>
<ul>
<li>如果是嵌套在if语句块中的
只有当外部的if条件满足，才会去判断内部的条件</li>
<li>如果是嵌套在else语句块中的
只有当外部的if条件不满足，进入else后，才会去判断内部的条件</li>
</ul>
<p>案例：从键盘输入一个年份值和月份值，输出该月的总天数</p>
<p>要求：年份为正数，月份1-12。</p>
<p>例如：输入2022年5月，总天数是31天。</p>
<p>​          输入2022年2月，总天数是28天。</p>
<p>​		 输入2020年2月，总天数是29天。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">   public void test11() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //从键盘输入一个年份和月份</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Scanner input = new Scanner(System.in);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(&quot;年份：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int year = input.nextInt();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//        input.nextLine();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(&quot;月份：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int month = input.nextInt();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//        input.nextLine();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if(year&gt;0){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if(month&gt;=1 &amp;&amp; month&lt;=12){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                //合法的情况</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                int days;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                if(month==2){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    if(year%4==0 &amp;&amp; year%100!=0 || year%400==0){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        days = 29;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    }else{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        days = 28;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                }else if(month==4 || month==6  || month==9 || month==11){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    days = 30;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                }else{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    days = 31;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(year+&quot;年&quot; + month + &quot;月有&quot; + days +&quot;天&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }else{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;月份输入不合法&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(&quot;年份输入不合法&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        input.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="45switchcase多分支结构">4.5、switch...case多分支结构<a href="#45switchcase多分支结构" class="hash-link" aria-label="4.5、switch...case多分支结构的直接链接" title="4.5、switch...case多分支结构的直接链接">​</a></h3>
<p>语法格式：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">switch(表达式){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    case 常量值1:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        语句块1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        【break;】</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    case 常量值2:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        语句块2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        【break;】   </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    。。。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   【default:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        语句块n+1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        【break;】</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     】</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>执行过程：</p>
<p>（1）入口</p>
<p>①当switch(表达式)的值与case后面的某个常量值匹配，就从这个case进入；</p>
<p>②当switch(表达式)的值与case后面的所有常量值都不匹配，寻找default分支进入;不管default在哪里</p>
<p>（2）一旦从“入口”进入switch，就会顺序往下执行，直到遇到“出口”，即可能发生贯穿</p>
<p>（3）出口</p>
<p>①自然出口：遇到了switch的结束}</p>
<p>②中断出口：遇到了break等</p>
<blockquote>
<p>注意：</p>
<p>（1）switch(表达式)的值的类型，只能是：4种基本数据类型（byte,short,int,char），两种引用数据类型（JDK1.5之后枚举、JDK1.7之后String）</p>
<p>（2）case后面必须是常量值，而且不能重复</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1如何避免case穿透">1、如何避免case穿透<a href="#1如何避免case穿透" class="hash-link" aria-label="1、如何避免case穿透的直接链接" title="1、如何避免case穿透的直接链接">​</a></h4>
<p>案例：从键盘输入星期的整数值，输出星期的英文单词</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">  public void test12() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //定义指定的星期</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Scanner input = new Scanner(System.in);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(&quot;请输入星期值：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int weekday = input.nextInt();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //switch语句实现选择</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        switch(weekday) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 1:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;Monday&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 2:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;Tuesday&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 3:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;Wednesday&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 4:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;Thursday&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 5:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;Friday&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 6:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;Saturday&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 7:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;Sunday&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            default:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;你输入的星期值有误！&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        input.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代  码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2利用case的穿透性">2、利用case的穿透性<a href="#2利用case的穿透性" class="hash-link" aria-label="2、利用case的穿透性的直接链接" title="2、利用case的穿透性的直接链接">​</a></h4>
<p>在switch语句中，如果case的后面不写break，将出现穿透现象，也就是一旦匹配成功，不会在判断下一个case的值，直接向后运行，直到遇到break或者整个switch语句结束，switch语句执行终止。</p>
<p>练习：根据指定的月份输出对应季节</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 需求：指定一个月份，输出该月份对应的季节。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 		一年有四季</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 		3,4,5	春季</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 		6,7,8	夏季</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 		9,10,11	秋季</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 		12,1,2	冬季</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void test13() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Scanner input = new Scanner(System.in);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(&quot;请输入月份：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int month = input.nextInt();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        switch(month) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 1:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 2:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 12:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;冬季&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 3:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 4:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 5:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;春季&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 6:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 7:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 8:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;夏季&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 9:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 10:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 11:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;秋季&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            default:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;你输入的月份有误&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        input.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3java12之后switch新特性选讲">3、Java12之后switch新特性（选讲）<a href="#3java12之后switch新特性选讲" class="hash-link" aria-label="3、Java12之后switch新特性（选讲）的直接链接" title="3、Java12之后switch新特性（选讲）的直接链接">​</a></h4>
<blockquote>
<p>Switch 表达式也是作为预览语言功能的第一个语言改动被引入Java12 中，开始支持如下写法：</p>
</blockquote>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">		switch(month) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			case 3,4,5 -&gt; System.out.println(&quot;春季&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			case 6,7,8 -&gt; System.out.println(&quot;夏季&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			case 9,10,11 -&gt; System.out.println(&quot;秋季&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			case 12,1,2 -&gt; System.out.println(&quot;冬季&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			default-&gt;System.out.println(&quot;月份输入有误！&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		};</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="4if语句与switch语句比较">4、if语句与switch语句比较<a href="#4if语句与switch语句比较" class="hash-link" aria-label="4、if语句与switch语句比较的直接链接" title="4、if语句与switch语句比较的直接链接">​</a></h4>
<ul>
<li>if语句的条件是一个布尔类型值，if条件表达式为true则进入分支，可以用于范围的判断，也可以用于等值的判断，使用范围更广。</li>
<li>switch语句的条件是一个常量值（byte,short,int,char,枚举,String），只能判断某个变量或表达式的结果是否等于某个常量值，使用场景较狭窄。</li>
<li>当条件是判断某个变量或表达式是否等于某个固定的常量值时，使用if和switch都可以，习惯上使用switch更多。当条件是  区间范围的判断时，只能使用if语句。</li>
<li>另外，使用switch可以利用穿透性，同时执行多个分支，而if...else没有穿透性。</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="案例1使用ifswitch都可以">案例1：使用if、switch都可以<a href="#案例1使用ifswitch都可以" class="hash-link" aria-label="案例1：使用if、switch都可以的直接链接" title="案例1：使用if、switch都可以的直接链接">​</a></h5>
<p>使用if实现根据指定的月份输出对应季节</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 需求：定义一个月份，输出该月份对应的季节。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 		一年有四季</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 		3,4,5	春季</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 		6,7,8	夏季</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 		9,10,11	秋季</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 		12,1,2	冬季</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 分析：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 		A:指定一个月份</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 		B:判断该月份是几月,根据月份输出对应的季节</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 			if</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> * 			switch</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     public void test14() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Scanner input = new Scanner(System.in);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(&quot;请输入月份：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int month = input.nextInt();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if ((month == 1) || (month == 2) || (month == 12)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(&quot;冬季&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } else if ((month == 3) || (month == 4) || (month == 5)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(&quot;春季&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } else if ((month == 6) || (month == 7) || (month == 8)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(&quot;夏季&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } else if ((month == 9) || (month == 10) || (month == 11)) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(&quot;秋季&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(&quot;你输入的月份有误&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        input.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="案例2使用switch更好">案例2：使用switch更好<a href="#案例2使用switch更好" class="hash-link" aria-label="案例2：使用switch更好的直接链接" title="案例2：使用switch更好的直接链接">​</a></h5>
<p>用year、month、day分别存储今天的年、月、日值，然后输出今天是这一年的第几天。</p>
<p>注：判断年份是否是闰年 的两个标准，满足其一即可</p>
<p>​       1）可以被4整除，但不可被100整除</p>
<p>​       2）可以被400整除</p>
<p>例如：1900，2200等能被4整除，但同时能被100整除，但不能被400整除，不是闰年</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void test15() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int year = 2021;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int month = 12;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int day = 18;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //判断这一天是当年的第几天==&gt;从1月1日开始，累加到xx月xx日这一天</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //(1)[1,month-1]个月满月天数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //(2)单独考虑2月份是否是29天（依据是看year是否是闰年）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //(3)第month个月的day天</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //声明一个变量days，用来存储总天数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int days = 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //累加[1,month-1]个月满月天数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        switch (month) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 12:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                //累加的1-11月</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                days += 30;//这个30是代表11月份的满月天数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                //这里没有break，继续往下走</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 11:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                //累加的1-10月</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                days += 31;//这个31是代表10月的满月天数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                //这里没有break，继续往下走</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 10:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                days += 30;//9月</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 9:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                days += 31;//8月</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 8:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                days += 31;//7月</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 7:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                days += 30;//6月</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 6:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                days += 31;//5月</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 5:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                days += 30;//4月</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 4:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                days += 31;//3月</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 3:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                days += 28;//2月</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                //在这里考虑是否可能是29天</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                if (year % 4 == 0 &amp;&amp; year % 100 != 0 || year % 400 == 0) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    days++;//多加1天</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 2:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                days += 31;//1月</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 1:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                days += day;//第month月的day天</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //输出结果</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(year + &quot;年&quot; + month + &quot;月&quot; + day + &quot;日是这一年的第&quot; + days + &quot;天&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="案例3只能使用if">案例3：只能使用if<a href="#案例3只能使用if" class="hash-link" aria-label="案例3：只能使用if的直接链接" title="案例3：只能使用if的直接链接">​</a></h5>
<p>从键盘输入一个整数，判断是正数、负数、还是零。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void test16() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Scanner input = new Scanner(System.in);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(&quot;请输入整数：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int num = input.nextInt();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (num &gt; 0) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(num + &quot;是正整数&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } else if (num &lt; 0) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(num + &quot;是负整数&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(num + &quot;是零&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        input.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="image-20220922174928300" src="/assets/images/image-20220922174928300-f3142a27e9249a239c197f364725c95b.png" width="777" height="82" class="img_ev3q"></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="五循环语句">五、循环语句<a href="#五循环语句" class="hash-link" aria-label="五、循环语句的直接链接" title="五、循环语句的直接链接">​</a></h2>
<p>循环语句可以在满足循环条件的情况下，反复执行某一段代码，这段被重复执行的代码被称为循环体语句，当反复执行这个循环体时，需要通过修改循环变量使得循环判断条件为false，从而结束循环，否则循环将一直执行下去，形成死循环。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="51for循环">5.1、for循环<a href="#51for循环" class="hash-link" aria-label="5.1、for循环的直接链接" title="5.1、for循环的直接链接">​</a></h3>
<p>for循环语句格式：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">for(初始化语句①; 循环条件语句②; 迭代语句④){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	循环体语句③</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>注意：</p>
<p>（1）for(;;)中的两个；是不能多也不能少</p>
<p>（2）循环条件必须是boolean类型</p>
<p>执行流程：</p>
<ul>
<li>第一步：执行初始化语句①，完成循环变量的初始化；</li>
<li>第二步：执行循环条件语句②，看循环条件语句的值是true，还是false；<!-- -->
<ul>
<li>如果是true，执行第三步；</li>
<li>如果是false，循环语句中止，循环不再执行。</li>
</ul>
</li>
<li>第三步：执行循环体语句③</li>
<li>第四步：执行迭代语句④，针对循环变量重新赋值</li>
<li>第五步：根据循环变量的新值，重新从第二步开始再执行一遍</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1使用for循环重复执行某些语句">1、使用for循环重复执行某些语句<a href="#1使用for循环重复执行某些语句" class="hash-link" aria-label="1、使用for循环重复执行某些语句的直接链接" title="1、使用for循环重复执行某些语句的直接链接">​</a></h4>
<p>案例：输出1-5的数字</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Test01For {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (int i = 1; i &lt;=5; i++) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(i);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        /*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        执行步骤：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         */</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>思考：</p>
<p>（1）使用循环和不使用循环的区别</p>
<p>（2）如果要实现输出从5到1呢</p>
<p>（3）如果要实现输出从1-100呢，或者1-100之间3的倍数或以3结尾的数字呢</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2变量作用域">2、变量作用域<a href="#2变量作用域" class="hash-link" aria-label="2、变量作用域的直接链接" title="2、变量作用域的直接链接">​</a></h4>
<p>案例：求1-100的累加和</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Test02ForVariableScope {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //考虑变量的作用域</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int sum = 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (int i = 1; i &lt;= 100 ; i++) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//            int sum = 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            sum += i;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//        System.out.println(&quot;i = &quot; + i);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;sum = &quot; + sum);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3死循环">3、死循环<a href="#3死循环" class="hash-link" aria-label="3、死循环的直接链接" title="3、死循环的直接链接">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">for(;;){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    循环体语句块；//如果循环体中没有跳出循环体的语句，那么就是死循环</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>注意：</p>
<p>（1）如果两个;之间写true的话，就表示循环条件成立</p>
<p>（2）如果两个;之间的循环条件省略的话，就默认为循环条件成立</p>
<p>（3）如果循环变量的值不修改，那么循环条件就会永远成立</p>
</blockquote>
<p>案例：实现爱你到永远</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Test03EndlessFor {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (; ;){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(&quot;我爱你！&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//        System.out.println(&quot;end&quot;);//永远无法到达的语句，编译报错</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Test03EndlessFor {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (; true;){ //条件永远成立</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(&quot;我爱你！&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Test03EndlessFor {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (int i=1; i&lt;=10; ){ //循环变量没有修改，条件永远成立，死循环</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(&quot;我爱你！&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>思考一下如下代码执行效果：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Test03EndlessFor {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (int i=1; i&gt;=10; ){ //??  一次都不执行</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(&quot;我爱你！&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="52关键字break">5.2、关键字break<a href="#52关键字break" class="hash-link" aria-label="5.2、关键字break的直接链接" title="5.2、关键字break的直接链接">​</a></h3>
<p><strong>使用场景：终止switch或者当前循环</strong></p>
<ul>
<li>
<p>在选择结构switch语句中</p>
</li>
<li>
<p>在循环语句中</p>
</li>
<li>
<p>离开使用场景的存在是没有意义的</p>
</li>
</ul>
<p>案例：从键盘输入一个大于1的自然数，判断它是否是素数
提示：素数是指大于1的自然数中，除了1和它本身以外不能再有其他因数的自然数，即某个素数n，在[2,n-1]范围内没有其他自然数可以把n整除</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.Scanner;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Test04Break {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Scanner input = new Scanner(System.in);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(&quot;请输入一个整数：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int num = input.nextInt();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        boolean flag = true;//假设num是素数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //找num不是素数的证据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for(int i=2; i&lt;num; i++){//i&lt;=Math.sqrt(num);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if(num % i ==0){//num被某个i整除了，num就不是素数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                flag = false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;//找到其中一个可以把num整除的数，就可以结束了，因为num已经可以判定不是素数了</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //只有把[2,num-1]之间的所有数都检查过了，才能下定结论，num是素数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if(num &gt;1 &amp;&amp; flag){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(num + &quot;是素数&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(num + &quot;不是素数&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="53while循环">5.3、while循环<a href="#53while循环" class="hash-link" aria-label="5.3、while循环的直接链接" title="5.3、while循环的直接链接">​</a></h3>
<p>1、while循环语句基本格式：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">while (循环条件语句①) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    循环体语句②；</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>注意：</p>
<p>while(循环条件)中循环条件必须是boolean类型</p>
</blockquote>
<p>执行流程：</p>
<ul>
<li>第一步：执行循环条件语句①，看循环条件语句的值是true，还是false；<!-- -->
<ul>
<li>如果是true，执行第二步；</li>
<li>如果是false，循环语句中止，循环不再执行。</li>
</ul>
</li>
<li>第二步：执行循环体语句②；</li>
<li>第三步：循环体语句执行完后，重新从第一步开始再执行一遍</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1循环条件成立就执行循环体语句">1、循环条件成立就执行循环体语句<a href="#1循环条件成立就执行循环体语句" class="hash-link" aria-label="1、循环条件成立就执行循环体语句的直接链接" title="1、循环条件成立就执行循环体语句的直接链接">​</a></h4>
<p>案例：从键盘输入整数，输入0结束，统计输入的正数、负数的个数。</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.Scanner;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Test05While {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Scanner input = new Scanner(System.in);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int positive = 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int negative = 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int num = 1; //初始化为特殊值，使得第一次循环条件成立</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        while(num != 0){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.print(&quot;请输入整数（0表示结束）：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            num = input.nextInt();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if(num &gt; 0){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                positive++;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }else if(num &lt; 0){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                negative++;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;正数个数：&quot; + positive);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;负数个数：&quot; + negative);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        input.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2死循环">2、死循环<a href="#2死循环" class="hash-link" aria-label="2、死循环的直接链接" title="2、死循环的直接链接">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">while(true){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     循环体语句;//如果此时循环体中没有跳出循环的语句，就是死循环</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>注意：</p>
<p>（1）while(true)：常量true表示循环条件永远成立</p>
<p>（2）while(循环条件)，如果循环条件中的循环变量值不修改，那么循环条件就会永远成立</p>
<p>（3）while()中的循环条件不能空着</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.Scanner;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Test05While {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Scanner input = new Scanner(System.in);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int positive = 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int negative = 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        while(true){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.print(&quot;请输入整数（0表示结束）：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        	int num = input.nextInt();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if(num &gt; 0){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                positive++;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }else if(num &lt; 0){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                negative++;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }else{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;正数个数：&quot; + positive);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;负数个数：&quot; + negative);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        input.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>思考下面代码的执行效果，为什么？</p>
<ul>
<li>输入0</li>
<li>输入1</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.Scanner;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Test05While {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Scanner input = new Scanner(System.in);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int positive = 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int negative = 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.print(&quot;请输入整数（0表示结束）：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int num = input.nextInt();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        while(num != 0){   </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if(num &gt; 0){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                positive++;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }else if(num &lt; 0){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                negative++;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;正数个数：&quot; + positive);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;负数个数：&quot; + negative);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        input.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="54dowhile循环">5.4、do...while循环<a href="#54dowhile循环" class="hash-link" aria-label="5.4、do...while循环的直接链接" title="5.4、do...while循环的直接链接">​</a></h3>
<p>do...while循环语句标准格式：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">do {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    循环体语句①；</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">} while (循环条件语句②)；</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>注意：</p>
<p>（1）while(循环条件)中循环条件必须是boolean类型</p>
<p>（2）do<!-- -->while();最后有一个分号</p>
<p>（3）do...while结构的循环体语句是至少会执行一次，这个和for和while是不一样的</p>
</blockquote>
<p>执行流程：</p>
<ul>
<li>第一步：执行循环体语句①；</li>
<li>第二步：执行循环条件语句②，看循环条件语句的值是true，还是false；<!-- -->
<ul>
<li>如果是true，执行第三步；</li>
<li>如果是false，循环语句终止，循环不再执行。</li>
</ul>
</li>
<li>第三步：循环条件语句执行完后，重新从第一步开始再执行一遍</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1dowhile循环至少执行一次循环体">1、do...while循环至少执行一次循环体<a href="#1dowhile循环至少执行一次循环体" class="hash-link" aria-label="1、do...while循环至少执行一次循环体的直接链接" title="1、do...while循环至少执行一次循环体的直接链接">​</a></h4>
<p>案例：随机生成一个100以内的整数  ，猜这个随机数是多少？</p>
<p>从键盘输入数，如果大了提示，大了，如果小了，提示小了，如果对了，就不再猜了，并统计一共猜了多少次</p>
<p>提示：随机数  Math.random()</p>
<p>double num = Math.random();// [0,1)的小数</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.Scanner;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Test07DoWhile {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //随机生成一个100以内的整数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		Math.random() ==&gt; [0,1)的小数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		Math.random()* 100 ==&gt; [0,100)的小数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		(int)(Math.random()* 100) ==&gt; [0,100)的整数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int num = (int)(Math.random()* 100);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //System.out.println(num);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //声明一个变量，用来存储猜的次数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int count = 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Scanner input = new Scanner(System.in);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int guess;//提升作用域</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        do{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.print(&quot;请输入100以内的整数：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            guess = input.nextInt();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            //输入一次，就表示猜了一次</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            count++;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if(guess &gt; num){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;大了&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }else if(guess &lt; num){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;小了&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }while(num != guess);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;一共猜了：&quot; + count+&quot;次&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        input.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2死循环-1">2、死循环<a href="#2死循环-1" class="hash-link" aria-label="2、死循环的直接链接" title="2、死循环的直接链接">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">do{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     循环体语句;//如果此时循环体中没有跳出循环的语句，就是死循环</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}while(true);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>注意：</p>
<p>（1）while(true)：常量true表示循环条件永远成立</p>
<p>（2）while(循环条件)，如果循环条件中的循环变量值不修改，那么循环条件就会永远成立</p>
<p>（3）while()中的循环条件不能空着</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.Scanner;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Test08EndlessDoWhile {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //随机生成一个100以内的整数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		Math.random() ==&gt; [0,1)的小数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		Math.random()* 100 ==&gt; [0,100)的小数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		(int)(Math.random()* 100) ==&gt; [0,100)的整数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int num = (int)(Math.random()* 100);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //System.out.println(num);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //声明一个变量，用来存储猜的次数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int count = 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Scanner input = new Scanner(System.in);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        do{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.print(&quot;请输入100以内的整数：&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            int guess = input.nextInt();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            //输入一次，就表示猜了一次</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            count++;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if(guess &gt; num){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;猜大了&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }else if(guess &lt; num){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;猜小了&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }else{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;猜对了，一共猜了&quot; + count+&quot;次&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }while(true);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        input.close();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="55循环语句的区别">5.5、循环语句的区别<a href="#55循环语句的区别" class="hash-link" aria-label="5.5、循环语句的区别的直接链接" title="5.5、循环语句的区别的直接链接">​</a></h3>
<ul>
<li>
<p>从循环次数角度分析</p>
<ul>
<li>do...while循环至少执行一次循环体语句</li>
<li>for和while循环先循环条件语句是否成立，然后决定是否执行循环体，至少执行零次循环体语句</li>
</ul>
</li>
<li>
<p>如何选择</p>
<ul>
<li>遍历有明显的循环次数（范围）的需求，选择for循环</li>
<li>遍历没有明显的循环次数（范围）的需求，循环while循环</li>
<li>如果循环体语句块至少执行一次，可以考虑使用do...while循环</li>
<li>本质上：三种循环之间完全可以互相转换，都能实现循环的功能</li>
</ul>
</li>
<li>
<p>三种循环结构都具有四要素：</p>
<ul>
<li>（1）循环变量的初始化表达式</li>
<li>（2）循环条件</li>
<li>（3）循环变量的修改的迭代表达式</li>
<li>（4）循环体语句块</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="56循环嵌套">5.6、循环嵌套<a href="#56循环嵌套" class="hash-link" aria-label="5.6、循环嵌套的直接链接" title="5.6、循环嵌套的直接链接">​</a></h3>
<p><strong>所谓嵌套循环</strong>，是指一个循环的循环体是另一个循环。比如for循环里面还有一个for循环，就是嵌套循环。当然可以是三种循环任意互相嵌套。</p>
<p>例如：两个for嵌套循环格式</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">for(初始化语句①; 循环条件语句②; 迭代语句⑦) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    for(初始化语句③; 循环条件语句④; 迭代语句⑥) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      	循环体语句⑤;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>**执行特点：**外循环执行一次，内循环执行一轮。</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="案例1打印5行直角三角形">案例1：打印5行直角三角形<a href="#案例1打印5行直角三角形" class="hash-link" aria-label="案例1：打印5行直角三角形的直接链接" title="案例1：打印5行直角三角形的直接链接">​</a></h4>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">**</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">***</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">****</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">*****</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">	public static void main(String[] args){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		for (int i = 0; i &lt; 5; i++) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			for (int j = 0; j &lt;= i; j++) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">				System.out.print(&quot;*&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			System.out.println();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">		}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">	}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="案例2break结束当层循环">案例2：break结束当层循环<a href="#案例2break结束当层循环" class="hash-link" aria-label="案例2：break结束当层循环的直接链接" title="案例2：break结束当层循环的直接链接">​</a></h4>
<p>案例：找出1-100之间所有的素数（质数）</p>
<p>提示：素数是指大于1的自然数中，除了1和它本身以外不能再有其他因数的自然数，即某个素数n，在[2,n-1]范围内没有其他自然 数可以把n整除</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Test09LoopNesting {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //找出1-100之间所有的素数（质数）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for(int i=2; i&lt;=100; i++){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            //里面的代码会运行100遍</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            //每一遍i的值是不同的，i=2,3,4,5...100</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            //每一遍都要判断i是否是素数，如果是，就打印i</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			如何判断i是否是素数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			（1）假设i是素数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			boolean flag = true;//true代表素数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			（2）找i不是素数的证据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			如果在[2,i-1]之间只要有 一个数能够把i整除了，说明i就不是素数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			修改flag = false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			（3）判断这个flag</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            //（1）假设i是素数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            boolean flag = true;//true代表素数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            //（2）找i不是素数的证据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            for(int j=2; j&lt;i; j++){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                if(i%j==0){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    flag = false;//找到一个就可以了</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            //（3）判断这个flag</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if(flag){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(i);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="57关键字continue">5.7、关键字continue<a href="#57关键字continue" class="hash-link" aria-label="5.7、关键字continue的直接链接" title="5.7、关键字continue的直接链接">​</a></h3>
<p><strong>使用场景：提前结束本次循环，继续下一次的循环</strong></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1跳过本次循环">1、跳过本次循环<a href="#1跳过本次循环" class="hash-link" aria-label="1、跳过本次循环的直接链接" title="1、跳过本次循环的直接链接">​</a></h4>
<p>分析如下代码运行结果：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Test10Continue {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for(int i=1; i&lt;=5; i++){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            for(int j=1; j&lt;=5; j++){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                if(i==j){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    continue;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//                    break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.print(j);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2使用continue提高效率">2、使用continue提高效率<a href="#2使用continue提高效率" class="hash-link" aria-label="2、使用continue提高效率的直接链接" title="2、使用continue提高效率的直接链接">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Test10Continue {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //找出1-100之间所有的素数（质数）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for(int i=2; i&lt;=100; i++){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if(i!=2 &amp;&amp; i%2==0 || i!=5 &amp;&amp; i%5==0){//偶数一定不是素数，</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                continue;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            //里面的代码会运行100遍</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            //每一遍i的值是不同的，i=2,3,4,5...100</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            //每一遍都要判断i是否是素数，如果是，就打印i</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			/*</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			如何判断i是否是素数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			（1）假设i是素数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			boolean flag = true;//true代表素数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			（2）找i不是素数的证据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			如果在[3,i-1]之间只要有一个数能够把i整除了，说明i就不是素数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			修改flag = false;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			这里从3开始找，是因为我们前面排除了偶数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			（3）判断这个flag</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">			*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            //（1）假设i是素数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            boolean flag = true;//true代表素数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            //（2）找i不是素数的证据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            for(int j=3; j&lt;i; j++){  // j&lt;=Math.sqrt(i);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                if(i%j==0){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    flag = false;//找到一个就可以了</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            //（3）判断这个flag</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if(flag){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(i);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-DQL">DQL数据查询语言</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2019-06-08T00:00:00.000Z">2019年6月8日</time> · <!-- -->阅读需 10 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>总结了数据查询相关的主要方法，在工作中经常用到</em>下面先引入我们的数据：</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/*创建部门表*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CREATE TABLE dept(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    deptnu      INT  PRIMARY KEY comment &#x27;部门编号&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    dname       VARCHAR(50) comment &#x27;部门名称&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    addr        VARCHAR(50) comment &#x27;部门地址&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">某个公司的员工表</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CREATE TABLE employee(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    empno       INT  PRIMARY KEY comment &#x27;雇员编号&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ename       VARCHAR(50) comment &#x27;雇员姓名&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    job         VARCHAR(50) comment &#x27;雇员职位&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    mgr         INT comment &#x27;雇员上级编号&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    hiredate    DATE comment &#x27;雇佣日期&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sal         DECIMAL(7,2) comment &#x27;薪资&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    deptnu      INT comment &#x27;部门编号&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">)ENGINE=MyISAM DEFAULT CHARSET=utf8;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/*创建工资等级表*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CREATE TABLE salgrade(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">5.1 mysql查询子句之一where条件查询 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">简介：详解where条件下的各种查询</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">简单查询</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">精确条件查询</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">模糊条件查询</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    grade       INT  PRIMARY KEY comment &#x27;等级&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    lowsal      INT comment &#x27;最低薪资&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    higsal      INT comment &#x27;最高薪资&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/*插入dept表数据*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO dept VALUES (10, &#x27;研发部&#x27;, &#x27;北京&#x27;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO dept VALUES (20, &#x27;工程部&#x27;, &#x27;上海&#x27;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO dept VALUES (30, &#x27;销售部&#x27;, &#x27;广州&#x27;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO dept VALUES (40, &#x27;财务部&#x27;, &#x27;深圳&#x27;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/*插入emp表数据*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO employee VALUES (1009, &#x27;唐僧&#x27;, &#x27;董事长&#x27;, NULL, &#x27;2010-11-17&#x27;, 50000,  10);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO employee VALUES (1004, &#x27;猪八戒&#x27;, &#x27;经理&#x27;, 1009, &#x27;2001-04-02&#x27;, 29750, 20);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO employee VALUES (1006, &#x27;猴子&#x27;, &#x27;经理&#x27;, 1009, &#x27;2011-05-01&#x27;, 28500, 30);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO employee VALUES (1007, &#x27;张飞&#x27;, &#x27;经理&#x27;, 1009, &#x27;2011-09-01&#x27;, 24500,10);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO employee VALUES (1008, &#x27;诸葛亮&#x27;, &#x27;分析师&#x27;, 1004, &#x27;2017-04-19&#x27;, 30000, 20);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO employee VALUES (1013, &#x27;林俊杰&#x27;, &#x27;分析师&#x27;, 1004, &#x27;2011-12-03&#x27;, 30000, 20);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO employee VALUES (1002, &#x27;牛魔王&#x27;, &#x27;销售员&#x27;, 1006, &#x27;2018-02-20&#x27;, 16000, 30);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO employee VALUES (1003, &#x27;程咬金&#x27;, &#x27;销售员&#x27;, 1006, &#x27;2017-02-22&#x27;, 12500, 30);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO employee VALUES (1005, &#x27;后裔&#x27;, &#x27;销售员&#x27;, 1006, &#x27;2011-09-28&#x27;, 12500, 30);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO employee VALUES (1010, &#x27;韩信&#x27;, &#x27;销售员&#x27;, 1006, &#x27;2018-09-08&#x27;, 15000,30);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO employee VALUES (1012, &#x27;安琪拉&#x27;, &#x27;文员&#x27;, 1006, &#x27;2011-12-03&#x27;, 9500,  30);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO employee VALUES (1014, &#x27;甄姬&#x27;, &#x27;文员&#x27;, 1007, &#x27;2019-01-23&#x27;, 7500, 10);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO employee VALUES (1011, &#x27;妲己&#x27;, &#x27;文员&#x27;, 1008, &#x27;2018-05-23&#x27;, 11000, 20);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO employee VALUES (1001, &#x27;小乔&#x27;, &#x27;文员&#x27;, 1013, &#x27;2018-12-17&#x27;, 8000, 20);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/*插入salgrade表数据*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO salgrade VALUES (1, 7000, 12000);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO salgrade VALUES (2, 12010, 14000);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO salgrade VALUES (3, 14010, 20000);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO salgrade VALUES (4, 20010, 30000);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INSERT INTO salgrade VALUES (5, 30010, 99990);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="一where条件查询">一、where条件查询<a href="#一where条件查询" class="hash-link" aria-label="一、where条件查询的直接链接" title="一、where条件查询的直接链接">​</a></h3>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="1简单查询">1、简单查询<a href="#1简单查询" class="hash-link" aria-label="1、简单查询的直接链接" title="1、简单查询的直接链接">​</a></h6>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">select * from employee;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select empno,ename,job as ename_job from employee;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="2精确条件查询">2、精确条件查询<a href="#2精确条件查询" class="hash-link" aria-label="2、精确条件查询的直接链接" title="2、精确条件查询的直接链接">​</a></h6>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">select * from employee where ename=&#x27;后裔&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select * from employee where sal != 50000;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select * from employee where sal &lt;&gt; 50000;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select * from employee where sal &gt; 10000;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="3模糊条件查询">3、模糊条件查询<a href="#3模糊条件查询" class="hash-link" aria-label="3、模糊条件查询的直接链接" title="3、模糊条件查询的直接链接">​</a></h6>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">show variables like &#x27;%aracter%&#x27;; </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select * from employee  where ename like &#x27;林%&#x27;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="4范围查询">4、范围  查询<a href="#4范围查询" class="hash-link" aria-label="4、范围查询的直接链接" title="4、范围查询的直接链接">​</a></h6>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">select * from employee where sal between 10000 and 30000; </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select * from employee where hiredate between &#x27;2011-01-01&#x27; and &#x27;2017-12-1&#x27;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="5离散查询">5、离散查询<a href="#5离散查询" class="hash-link" aria-label="5、离散查询的直接链接" title="5、离散查询的直接链接">​</a></h6>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">select * from employee where ename in (&#x27;猴子&#x27;,&#x27;林俊杰&#x27;,&#x27;小红&#x27;,&#x27;小胡&#x27;);  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="6消除重复值">6、消除重复值<a href="#6消除重复值" class="hash-link" aria-label="6、消除重复值的直接链接" title="6、消除重复值的直接链接">​</a></h6>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">select distinct(job) from employee;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="7统计查询聚合函数">7、统计查询（聚合函数）<a href="#7统计查询聚合函数" class="hash-link" aria-label="7、统计查询（聚合函数）的直接链接" title="7、统计查询（聚合函数）的直接链接">​</a></h6>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">count(code)或者count(*)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select count(*) from employee;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select count(ename) from employee;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sum()  计算总和 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select sum(sal) from employee;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">max()    计算最大值</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select * from employee where sal= (select  max(sal) from employee);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">avg()   计算平均值</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select avg(sal) from employee;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">min()   计算最低值</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select * from employee where sal= (select  min(sal) from employee);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">concat函数： 起到连接作用</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select concat(ename,&#x27; 是 &#x27;,job) as aaaa from employee;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="二group-by分组查询分组">二、group by分组查询（分组）<a href="#二group-by分组查询分组" class="hash-link" aria-label="二、group by分组查询（分组）的直接链接" title="二、group by分组查询（分组）的直接链接">​</a></h3>
<p>1、作用：把行 按 字段 分组</p>
<p>2、语法：group by 列1，列2....列n</p>
<p>3、适用场合：常用于统计场合，一般和聚合函数连用</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">eg：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select deptnu,count(*) from employee group by deptnu;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select deptnu,job,count(*)from employee group by deptnu,job;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select job,count(*) from employee group by job;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="三having条件查询筛选">三、having条件查询（筛选）<a href="#三having条件查询筛选" class="hash-link" aria-label="三、having条件查询（筛选）的直接链接" title="三、having条件查询（筛选）的直接链接">​</a></h3>
<p>1、作用：对查询的结果进行筛选操作</p>
<p>2、语法：having 条件 或者 having 聚合函数 条件</p>
<p>3、适用场合：一般跟在group by之后</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">eg:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select job,count(*) from employee group by job having job =&#x27;文员&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select  deptnu,job,count(*) from employee group by deptnu,job having count(*)&gt;=2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select  deptnu,job,count(*) as 总数 from employee group by deptnu,job having 总数&gt;=2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="四order-by排序查询排序">四、order by排序查询（排序）<a href="#四order-by排序查询排序" class="hash-link" aria-label="四、order by排序查询（排序）的直接链接" title="四、order by排序查询（排序  ）的直接链接">​</a></h3>
<p>1、作用：对查询的结果进行排序操作</p>
<p>2、语法：order by 字段1,字段2 .....</p>
<p>3、适用场合：一般用在查询结果的排序</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">eg:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select * from employee order by sal;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select * from employee order by hiredate;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 倒序	</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select  deptnu,job,count(*) as 总数 from employee group by deptnu,job having 总数&gt;=2 order by deptnu desc;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 正序</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select  deptnu,job,count(*) as 总数 from employee group by deptnu,job having 总数&gt;=2 order by deptnu asc;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select  deptnu,job,count(*) as 总数 from employee group by deptnu,job having 总数&gt;=2 order by deptnu;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>顺序：where ---- group by ----- having ------ order by</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="五limit限制查询限制">五、limit限制查询（限制）<a href="#五limit限制查询限制" class="hash-link" aria-label="五、limit限制查询（限制）的直接链接" title="五、limit限制查询（限制）的直接链接">​</a></h3>
<p>1、作用：对查询结果起到限制条数的作用</p>
<p>2、语法：limit n，m
n:代表起始条数值，不写默认为0；m代表：取出的条数</p>
<p>3、适用场合：数据量过多时，可以起到限制作用</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">eg:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    select * from XD.employee limit 4,5;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="六exist型子查询">六、exist型子查询<a href="#六exist型子查询" class="hash-link" aria-label="六、exist型子查询的直接链接" title="六、exist型子查询的直接链接">​</a></h3>
<p><strong>用法</strong>：
1、exists型子查询后面是一个受限的select查询语句
2、exists子查询，如果exists后的内层查询能查出数据，则返回 TRUE 表示存在；为空则返回 FLASE则不存在。</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">分为俩种：exists跟 not exists</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select 1 from employee where 1=1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select * from 表名 a where exists (select 1 from 表名2 where 条件);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">eg:查询出  公司有员工的部门的详细信息</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select * from dept a where exists (select 1 from employee b where a.deptnu=b.deptnu);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select * from dept a where not exists (select 1 from employee b where a.deptnu=b.deptnu);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="七左连接查询与右连接查询">七、左连接查询与右连接查询<a href="#七左连接查询与右连接查询" class="hash-link" aria-label="七、左连接查询与右连接查询的直接链接" title="七、左连接查询与右连接查询的直接链接">​</a></h3>
<p><strong>用法和应用场景</strong>：
1、左连接称之为左外连接 右连接称之为右外连接 这俩个连接都是属于<strong>外连接</strong>
2、左连接关键字：<strong>left join 表名 on 条件</strong> / left outer 表名 join on 条件 右连接关键字：<strong>right join 表名 on 条件</strong>/right outer 表名 join on 条件
3、左连接说明： left join 是left outer join的简写，左(外)连接，左表(a_table)的记录将会全部表示出来， 而右表(b_table)只会显示符合搜索条件的记录。右表记录不足的地方均为NULL。
4、右连接说明：right join是right outer join的简写，与左(外)连接相反，右(外)连接，左表(a_table)只会显示符合搜索条件的记录，而右表(b_table)的记录将会全部表示出来。左表记录不足的地方均为NULL。</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">eg:列出部门名称和这些部门的员工信息，同时列出那些没有的员工的部门</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dept，employee</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select a.dname,b.* from dept a  left join employee b on a.deptnu=b.deptnu;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select b.dname,a.* from employee a  right join  dept b on b.deptnu=a.deptnu;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="八内连接查询与联合查询">八、内连接查询与联合查询<a href="#八内连接查询与联合查询" class="hash-link" aria-label="八、内连接查询与联合查询的直接链接" title="八、内连接查询与联合查询的直接链接">​</a></h3>
<p><strong>语法和应用场景</strong>：
1、内连接：获取两个表中字段匹配关系的记录
2、主要语法：INNER JOIN 表名 ON 条件;</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">eg:想查出员工张飞的所在部门的地址</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select a.addr  from dept a inner join employee b on a.deptnu=b.deptnu and b.ename=&#x27;张飞&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select a.addr from dept a,employee b where a.deptnu=b.deptnu and b.ename=&#x27;张飞&#x27;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>3、联合查询：就是把多个查询语句的查询结果结合在一起
主要语法1：... UNION ... （去除重复） 主要语法2：... UNION ALL ...（不去重复）
4、union查询的注意事项：</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">(1)两个select语句的查询结果的“字段数”必须一致；</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(2)通常，也应该让两个查询语句的字段类型具有一致性；</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(3)也可以联合更多的查询结果；</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(4)用到order by排序时，需要加上limit（加上最大条数就行），需要对子句用括号括起来</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">eg:对销售员的工资从低到高排序，而文员的工资从高到低排序</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(select * from employee a where a.job = &#x27;销售员&#x27;  order by a.sal limit 999999 ) union  (select * from employee b where b.job = &#x27;文员&#x27; order by b.sal desc limit 999999);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于数据仓库相关的话题" class="tag_zVej tagRegular_sFm0" href="/blog/tags/shujuku">数据库</a></li><li class="tag_QGVx"><a title="关于MySQL的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/mysql">MySQL</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-ddl">DDL数据定义语言</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2019-06-07T00:00:00.000Z">2019年6月7日</time> · <!-- -->阅读需 7 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>主要介绍了对库、表的基本操作和mysql基本数据类型</em></p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="1mysql库的创建查看以及使用切换">1、mysql库的创建、查看以及使用/切换<a href="#1mysql库的创建查看以及使用切换" class="hash-link" aria-label="1、mysql库的创建、查看以及使用/切换的直接链接" title="1、mysql库的创建、查看以及使用/切换的直接链接">​</a></h6>
<ul>
<li>
<p><strong>创建数据库</strong>space1</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">create database space1;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>查看当前在哪个数据库</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">select database;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>进入数据库</strong></p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">use 库名;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>判断是否存在，如果不存在则创建数据库space2</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">create database if not exists space2;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>创建数据库并指定字符集为GBK</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">create database space3 default character set gbk; </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>查看某个库是什么字符集</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">show create database space1; </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>查看当前mysql使用的字符集</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">show variables like &#x27;character%&#x27;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="2mysql表的数据类型">2、mysql表的数据类型<a href="#2mysql表的数据类型" class="hash-link" aria-label="2、mysql表的数据类型的直接链接" title="2、mysql表的数据类型的直接链接">​</a></h6>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;1&gt;整数型</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> 类型     大小    范围（有符号）     范围（无符号unsigned）    用途</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">TINYINT  1字节   (-128，127)       (0，255)            小整数值</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">SMALLINT 2字节   (-32768，32767)   (0，65535)          大整数值</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MEDIUMINT 3字节  (-8388608，8388607)  (0，16777215)    大整数值</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">INT   4字节  (-2147483648，2147483647) (0，4294967295) 大整数值</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">BIGINT    8字节    （）             (0，2的64次方减1)   极大整数值</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;2&gt;浮点型</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> FLOAT(m,d）  4字节   单精度浮点型  备注：m代表总个数，d代表小数位个数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> DOUBLE(m,d） 8 字节  双精度浮点型  备注：m代表总个数，d代表小数位个数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> &lt;3&gt;定点型</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> DECIMAL(m,d）   依赖于M和D的值    备注：m代表总个数，d代表小数位个数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> &lt;4&gt;字符串类型 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> 类型          大小              用途</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> CHAR          0-255字节         定长字符串</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> VARCHAR       0-65535字节       变长字符串</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> TINYTEXT      0-255字节         短文本字符串</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> TEXT          0-65535字节       长文本数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> MEDIUMTEXT    0-16777215字节    中等长度文本数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> LONGTEXT      0-4294967295字节  极大文本数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">char的优缺点：存取速度比varchar更快，但是比varchar更占用空间</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">varchar的优缺点：比char省空间。但是存取速度没有char快</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> &lt;5&gt;时间型</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> 数据类型    字节数     格式                  备注</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> date        3     yyyy-MM-dd            存储日期值</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> time        3      HH:mm:ss             存储时分秒</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> year        1       yyyy                存储年</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> datetime    8    yyyy-MM-dd HH:mm:ss    存储日期+时间</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> timestamp   4  yyyy-MM-dd HH:mm:ss     存储日期+时间，可作时间戳</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> create table test_time (</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> date_value date,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> time_value time,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> year_value year,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> datetime_value datetime,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> timestamp_value timestamp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> ) engine=innodb charset=utf8;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">insert into test_time values(now(),now(),now(),now(),now());</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="3mysql表的创建">3、mysql表的创建<a href="#3mysql表的创建" class="hash-link" aria-label="3、mysql表的创建的直接链接" title="3、mysql表的创建的直接链接">​</a></h6>
<ul>
<li>
<p>语法：（<strong>注意空格位</strong>）</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">CREATE TABLE 表名 (    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">字段名1 字段类型1 约束条件1 说明1,   </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">字段名2 字段类型2 约束条件2 说明2,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">字段名3 字段类型3 约束条件3 说明3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">create table 新表名 as select * from 旧表名 where 1=2;(注意：建议这种创建表的方式用于日常测试，因为可能索引什么的会复制不过来)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">create table 新表名 like 旧表名;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>约束条件</strong>：</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">comment         ----说明解释</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">not null        ----不为空</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">default         ----默认值</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">unsigned        ----无符号（即正数）</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">auto_increment  ----自增</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">zerofill        ----自动填充</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">unique key      ----唯一值</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>创建sql：</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">CREATE TABLE student (</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">id tinyint(5) zerofill auto_increment not null comment &#x27;学生学号&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name varchar(20) default null comment &#x27;学生姓名&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">age  tinyint  default null comment &#x27;学生年龄&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">class varchar(20) default null comment &#x27;学生班级&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sex char(5) not null comment &#x27;学生性别&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">unique key (id)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">)engine=innodb charset=utf8;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CREATE TABLE student (</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">id tinyint(5)  auto_increment default null comment &#x27;学生学号&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name varchar(20) default null comment &#x27;学生姓名&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">age  tinyint  default null comment &#x27;学生年龄&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">class varchar(20) default null comment &#x27;学生班级&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sex char(5) not null comment &#x27;学生性别&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">unique key (id)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">)engine=innodb charset=utf8;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="4mysql表的查看">4、mysql表的查看<a href="#4mysql表的查看" class="hash-link" aria-label="4、mysql表的查看的直接链接" title="4、mysql表的查看的直接链接">​</a></h6>
<ul>
<li><strong>查看数据库中的所有表</strong>：show tables；</li>
<li><strong>查看表结构</strong>：desc 表名;</li>
<li><strong>查看创建表的sql语句</strong>：show create table 表名;</li>
<li>\G :有结束sql语句的作用，还有把显示的数据纵向旋转90度</li>
<li>\g :有结束sql语句的作用</li>
<li><strong>复制A表结构创建e表：</strong> create table e as select *from A;或者写成create table e like A;（不包含表数据）</li>
</ul>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="5mysql表的维护和删除">5、mysql表的维护和删除<a href="#5mysql表的维护和删除" class="hash-link" aria-label="5、mysql表的维护和删除的直接链接" title="5、mysql表的维护和删除的直接链接">​</a></h6>
<ul>
<li>
<p>修改表名</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain"> rename table 旧表名 to 新表名;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> rename table student to user;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>添加列</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">给表添加一列：alter table 表名 add 列名 类型;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">alter table user add addr varchar(50);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">alter table add 列名 类型 comment &#x27;说明&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">alter table user add famliy varchar(50) comment &#x27;学生父母&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">给表最前面添加一列：alter table 表名 add 列名 类型 first;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">alter table user add job varchar(10) first;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">给表某个字段后添加一列：alter table 表名 add 列名 类型 after 字段名;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">alter table user add servnumber int(11)  after id;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">注意：没有给表某个字段前添加一列的说法。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>修改列类型</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">alter table 表名 modify 列名 新类型;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">alter table user modify servnumber varchar(20);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>修改列名</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">alter table 表名 change 旧列名 新列名 类型;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">alter table user change servnumber telephone varchar(20);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>删除列</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">alter table 表名 drop 列名;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">alter table user drop famliy;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>修改字符集</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">alter table 表名 character set 字符集;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">alter table user character  set GBK;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>表的删除</strong></p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">drop table 表名  ；</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">drop table user;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">看表是否存在，若存在则删除表：drop table if exists 表名;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">drop table  if exists teacher;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于数据仓库相关的话题" class="tag_zVej tagRegular_sFm0" href="/blog/tags/shujuku">数据库</a></li><li class="tag_QGVx"><a title="关于MySQL的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/mysql">MySQL</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-DML">DML数据操纵语言</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2019-06-07T00:00:00.000Z">2019年6月7日</time> · <!-- -->阅读需 4 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>mysql表数据的插入、删除、修改以及中文编码问题</em></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="1mysql新增表数据">1、mysql新增表数据<a href="#1mysql新增表数据" class="hash-link" aria-label="1、mysql新增表数据的直接链接" title="1、mysql新增表数据的直接链接">​</a></h4>
<p>普通的<strong>插入表数据</strong></p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">insert into 表名（字段名） values（字段对应值）;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">insert into employee (empno,ename,job,mgr,hiredate,sal,deptnu) values (&#x27;1000&#x27;,&#x27;小明&#x27;,&#x27;经理&#x27;,&#x27;10001&#x27;,&#x27;2019-03-03&#x27;,&#x27;12345.23&#x27;,&#x27;10&#x27;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">insert into 表名 values（所有字段对应值）;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># 一次性插入多个数据</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">insert into employee  values (&#x27;1001&#x27;,&#x27;小明&#x27;,&#x27;经理&#x27;,&#x27;10001&#x27;,&#x27;2019-03-03&#x27;,&#x27;12345.23&#x27;,&#x27;10&#x27;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>蠕虫复制</strong>（将一张表的数据复制到另一张表中）</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">insert into 表名1 select * from 表名2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">insert into 表名1（字段名1，字段名2） select 字段名1，字段名2 from 表名2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">insert into emp (empno,ename) select empno,ename from employee;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>建表复制</strong></p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">create table 表名1 as select 字段名1，字段名2 from 表名2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">create table emp as select empno ,ename from employee;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>创建sql</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">某个公司的员工表</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CREATE TABLE employee(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">empno INT PRIMARY KEY comment &#x27;雇员编号&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ename VARCHAR(20) comment &#x27;雇员姓名&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">job VARCHAR(20) comment &#x27;雇员职位&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mgr INT comment &#x27;雇员上级编号&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hiredate DATE comment &#x27;雇佣日期&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sal DECIMAL(7,2) comment &#x27;薪资&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">deptnu INT comment &#x27;部门编号&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="2mysql表数据的修改和删除">2、mysql表数据的修改和删除<a href="#2mysql表数据的修改和删除" class="hash-link" aria-label="2  、mysql表数据的修改和删除的直接链接" title="2、mysql表数据的修改和删除的直接链接">​</a></h4>
<p>表数据的<strong>修改/更新</strong>：</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">update 表名 set 字段名1=值1 where 字段名=值;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">update 表名 set 字段名1=值1,字段名2=值2 where 字段名=值;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>删除</strong>：</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">delete from 表名 where 字段名=值;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> truncate table 表名;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> delete from 表名;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> drop table 表名;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">面试时：面试官问在删改数据之前，你会怎么做？</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">答案：会对数据进行备份操作，以防万一，可以进行数据回退</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">面试时：面试官会问，delete与truncate与drop 这三种删除数据的共同点都是删除数据，他们的不同点是什么?</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">delele 会把删除的操作记录给记录起来，以便数据回退，不会释放空间，而且不会删除定义。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">truncate不会记录删除操作，会把表占用的空间恢复到最初，不会删除定义</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">drop会删除整张表，释放表占用的空间。</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">删除速度：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">drop &gt; truncate &gt; delete</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="3乱码问题">3、乱码问题<a href="#3乱码问题" class="hash-link" aria-label="3、乱码问题的直接链接" title="3、乱码问题的直接链接">​</a></h4>
<p>查看当前mysql使用的字符集：show variables like &#x27;character%&#x27;;</p>
<p><img decoding="async" loading="lazy" alt="a972dff99984198529bae877356409a" src="data:image/png;base64,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" width="609" height="237" class="img_ev3q">character_set_client：客户端请求数据的字符集
character_set_connection：客户端与服务器连接的字符集
character_set_database：数据库服务器中某个库使用的字符集设定，如果建库时没有指明，将默认使用配置
上的字符集
character_set_results：返回给客户端的字符集(从数据库读取到的数据是什么编码的)
character_set_server：为服务器安装时指定的默认字符集设定。
character_set_system：系统字符集(修改不了的，就是utf8)
character_sets_dir：mysql字符集文件的保存路径</p>
<p>临时：set names gbk;</p>
<p>永久：修改配置文件my.cnf里边的</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">[client]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">default-character-set=gbk</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">作用于外部的显示</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">[mysqld]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">character_set_server=gbk</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">作用于内部，会作用于创建库表时默认字符集</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>修改库的字符集编码</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">alter database xiaoxiao default character set gbk;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>修改表的字符集编码</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">alter table employee default character set utf8;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="关于数据仓库相关的话题" class="tag_zVej tagRegular_sFm0" href="/blog/tags/shujuku">数据库</a></li><li class="tag_QGVx"><a title="关于MySQL的相关内容" class="tag_zVej tagRegular_sFm0" href="/blog/tags/mysql">MySQL</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-http-methods-and-status-codes">HTTP请求方法和响应状态码</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2019-03-13T00:00:00.000Z">2019年3月13日</time> · <!-- -->阅读需 3 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>介绍了九种HTTP请求方法和常见响应码HTTPCode</em> </p>
<p><strong>http1.0定义了三种</strong>：
GET: 向服务器获取资源，⽐如常⻅的查询请求
POST: 向服务器提交数据而发送的请求
Head: 和get类似，返回的响应中没有具体的内容，用于获取报头</p>
<p><strong>http1.1定义了六种</strong>:
PUT：⼀般是用于更新请求，比如更新个人信息、商品信息全量更新
PATCH：PUT ⽅法的补充,更新指定资源的部分数据
DELETE：⽤用于删除指定的资源
OPTIONS: 获取服务器支持的HTTP请求方法,服务器性能、跨域检查等
CONNECT: 方法的作用就是把服务器作为跳板，让服务器代替用户去访问其它网页，之后把数据原本的返回给用户，网页开发基本不用这个方法，如果是http代理就会使⽤这个，让服务器代理用户去访问其他网页，类似中介
TRACE：回显服务器收到的请求，主要用于测试或诊断</p>
<p><strong>Http常见的响应状态码讲解</strong>
浏览器向服务器请求时，服务端响应的消息头里面有状态码，表示请求结果的状态
分类
1XX: 收到请求，需要请求者继续执行操作，比较少用
2XX: 请求成功，常用的 200
3XX: 重定向，浏览器在拿到服务器返回的这个状态码后会自动跳转到⼀一个新的URL地址，这个地址可以从响应的Location首部中获取；
好处：⽹站改版、域名迁移等，多个域名指向同个主站导流
必须记住： 301：永久性跳转，比如域名过期，换个域名 302：临时性跳转</p>
<p>​		4XX: 客服端出错，请求包含语法错误或者无法完成请求
​						必须记住： 400: 请求出错，比如语法协议 403: 没权限访问 404: 找不到这个路径对应的接口或者文件 405: 不允许此方法进行提交，Method not allowed，比如接口一定要POS⽅方式，⽽而你是用  了GET
​				5XX: 服务端出错，服务器在处理理请求的过程中发⽣生了错误必须
​						记住： 500: 服务器内部报错了，完成不了这次请求 503: 服务器宕机</p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-http-header">HTTP请求头和响应头</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2019-03-12T00:00:00.000Z">2019年3月12日</time> · <!-- -->阅读需 4 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>介绍了Http响应头和响应头的知识点</em> </p>
<p><strong>常见Http请求头知识点</strong></p>
<p>http请求分为三部分：请求行，请求头， 请求体</p>
<p>请求头：
报文头包含若干个属性 格式为“属性名:属性值”，
服务端据此获取客户端的基本信息</p>
<p>常见的请求头</p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Accept： 览器支持的 MIME 媒体类型, 比如 text/html,application/json,image/webp,/ 等</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Accept-Encoding: 浏览器发给服务器,声明浏览器支持的编码类型，gzip, deflate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Accept-Language: 客户端接受的语言格式,比如 zh-CN</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Connection: keep-alive , 开启HTTP持久连接</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Host：服务器的域名</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Origin：告诉服务器请求从哪里发起的，仅包括协议和域名 CORS跨域请求中可以看到</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">response有对应的header，Access-Control-Allow-Origin</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Referer：告诉服务器请求的原始资源的URI，其用于所有类型的请求，并且包括：协议+域名+查询参数；很多抢购服务会用这个做限制，必须通过某个⼊来进来才有效</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">User-Agent: 服务器通过这个请求头判断用户的软件的应⽤用类型、操作系统、软件开发商以及版本号、浏览器器内核信息等； 风控系统、反作弊系统、反爬⾍虫系统等基本会采集这类信息做参考</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Cookie: 表示服务端给客户端传的http请求状态,也是多个key=value形式组合，比如登录后的令牌等</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Content-Type： HTTP请求提交的内容类型，⼀一般只  有post提交时才需要设置，比如文件上传，表单提交等</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>常见Http响应头知识点</strong></p>
<p>响应头：
报⽂头包含若干个属性 格式为“属性名:属性值”</p>
<p>常见的响应头：</p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Allow: 服务器支持哪些请求方法</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Content-Length: 响应体的字节⻓度</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Content-Type: 响应体的MIME类型</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Content-Encoding: 设置数据 使用的编码类型</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Date: 设置消息发送的日期和时间</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Expires: 设置响应体的过期时间,一个GMT时间，表示该缓存的有效时间</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cache-control: Expires的作用一致，都是指明当前资源的有效期, 控制浏览器是否直接从浏览器缓存取数据还是重新发请求到服务器取数据,优先级高于Expires,控制粒度更细，如max-age=240，即4分钟</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Location：表示客户应当到哪里去获取资源，⼀般同时设置状态代码为3xx</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Server: 服务器名称</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Transfer-Encoding：chunked 表示输出的内容长度不能确定，静态网页一般没，基本出现在动态网页里面</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Access-Control-Allow-Origin: 定哪些站点可以参与跨站资源共享</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-http-content-type">HTTP的content-type媒体类型</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2019-03-11T00:00:00.000Z">2019年3月11日</time> · <!-- -->阅读需 1 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>介绍了Http里面的content-type媒体类型</em> </p>
<div class="language-http codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-http codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Content-type: 用来指定不同格式的请求响应信息，俗称MIME媒体类型常见的取值</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">text/html ：HTML格式 text/plain ：纯文本格式 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">text/xml ： XML格式</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">image/gif ：gif图片格式 image/jpeg ：jpg图片格式 image/png：png图片格式</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">application/json：JSON数据格式 application/pdf ：pdf格式 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">application/octet-stream ：二进制流数据，一般是文件下载</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">application/x-www-form-urlencoded：form表单默认的提交数据的格式，会编码成key=value格式</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">multipart/form-data： 表单中需要上传文件的文件格式类型</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Http知识加深文档：<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/zh-CN/docs/Web/HTTP</a></p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-servlet">Servlet</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-12-10T00:00:00.000Z">2018年12月10日</time> · <!-- -->阅读需 4 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>介绍了什么是Servlet、Servlet常用方法、生命周期等</em></p>
<p>这是一个JavaWeb Servlet文档:<a href="https://tomcat.apache.org/tomcat-9.0-doc/servletapi/index.html" target="_blank" rel="noopener noreferrer">https://tomcat.apache.org/tomcat-9.0-doc/servletapi/index.html</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1什么是servlet">1、什么是Servlet<a href="#1什么是servlet" class="hash-link" aria-label="1、什么是Servlet的直接链接" title="1、什么是Servlet的直接链接">​</a></h3>
<p>**简介：**是JavaServlet的简称，用Java编写的运行在Web服务器或应用服务器上的程序,具有独立于平台和协议的特性, 主要功能在于交互式地浏览和生成动态Web内容
**作用：**接收用户通过浏览器传来的表单数据，或者读取数据库信息返回给浏览器查看，创建动态网页
**接口路径：**package javax.servlet
有两个常见的⼦子类：HttpServlet、GenericServlet</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2重写doget和dopost方法">2、重写doGet和doPost方法<a href="#2重写doget和dopost方法" class="hash-link" aria-label="2、重写doGet和doPost方法的直接链接" title="2、重写doGet和doPost方法的直接链接">​</a></h3>
<p><strong>doGet方法</strong>
<strong>doPost方法</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3讲解servlet的生命周期面试">3、讲解Servlet的生命周期（面试）<a href="#3讲解servlet的生命周期面试" class="hash-link" aria-label="3、讲解Servlet的生命周期（面试）的直接链接" title="3、讲解Servlet的生命周期（面试）的直接链接">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">实例化-&gt;使用构造方法创建对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">初始化-&gt;执行init方法：Servlet 的生命期中，仅执行一次 init() 方法，它是在服务器装⼊Servlet 时执行的,即第一次访问这个Servlet才执行</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">服务-&gt;执行service方法，service()方法是 Servlet的核心。每当一个客户请求一个HttpServlet 对象，该对象的service()方法就要被调用</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">销毁-&gt; 执行destroy方法,destroy() 方法仅执行一次，即在服务器停止且卸装 Servlet 时执行该方法</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public interface Servlet {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   void init(ServletConfig var1) throws ServletException;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   ServletConfig getServletConfig();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   void service(ServletRequest var1, ServletResponse var2) throws </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ServletException, IOException;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   String getServletInfo();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    void destroy();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">HttpServlet里面实现了service方法，里面会根据不同的http method调用不同的方法，所以我们自定义servlet只要重写对应的doXXX方法即可</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>查看继承和实现关系 XXXServlet-&gt;HttpServlet-&gt;GenericServlet-&gt;implements Servle</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4新版servlet3050和旧版配置">4、新版Servlet3.0~5.0和旧版配置<a href="#4新版servlet3050和旧版配置" class="hash-link" aria-label="4、新版Servlet3.0~5.0和旧版配置的直接链接" title="4、新版Servlet3.0~5.0和旧版配置的直接链接">​</a></h3>
<p><strong>旧版Servlet，在xml里面配置类目和路径，比较不方便</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">//XML配置</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;servlet&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;servlet-name&gt;userServlet&lt;/servlet-name&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;servlet-class&gt;net.xdclass.web.UserServlet&lt;/servlet-class&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;/servlet&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;servlet-mapping&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;servlet-name&gt;userServlet&lt;/servlet-name&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &lt;url-pattern&gt;/userServlet&lt;/url-pattern&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    &lt;/servlet-mapping&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>新版Servelt，也就是3.0之后，支持注解的方式</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">@WebServlet(name = &quot;userServlet&quot;,urlPatterns = {&quot;/user1&quot;,&quot;/user2&quot;,&quot;/test&quot;})</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class UserServlet extends HttpServlet {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    protected void doGet(HttpServletRequest req, HttpServletResponse resp) </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">throws ServletException, IOException {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;doGet&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //实战响应内容</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        resp.setContentType(&quot;text/html;charset=utf-8&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        PrintWriter printWriter = resp.getWriter();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        printWriter.write(&quot;&lt;div&gt; doGet jiguanchen.space 你好！ </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&lt;/div&gt;&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//配置项</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//servlet名称，若不指定，则为Servlet的完整类名</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  String name() default &quot;&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//路径映射,配置多个，需要/开头</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  String[] value() default {};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//路径映射,⽀持配置多个，需要/开头</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  String[] urlPatterns() default {};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> //标记容器是否在启动应用时就加载Servlet，默认或数值为负数时表示第一次请求Servlet时再加载；0或正数表示启动应用就加载</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  int loadOnStartup() default -1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> //配置初始参数</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  WebInitParam[] initParams() default {};</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  //是否支持异步操作模式</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  boolean asyncSupported() default false;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-manager-guide">线程基础</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-07-22T00:00:00.000Z">2018年7月22日</time> · <!-- -->阅读需 1 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>一个程序至少一个进程，一个进程至少一个线程</em></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="一进程与线程的区别">一、进程与线程的区别<a href="#一进程与线程的区别" class="hash-link" aria-label="一、进程与线程的区别的直接链接" title="一、进程与线程的区别的直接链接">​</a></h3>
<p>...待续</p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-iterator">迭代器Iterator</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-07-21T00:00:00.000Z">2018年7月21日</time> · <!-- -->阅读需 4 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>迭代器是一种设计模式，在链式结构中经常使用。本篇主要介绍什么是Iterator？Iterator的主要方法及其注意事项？</em></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="什么是迭代器">什么是迭代器？<a href="#什么是迭代器" class="hash-link" aria-label="什么是迭代器？的直接链接" title="什么是迭代器？的直接链接">​</a></h4>
<p>terator是java中的一个接口，核心作用就是用来遍历容器的元素，当容器实现了Iterator接口后，可以通过调用Iterator()方法获取⼀个 Iterator对象。</p>
<p><strong>为什么调用容器里面的Iterator方法？</strong>
因为容器的实现有多种，不同的容器遍历规则不⼀样，比如ArrayList/LinkedList/
HashSet/TreeSet等，所以设计了Iterator接口，让容器本身去实现这个接⼝，实现里面的方法，从而让开发人员不用关系容器的遍历机制，直接使用对应的方法即可</p>
<p><strong>三个核⼼方法</strong>
boolean hashNext()：用于判断iterator内是否有下个元素，如果有则返回true，没有则false
Obejct next()：返回iterator的下一个元素，同时指针也会向后移动1位
void remove()：删除指针的上⼀个元素（容易出问题，删除元素不建议使用容器器自己的方法）</p>
<p><strong>迭代器的集合遍历</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public static void testSet(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Set&lt;String&gt; set = new HashSet&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        set.add(&quot;jack&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        set.add(&quot;tom&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        set.add(&quot;marry&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        set.add(&quot;tony&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        set.add(&quot;jack&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Iterator&lt;String&gt; iterator =  set.iterator();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        while (iterator.hasNext()){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            String str = iterator.next();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(str);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void testList(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        List&lt;String&gt; list = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;jack&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;tom&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;mary&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;tim&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;tony&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;eric&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;jack&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Iterator&lt;String&gt; iterator =  list.iterator();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        while (iterator.hasNext()){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            String str = iterator.next();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(str);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>​		<strong>void remove()强调：</strong>
​		1、删除指针的上⼀个元素
​		2、只有当next执⾏行行完后，才能调⽤用remove函数
​		3、如要删除第⼀个元素， 不能直接调⽤用 remove(),要先next⼀下()否则调⽤用remove方法是会抛出异常的</p>
<p><strong>迭代器遍历元素时不能通过Collection接口中的remove⽅法删除元素，只能⽤用Iterator的remove方法删除元素; 原因 某个线程在 Collection 上进行迭代时，不允许另一个线程修改该 Collection</strong></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public static void testList(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        List&lt;String&gt; list = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;jack&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;tom&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;mary&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;tim&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;tony&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;eric&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;jack&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Iterator&lt;String&gt; iterator =  list.iterator();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        while (iterator.hasNext()){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            String str = iterator.next();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if(&quot;jack&quot;.equals(str)){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                list.remove(str);//ConcurrentModificationException并发修改异常</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(str);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>迭代出的对象是引用的拷贝，如果修改迭代中的元素，那么就是修改容器对象的本身</strong></p>
<p><strong>和for循环对⽐</strong>：</p>
<ul>
<li>for循环适合顺序访问，或者通过下标进⾏访问的</li>
<li>迭代器适合链式结构</li>
<li>最终看使⽤场景，性能会有轻微差别，但是可以忽略</li>
</ul></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-collections">集合工具类Collections</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-07-16T00:00:00.000Z">2018年7月16日</time> · <!-- -->阅读需 5 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>介绍了不能被实例化的集合工具类Collections</em> </p>
<p>1、Collections包含有多种集合操作的静态多态方法，不能把构造函数私有化（即实例化）</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Collections {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Suppresses default constructor, ensuring non-</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">instantiability.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private Collections() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2、与Collection的区别
Collection是接口，提供了对集合对象进行基本操作的通用接⼝方法，List、Set等多种具体的实现类
Collections是工具类，专门操作Collection接口实现类里面的元素</p>
<p>3、常见 方法</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">排序sort(List list)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//按自然排序升序</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">List&lt;String&gt; list = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">list.add(&quot;aaaa&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">list.add(&quot;zzz&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">list.add(&quot;gggg&quot;); </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">System.out.println(list);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Collections.sort(list);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">System.out.println(list);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/*sort(List list, Comparator c) 自定义排序规则，由Comparator控制排序逻辑*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">List&lt;String&gt; list = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">list.add(&quot;aaaa&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">list.add(&quot;zzz&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">list.add(&quot;gggg&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">System.out.println(list);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//默认升序</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Collections.sort(list, Comparator.naturalOrder());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">System.out.println(list);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//降序</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Collections.sort(list, Comparator.reverseOrder());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">System.out.println(list);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">随机排序 shuffle(List list)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    List&lt;String&gt; list = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;1&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;2&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;3&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;4&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;5&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;6&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;7&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;8&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;9&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;10&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;J&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;Q&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;K&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(list);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Collections.shuffle(list);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(list);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>获取最大元素 max(Collection coll) 默认比较，不适合对象比较</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">//获取最大元素 max(Collection coll, Comparator comparator)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//获取最小元素 min(Collection coll)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class CollectionsTest {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        List&lt;Student&gt; list = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(new Student(&quot;jack&quot;, 26));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(new Student(&quot;tom&quot;, 29));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(new Student(&quot;mary&quot;, 32));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(new Student(&quot;tony&quot;, 19));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(new Student(&quot;smith&quot;, 41));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(list);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Student maxAgeStudent =  Collections.max(list, new </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Comparator&lt;Student&gt;() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            public int compare(Student o1, Student o2) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                return o1.getAge() - o2.getAge();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         Student mixAgeStudent =  Collections.mix(list, new </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Comparator&lt;Student&gt;()       {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            public int compare(Student o1, Student o2) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                return o1.getAge() - o2.getAge();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       System.out.println(maxAgeStudent.toString());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">class Student {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public Student(String name, int age) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.name = name;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.age = age;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private int age;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private String name;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void setAge(int age) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.age = age;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public int getAge() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return age;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void setName(String name) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.name = name;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public String getName() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return name;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public String toString() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return &quot;Student{&quot; +</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                &quot;age=&quot; + age +</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                &quot;, name=&#x27;&quot; + name + &#x27;\&#x27;&#x27; +</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                &#x27;}&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>4、创建不可变集合unmodifiablleXXX()</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">    List&lt;String&gt; list = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;SpringBoot课程&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;架构课程&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;微服务SpringCloud课程&quot;); //设置为只读List集合</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list = Collections.unmodifiableList(list);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(list);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Set&lt;String&gt; set = new HashSet&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        set.add(&quot;Mysql教程&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        set.add(&quot;Linux服务器器器器教程&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        set.add(&quot;Git教程&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //设置为只读Set集合</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        set = Collections.unmodifiableSet(set);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(set);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Map&lt;String, String&gt; map = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        map.put(&quot;key1&quot;, &quot;课程1&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        map.put(&quot;key2&quot;, &quot;课程2&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //设置为只读Map集合</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        map = Collections.unmodifiableMap(map);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(map);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>5、元素排序接口Comparable</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">//什么是Comparable</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public interface Comparable&lt;T&gt; {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public int compareTo(T o);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//是一个接口，定制排序规则</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//对它的每个类的对象进行整体排序，里面compareTo方法是实现排序的具体方法</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//比如TreeSet、SortedSet、Collections.sort()方法调用进行排序</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//String、Integer等类默认实现了这个接口，所以可以排序(看源码)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//详解comparable方法</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//⽤于比较次对象和指定对象的顺序，o为要比较的对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//返回int类型</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//大于0, 表示this大于传进来的对象o ,则往后排，即升序</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//等于0，表示this等于传进来的对象o</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//小于0，表示this小于传进来的对象o</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//需求：根据学生的年龄进行排序</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class TestCom {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String [] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Set&lt;Student&gt; studentSet = new TreeSet&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        studentSet.add(new Student(&quot;jack&quot;,32));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        studentSet.add(new Student(&quot;tom&quot;,22));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        studentSet.add(new Student(&quot;mary&quot;,35));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        studentSet.add(new Student(&quot;tim&quot;,11));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        studentSet.add(new Student(&quot;tony&quot;,49));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        studentSet.add(new Student(&quot;dd&quot;,30));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(studentSet);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> class Student implements Comparable{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private int age;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private String name;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void setAge(int age) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.age = age;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public int getAge() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return age;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void setName(String name) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.name = name;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public String getName() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return name;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public Student(String name,int age){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.name = name;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.age = age;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public String toString() {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return &quot;Student{&quot; +</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                &quot;age=&quot; + age +</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                &quot;, name=&#x27;&quot; + name + &#x27;\&#x27;&#x27; +</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                &#x27;}&#x27;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public int compareTo(Object o) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if(o instanceof Student){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Student student = (Student)o;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return this.age - student.age;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //返回的数是0代表两个对象相同</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-map">集合Map</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-07-15T00:00:00.000Z">2018年7月15日</time> · <!-- -->阅读需 2 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>记录了Map常见API和面试题</em></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Map&lt;String,String&gt; map = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//往map里面放key - value;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">map.put(&quot;小明&quot;,&quot;广东广州&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">map.put(&quot;小东&quot;,&quot;广东深圳&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//根据key获取value</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">map.get(&quot;小东&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//判断是否包含某个key</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">map.containsKey(&quot;小明&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//返回map的元素数量</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">map.size();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//清空容器器</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">map.clear();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//获取所有value集合</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">map.values();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//返回所有key的集合</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">map.keySet()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//返回一个Set集合，集合的类型为Map.Entry,是Map声明的一个内部接口，接⼝为泛型，定义为Entry&lt;K,V&gt;，</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//它表示Map中一个实体(一个key-value对),主要有getKey(),getValue方法</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Set&lt;Map.Entry&lt;String,String&gt;&gt; entrySet =  map.entrySet();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//判断map是否为空</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">map.isEmpty();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Map面试题</strong>
1、HashMap和TreeMap应该怎么选择？
HashMap可实现快速存储和检索，但缺点是包含的元素是无序的，适用于在Map中插⼊、删除和定位元素.
TreeMap能便便捷的实现对其内部元素的各种排序，但其⼀般性能比HashMap差,适用于按⾃然顺序或自定义顺序遍历键(key)
eg：微信支付</p>
<p>2、jdk1.7和jdk1.8中HashMap的主要区别。
底层实现由之前的 “数组+链表” 改为 “数组+链表+红黑树”</p>
<p>3、什么时候开始转变？
当链表节点较少时仍然是以链表存在，当链表节点较多时，默认是大于8时会转为红黑树<img decoding="async" loading="lazy" alt="21b307238b899b7e5ea23f9d5cb1c98" src="/assets/images/21b307238b899b7e5ea23f9d5cb1c98-c455e92c17aaf023236c72425860e0bd.png" width="756" height="226" class="img_ev3q"></p>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""> <em>Typora 换行间距最小  shift+enter</em></li>
</ul></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-set">集合Set</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-07-13T00:00:00.000Z">2018年7月13日</time> · <!-- -->阅读需 3 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>集合框架之Set及其子类</em>  </p>
<p>什么是Set数据结构？
1、Set相对于List是简单的一种集合,具有和 Collection 完全一样的接口，只是实现上不同，<strong>Set不保存重复的元素，存储一组唯一，⽆序的对象</strong>。
2、Set中的元素是不能重复的, 实现细节可以参考Map，因为这些Set的实现都是对应的Map的一种封装。比如HashSet是对HashMap的封装，TreeSet对TreeMap
3、Set底层是一个HashMap，由于HashMap的put()方法是一个键值对，当新放⼊HashMap的Entry中key 与集合中原有Entry的key相同（hashCode()返回值相等，通过equals比较也返回true），新添加的Entry的value会将覆盖原来Entry的value，但key不会有任何改变。
4、允许包含值为null的元素，但最多只能有一个null元素</p>
<p>常⻅的实现类。
HashSet
HashSet类按照哈希算法来存取集合中的对象，存取速度比较快
对应的Map是HashMap，是基于Hash的快速元素插入，元素⽆顺序。
TreeSet
TreeSet类实现了SortedSet接口，能够对集合中的对象进行排序</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">//创建对象,HashSet和TreeSet api一样</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Set&lt;Integer&gt; set = new HashSet&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//往容器里面添加对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">set.add(&quot;jack&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//清空元素 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">set.clear();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//返回⼤小  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">set.size();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//根据对象删除元素</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">set.remove(&quot;jack&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//是否为空</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">set.isEmpty();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>两者常见区别
1、HashSet不能保证元素的排列列顺序，TreeSet是SortedSet接口的唯一实现类，可以确保集合元素处于排序状态
2、HashSet底层用的是哈希表，TreeSet采用的数据结构是红⿊树（红⿊树是⼀种特定类型的⼆叉树）
3、HashSet中元素可以是null，但只能有一个，TreeSet不允许放⼊null
4、一般使⽤用HashSet，如果需要排序的功能时，才使用TreeSet（性能原因）</p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-list">集合List</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-07-12T00:00:00.000Z">2018年7月12日</time> · <!-- -->阅读需 3 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>ArrayList和LinkedList的API是一样的，直接上代码</em>：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">import java.util.LinkedList;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class ListTest {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String [] args){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        LinkedList&lt;String&gt; list = new LinkedList&lt;&gt;();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //往容器里面添加对象</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;jack&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;tom&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.add(&quot;marry&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       String lastObj =  list.getLast();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //System.out.println(list);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       // System.out.println(list.get(0));</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //更新一个元素</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.set(0,&quot;小D&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(list);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //返回大小</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       int size =  list.size();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;size=&quot;+size);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //根据索引删除一个元素</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       String indexRemove =  list.remove(1);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;删除后的元素：&quot;+list);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //根据对象删除元素</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        boolean flag = list.remove(&quot;jack&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //是否为空</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       boolean beforeClear =  list.isEmpty();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       System.out.println(&quot;clear 之前 isEmpty = &quot;+ beforeClear);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        list.clear();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //清空元素</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       boolean afterClear = list.isEmpty();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       System.out.println(&quot;clear 之后 isEmpty = &quot;+ afterClear);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//重点：</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//LinkedList特有api</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//获取第⼀一个元素</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">list.getFirst();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//获取最后⼀一个元素</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">list.getLast();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ArrayList
1、基于数组实现，是一个动态的数组队列，但它和Java中的数组⼜不不一样，它的容量可以自动增⻓
2、可以存储任意多的对象，但是只能存储对象，不能存储原生数据类型，例如int
LinkedList
1、基于的数据结构是链表，⼀个双向链表，链表数据结构的特点是每个元素分配的空间不必连续
2、插⼊和删除元素时速度非常快，但访问元素的速度较慢</p>
<p><strong>两者常见区别 (经典面试题)</strong>
1、两个都是List的接口，两个都是非线程安全的
2、ArrayList是基于动态数组的数据结构，而LinkedList是基于链表数据结构
3、对于随机访问get和set（查询操作），ArrayList要更好，因为LinkedList要移动指针
4、对于增删操作（add和remove），LinkedList优于ArrayList。</p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-calculator">简单计算器</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-07-10T00:00:00.000Z">2018年7月10日</time> · <!-- -->阅读需 2 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>写个计算器，能完成加减乘除运算，定义接口做参数，</em>加减乘除定义4个类
定义⼀个静态工具类，把下面的接口作为其中⼀个形参对象，传递具体的运算符类完成计算.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">interface ICompute{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int computer(int num1, int num2);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class AddOper implements ICompute {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public int computer(int num1, int num2) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return num1 + num2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class SubOper implements ICompute {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public int computer(int num1, int num2) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return num1 - num2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class MulOper implements ICompute {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public int computer(int num1, int num2) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return num1*num2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class DivideOper implements ICompute {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public int computer(int num1, int num2) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return num1/num2;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }catch (Exception e){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            e.printStackTrace();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return -1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class UseCompute {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void compute(ICompute compute, int num1, int num2){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int result = compute.computer(num1,num2);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(result);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//    public static void add(AddOper compute, int num1, int num2){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//        int result = compute.computer(num1,num2);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//        System.out.println(result);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//    public static void sub(SubOper compute, int num1, int num2){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//        int result = compute.computer(num1,num2);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//        System.out.println(result);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">//    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String [] args){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        UseCompute.compute(new AddOper(),25,5);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        UseCompute.compute(new SubOper(),25,5);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        UseCompute.compute(new MulOper(),25,5);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        UseCompute.compute(new DivideOper(),25,0);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-cannot-be-inherited">不能被继承</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-06-24T00:00:00.000Z">2018年6月24日</time> · <!-- -->阅读需 1 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>下面哪些类可以被继承？</em> Java.lang.Thread、java.lang.Number、java.lang.Double、java.lang.Math、 java.lang.ClassLoader</p>
<p>可以被继承：</p>
<ul>
<li>Thread可以被继承，用于创建新的线程</li>
<li>Number类可以被继承，Integer，Float，Double等都继承自Number类</li>
<li>ClassLoader可以被继承，用户可以自定义类加载器</li>
</ul>
<p>不能被继承：</p>
<p>Double类的声明为</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public final class Doubleextends Numberimplements Comparable&lt;Double&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Math类的声明为</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public final class Mathextends Object</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-polymorphism">什么是多态</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-06-22T00:00:00.000Z">2018年6月22日</time> · <!-- -->阅读需 1 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>什么是多态</em></p>
<p>同⼀个⾏为具有多个不同表现形式或形态的能⼒</p>
<p>常见的方式：</p>
<p>1、继承⽅法重写  Override</p>
<p>2、同类方法重载  Overload</p>
<p>3、抽象⽅法  abstract</p>
<p>4、接口  implements</p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/product-abstract-features">抽象的特点</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-06-20T00:00:00.000Z">2018年6月20日</time> · <!-- -->阅读需 2 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>抽象类与抽象方法特点</em></p>
<p><strong>抽象类的特点</strong>
1、抽象类不能被实例化，因为抽象类中方法未具体化，这是⼀种不完整的类，所以不能直接实例化，编译无法通过。
2、抽象类中不一定包含抽象⽅方法，但是有抽象方法的类必定是抽象类。
3、如果一个抽象类中可以没有抽象方法，这样做的目的是为了此类不能被实例化。
4、抽象类的⼦类必须给出抽象类中的抽象方法的具体实现，否则⼦类也是抽象类，需要⽤abstract声明。
5、抽象类不能使用final关键字修饰，因为final修饰的类是⽆法被继承。</p>
<p><strong>抽象⽅法的特点</strong>
1、抽象类中的抽象⽅法只是声明，不包含方法体。
2、抽象方法不能⽤private修饰，因为抽象方法必须被⼦类实现（覆写），⽽private权限对于⼦类来说是不能访问的。
3、一个类继承了一个抽象类，那么它必须全部覆写抽象类中的抽象⽅方法，当然也可以不全部覆写，如果不覆写全部抽象方法则这个子类也必须是抽象类。
<strong>构造⽅方法，类⽅方法（即static 修饰的⽅方法）不能声明为抽象⽅方法</strong></p></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/productivity-exercise-3">练习题3</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-06-11T00:00:00.000Z">2018年6月11日</time> · <!-- -->阅读需 5 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>这是一道mysql数据查询的练习题</em> </p>
<p>数据表：</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">/*创建部门表*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CREATE TABLE dept(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    deptnu      INT  PRIMARY KEY comment &#x27;部门编号&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    dname       VARCHAR(50) comment &#x27;部门名称&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    addr        VARCHAR(50) comment &#x27;部门地址&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">某个公司的员工表</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CREATE TABLE employee(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    empno       INT  PRIMARY KEY comment &#x27;雇员编号&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ename       VARCHAR(50) comment &#x27;雇员姓名&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    job         VARCHAR(50) comment &#x27;雇员职位&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    mgr         INT comment &#x27;雇员上级编号&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    hiredate    DATE comment &#x27;雇佣日期&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sal         DECIMAL(7,2) comment &#x27;薪资&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    deptnu      INT comment &#x27;部门编号&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">)ENGINE=MyISAM DEFAULT CHARSET=utf8;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">/*创建工资等级表*/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CREATE TABLE salgrade(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    grade       INT  PRIMARY KEY comment &#x27;等级&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    lowsal      INT comment &#x27;最低薪资&#x27;,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    higsal      INT comment &#x27;最高薪资&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>1、查出至少有一个员工的部门。显示部门编号、部门名称、部门位置、部门人数。</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">涉及表： employee dept</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">语句：select deptnu,count(*) from employee group by deptnu</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">语句：select a.deptnu,a.dname,a.addr, b.zongshu from dept a,(select deptnu,count(*) as zongshu from employee group by deptnu) b where a.deptnu=b.deptnu;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2、列出薪金比安琪拉高的所有员工。</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">涉及表：employee</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">语句：select * from  employee where sal &gt; (select sal from employee where ename=&#x27;安琪拉&#x27;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>3、列出所有员工的姓名及其直接上级的姓名。</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">涉及表：employee</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">语句：select a.ename,ifnull(b.ename,&#x27;BOSS&#x27;) as leader from employee a left join employee b on a.mgr=b.empno;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>4、列出受雇日期早于直接上级的所有员工的编号、姓名、部门名称。</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">涉及表：employee dept</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">条件：a.hiredate &lt; b.hiredate</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">语句：select a.empno,a.ename,c.dname from employee a left join employee b on a.mgr=b.empno left join dept c on a.deptnu=c.deptnu where a.hiredate &lt; b.hiredate;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>5、列出部门名称和这些部门的员工信息，同时列出那些没有员工的部门</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">涉及表：dept employee</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">语句：select a.dname,b.* from dept a left join employee b on a.deptnu=b.deptnu;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>6、列出所有文员的姓名及其部门名称，所在部门的总人数。</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">涉及表：employee dept</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">条件：job=&#x27;文员&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">语句：select deptnu,count(*) as zongshu from employee group by deptnu;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">语句：select b.ename,a.dname,b.job,c.zongshu from dept a ,employee b ,(select deptnu,count(*) as zongshu from employee group by deptnu) c where a.deptnu=b.deptnu and </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">b.job=&#x27;文员&#x27; and b.deptnu=c.deptnu;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>7、列出最低薪金大于15000的各种工作及从事此工作的员工人数。</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">涉及表：employee</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">条件：min(sal) &gt; 15000 </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">语句：select job,count(*) from employee group by job having   min(sal) &gt; 15000;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>8、列出在销售部工作的员工的姓名，假定不知道销售部的部门编号</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">涉及表：employee dept</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">select  ename  from employee where deptnu=(select deptnu from dept where dname=&#x27;销售部&#x27;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>9、列出与诸葛亮从事相同工作的所有员工及部门名称。</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">涉及表：employee dept</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">语句：select a.ename,b.dname from employee a,dept b where a.deptnu=b.deptnu and a.job=(select job from employee where ename=&#x27;诸葛亮&#x27;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">语句：select a.ename,b.dname from employee a left join dept b on a.deptnu=b.deptnu where a.job=(select job from employee where ename=&#x27;诸葛亮&#x27;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>10、列出薪金比 在部门30工作的员工的薪金 还高的员工姓名和  薪金、部门名称。</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">涉及表：employee dept</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">语句：select a.ename,a.sal,b.dname from employee a ,dept b where a.deptnu=b.deptnu and sal &gt; (select max(sal) from employee where deptnu=30);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>11、列出每个部门的员工数量、平均工资。</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">涉及表：employee</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">语句：select deptnu , count(*) ,avg (sal) from employee  group by deptnu;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>12、列出薪金高于公司平均薪金的所有员工信息，所在部门名称，上级领导，工资等级。</p>
<div class="language-mysql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-mysql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">涉及表：employee dept salgrade</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">条件：select avg(sal) from employee</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">语句：elect a.*,c.dname,b.ename,d.grade from employee a,employee b,dept c ,salgrade d where a.mgr=b.empno and a.deptnu =c.deptnu and a.sal &gt; (select avg(sal) from </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">employee)  and   a.sal  between d.lowsal and d.higsal;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/productivity-exercise-2">练习题2</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-06-10T00:00:00.000Z">2018年6月10日</time> · <!-- -->阅读需 1 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>Java继承后类的初始化顺序</em>  </p>
<p>问题：静态代码块、⾮静态代码、⽗类/子类无参构造⽅方法、父类/子类的⼀一般⽅法</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Father {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    static {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;父类静态代码块&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public Father(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;father 无参构造函数&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public Father(int age){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;father 有参构造函数&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void sleep(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;father sleep方法&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Children extends Father{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    static {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;Child静态代码块&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public Children(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //super();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;Child⽆参构造函数&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        super.sleep();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void sleep(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;Child sleep方法&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        new Children().sleep();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"> }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/blog/productivity-exercise-1">练习题1</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2018-06-09T00:00:00.000Z">2018年6月9日</time> · <!-- -->阅读需 3 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/jiguanchen"><img class="avatar__photo authorImage_XqGP" src="https://github.com/jachen99.png" alt="季冠臣"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/jiguanchen"><span class="authorName_yefp">季冠臣</span></a></div><small class="authorTitle_nd0D" title="后端研发工程师">后端研发工程师</small><div class="authorSocials_rSDt"><a href="https://github.com/jachen99" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg viewBox="0 0 256 250" width="1em" height="1em" class="authorSocialLink_owbf githubSvg_Uu4N" xmlns="http://www.w3.org/2000/svg" style="--dark:#000;--light:#fff" preserveAspectRatio="xMidYMid"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a></div></div></div></div></div></header><div class="markdown"><p><em>简单的Java有关数组、循环的练习题</em></p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="知识点数组循环if边界">知识点：数组、循环、if、边界<a href="#知识点数组循环if边界" class="hash-link" aria-label="知识点：数组、循环、if、边界的直接链接" title="知识点：数组、循环、if、边界的直接链接">​</a></h6>
<p>创建100个学生对象，id编号为1-100
把编号可以大于60的归为二组，其它归为一组</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="知识点switch">知识点：switch<a href="#知识点switch" class="hash-link" aria-label="知识点：switch的直接链接" title="知识点：switch的直接链接">​</a></h6>
<p>定义一个方法，给1-4其中一个数字，返回春夏秋冬字符串，不命中则返回 错误季节。</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="知识点static数组循环">知识点：static、数组、循环<a href="#知识点static数组循环" class="hash-link" aria-label="知识点：static、数组、循环的直接链接" title="知识点：static、数组、循环的直接链接">​</a></h6>
<p>定义一个Dog类，里面含有age静态变量初始值为10，有一个name成员属性，有一个changAge方法，使age自增1，创建含5个的dog数组，获取数组角标为3的dog对象，调用两次changAge方法，最后打印5个dog对象的age分别为多少？</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class AnswerTest {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void main(String [] args){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">       // test1();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        //test2();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        test3();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void test3(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Dog [] dogs = new Dog[5];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for(int i=0; i&lt;5; i++){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Dog dog = new Dog();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            dog.setName(&quot;旺财&quot;+i);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            dogs[i] = dog;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Dog dog =  dogs[3];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        dog.changeAge();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        dog.changeAge();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for (Dog d : dogs){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(&quot;名称=&quot;+d.getName() + &quot;, age=&quot;+d.getAge());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void test2(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int season = 10;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        String content;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        switch (season){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 1:content=&quot;春&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 2:content=&quot;夏&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 3:content=&quot;秋&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            case 4:content=&quot;冬&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                break;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            default: {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                content=&quot;错误季节&quot;;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                System.out.println(&quot;default 执行&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(content);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static void test1(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Student[] arr1 = new Student[60];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int arr1Index = 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Student[] arr2 = new Student[40];</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        int arr2Index = 0;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for(int i=0; i&lt;100; i++){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            int num = i+1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            Student student = new Student();</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            student.setId(num);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            if(num &gt; 60){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                arr2[arr2Index] = student;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                //arr2Index = arr2Index +1;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                arr2Index++;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }else {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                arr1[arr1Index] = student;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                arr1Index++;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for(Student s: arr1){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(s.getId());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        System.out.println(&quot;============&quot;);</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        for(Student s: arr2){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            System.out.println(s.getId());</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Student {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private int id;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public int  getId(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return id;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void setId(int id){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.id = id;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">public class Dog {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public static int age =10;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    private String name;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void setName(String name){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        this.name = name;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public String getName(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return name;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public void changeAge(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        age++;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    public int getAge(){</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return age;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="row docusaurus-mt-lg"></footer></article><nav class="pagination-nav" aria-label="博文列表分页导航"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">随笔</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://weibo.com/u/5489560765" target="_blank" rel="noopener noreferrer" class="footer__link-item">我的微博<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://blog.csdn.net/m0_46464597?type=blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">CSDN<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">我的博客</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/friends">友链</a></li><li class="footer__item"><a href="https://github.com/Jachen99" target="_blank" rel="noopener noreferrer" class="footer__link-item">follow me on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
                <img src="/img/logo.svg" alt="Logo" style="height: 38px; vertical-align: middle;">
                    © 2024 jachen99.github.io, Inc. Built with 
                <a href="https://docusaurus.io/" target="_blank" style="text-decoration: none;">Docusaurus</a>.
                <a href="https://notbyai.fyi/cn/" target="_blank">
                    <img src="/img/noai.svg" alt="No AI" style="height: 50px; vertical-align: middle; float: right;">
                </a>
            </div></div></div></footer></div>
</body>
</html>